
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Do">
    <title>appium知识点笔记 - Do</title>
    <meta name="author" content="Abilish">
    
    
        <link rel="icon" href="http://example.com/assets/images/avatar.png">
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Abilish","sameAs":["https://github.com/abilish","http://stackoverflow.com/users"],"image":"avatar.png"},"articleBody":"\n\n\n\n1. Appium是什么Appium 是移动端的自动化测试框架，可用于测试\n\n原生应用：能安装，即从应用程序市场中下载的app\n移动网页应用：浏览器访问的应用，iOS上的Safari和Android上的 Chrome\n混合应用：原生应用中嵌入web网页。（微信小程序）\n\n可以用在iOS和Android操作系统上，多语言，多平台（iOS、Android，Windows、Mac）。\n1.1 Appium原理The Appium Clients - Appium\nAppium使用Client/Server设计模式，Client发送HTTP请求给Server其中用任何语言来实现都可以。采用了C/S设计模式就是Appium和Selenium（WebDriver）支持多语言的原因。\nAppium类库封装了selenium类库并在其基础上增加了一些扩展，以实现selenium无法完成的功能，例如：手机端操作、旋转屏幕、手机硬件、手势操作等。\nAppium的底层通过HTTP协议进行交互，**在W3C协议WebDriver (w3c.github.io)的基础上进行了扩展[ Mobile JSON Wire Protocol**。\nwebdriver基于http协议，第一链接会建立一个session会话，并且通过post发送一个json告知服务端相关测试信息。\n按照W3C的协议及appium扩展的协议可以封装成自己的测试框架，通过一系列的api完成各种客户端的操作。\n1.2 Appium设计理念Appium Client、Appium Server、被测设备\n\nAppium Client就是脚本，可以用任何语言编写；\n\nAppium Server提供了一整套的服务，先启动4723端口，然后会监听客户端（Appium Client）发来的请求（HTTP），客户端通过webdriver.remote给客户端发送请求建立连接；\n同时server还会将请求转发给被测的移动设备，客户端和server端建立连接时发送的JSON会告诉server被测设备的信息及指令，再将指令转发给被测设备；\n被测设备执行完测试转发给server，server再返回给客户端。\n\nserver可以放在云端\n\n\n\n\n\n\n1.3 Appium环境Java 1.8、Android sdk、Node js（≥10）、npm（≥6）、python3、appium-desktop、Appium-Python-Client\n客户端（Appium Client）：Appium-Python-Client（pip，调用webdriver需要）、python3\n服务端（Appium Server）：\n\nappium-desktop: \n新手友好，官网安装。包含两部分：appium inspector（录制功能）、appium server\n\nappium server（官方方式：npm install -g appium；cnpm install -g appium）\n还需要安装的运行环境：Node js（≥10）、npm（≥6）\n\n\n手机端：\nAndroid设备：\n\n真机 / 模拟器（mumu模拟器(6.1)、夜神(5.1)、逍遥、genimotion(连接外网，对不同尺寸型号都能定制)、emulator(电脑性能要好，提供不同版本)）\n\nadb：android debug bridge——&gt;需要配置Android sdk（下载、环境变量）\nJava 1.8 （环境变量）\n\n\niOS设备（MacOS）：\n\n真机 / 模拟器：Xcode，libimobiledevice、ideviceinstaller、WDA\n\nAndroid可以运行在Windows、MacOS、Linux环境下；\niOS设备只能运行在MacOS环境下\n1.4 常用端口4723、5037、7555、800*\n4723：Appium server监听客户端发来的请求的端口，多设备时要监听多个端口\n5037：adb server和adb clients之间的通讯端口。\n7555：MuMu模拟器端口\n800*：Chrome driver通讯使用的端口。appium server和手机端之间的通讯端口（8200）\n1.5 Appium源代码（待补充）Appium Package Structure - Appium\nAppium (github.com)\nappium server: Node.js系列包、adb shell、ChromeDriver\n底层引擎： Uiautomator java（Android）、WDA（IOS）、selenium\nappium client: Python、java\nandroid直接依赖于uiautomator2-driver，uiautomator2-driver间接依赖uiautomator2-server，uiautomator2-server是核心。\n脚本中的所有请求先经过appium server（Node.js写的），多数逻辑直接转化给了android的Uiautomator2 Server（Java写的），收到请求后底层调用Uiautomator2来完成对应控件的识别、定位，以及操作。\n二次封装appium\n\n自定义Appium Server\n\ngithub下载源码\n参考文档从源代码运行 Appium - Appium\n\n重新编译Uiautomator\n\ngit clone appium-uisutomator2-server\n2. 常用命令及设置2.1 常用adb命令查看当前设备：\n1adb devices\n\n1234adb kill-serveradb start-server  # 没有server会自动启动，所以这条命令不哟个特意写adn connect IP/端口adb shell dumpsys window|findstr mCurrent # 查看当前窗口信息，可以用来获取当前页面名\n\n\n\n2.1.1 获取app的信息\napp信息：\n\n12345# 获取当前界面元素adb shell dumpsys activity top# 获取任务列表(待补充)adb shell dumpsys actity activities\n\n\napp入口（获取包名，activity名）：\n\n123adb logcat |grep -i displayed  \t\t\t# Linuxadb shell &quot;logcat |grep -i displayed&quot;   # Winadb logcat |findstr -i displayed\t\t# Win\n\n\n启动应用\n\n1adb shell am start -W -n 包名/activity名 -S\n\n\n\n2.2 appium常用设置中文版：https://github.com/appium/appium/blob/master/docs/cn/writing-running-appium/caps.md\n英文版：https://github.com/appium/appium/blob/master/docs/en/writing-running-appium/caps.md / Desired Capabilities - Appium\n123app apk地址appPackage # 包名appActivity # Activity名\n\n1“noReset” : True\n\n在当前 session 下不会重置应用的状态。默认值为 false。适用情景：弹框、登录等\n1fullReset\n\nStop app, clear app data and uninstall apk before session starts and after test\n1&quot;skipDeviceInitialization&quot;   true or false\n\n跳过安装、权限设置等操作，提升性能，加快速度\n1&quot;udid&quot;\n\n多设备测试时启用\n1&quot;dontStopAppOnReset&quot;\n\n首次启动的时候\n12&quot;unicodeKeyboard&quot;   &quot;resetKeyboard&quot;\n\n是否输入非英文之外的语言并在测试完成后重置输入法\n1&quot;skipDeviceInitialization&quot;\n\n跳过设备初始化：Skip device initialization which includes i.a.: installation and running of Settings app or setting of permissions. \n1&quot;skipServerInstallation&quot;\n\nappium/appium-uiautomator2-driver: Appium driver for Android UIAutomator2 (github.com)\n跳过uiautomator2 server的安装\n1&quot;skipUnlock&quot;\n\nSkips unlock during session creation. Defaults to false\n1&quot;skipLogcatCapture&quot;\n\nSkips to start capturing logcat. It might improve performance such as network. Log related commands will not work. Defaults to .false\n跳过日志捕获，driver也提供了一个logcat的API（get_log）\n1&quot;waitForIdleTimeout&quot;\n\nappium/settings.md at master · appium/appium (github.com)\nappium/appium-uiautomator2-driver: Appium driver for Android UIAutomator2 (github.com)\nTimeout used for waiting for the user interface to go into an idle state. \n动态页面\n2.3 Appium server的常用命令1234appium # 直接启动appium --help # 帮助文档appium -g d:\\appium.log # 打印日志到文件appium.logappium -p 4723\t# 多设备，启动特定端口\n\n\n\n2.4 Android Stadio显示emulator支持的所有命令：\n1emulator -help\n\n列出可用模拟器：\n1emulator -list-avds  \n\n命令行方式启动模拟器：\n1emulator @可用模拟器名\n\n\n2.5 补充\nuiautomatorviewer 命令行启动uiautomator\n\n3. App测试注意点3.1 pytest：setup_class、setupsetup_class :、teardown_class在每一个类中只执行一次，先执行setup_class方法，再执行setup方法。setup、teardown在方法中调用。\n4. 常用操作3.1 弹框处理5. 项目（进行中）5.1项目一项目地址：Abilish/TestPractice: 测试学习及练习汇总，包括代码、笔记等 (github.com)\n项目介绍：BiliBili的自动化测试脚本。\n（√ ）已完成\n⭕还有一半未完成\n打开app（√ ）—&gt;点击搜索框（√ ）—&gt;输入搜索内容（√ ）—&gt;进行搜索（√   ⭕）—&gt;点击up主第一个视频—这里用触屏操作下滑（√ ），然后点击屏幕中显示的第二个视频（√ ）&gt;发表评论（√ ）并一键三连（√ ）（(●’◡’●)，骗三连喽~）—&gt;toast（√ ），然后返回首页—&gt;测试完成（断言）（√ ）—&gt;生成测试报告 —&gt;PO（√ ）\n待改进内容：\n触屏操作、数据驱动、弹框使用装饰器\n5.1.1 遇到的问题及解决方法1. 搜索（待补充）问题描述：\n进行搜索有两种方法：①点击下方自动匹配出的搜索关键词； ②点击手机自带输入法中的搜索按钮进行搜索\n方法①在appium自带的定位器中无法选中（如下图所示），但在uiautomator定位器中可以被选中\n\n解决方法：\n①当搜索的关键词在页面出现多次时，无法使用ID定位、无法使用Accessibility ID 定位，因此最优选择是XPATH\n(//*[@text=&#39;天真的和感伤的小说家&#39;])[2]\n吐槽：appium定位器太不稳定了，老是崩，还要重启\n②待补充\n2.MobileBy ——&gt; AppiumBy12deprecated:: 2.1.0    Please use &#x27;from appium.webdriver.common.appiumby import AppiumBy&#x27; instead of &#x27;MobileBy&#x27;.\n\nMobileBy已弃用，已使用AppiumBy\n3. 触屏操作（待修改）appium/touch-actions.md at master · appium/appium (github.com)\n在触屏操作之前要注意页面元素显示，因为find_element会不断执行隐式等待，但触屏操作不会，所以要等页面加载出来再执行触屏滑动\n用着用着突然看见了已被弃用，扎心了，我都快写完了才发现，等我先写完再改TAT：\n1&#x27;TouchAction&#x27; action is deprecated. Please use W3C actions instead.\n\nW3C actions：http://appium.io/docs/en/commands/interactions/actions/\n12345element = driver.find_element_by_accessibility_id(&quot;elId&quot;)actions = ActionChains(driver)actions.move_to_element(element)actions.click(hidden_submenu)actions.perform()\n\n\n\n\n\n4. 字符串转列表在获取点赞按钮的坐标这个属性时，获取到的是字符串\n获取元素：\n1234like_element = self.driver.find_element(AppiumBy.ID, &#x27;tv.danmaku.bili:id/recommend_icon&#x27;)l_position= like_element.get_attribute(&quot;bounds&quot;)print(l_position)print(type(l_position))\n\n输出：\n12PASSED                       [100%][104,1286][170,1352]&lt;class &#x27;str&#x27;&gt;\n\n解决：replace替换其中的符号，然后再使用split对逗号（，）进行切割就行。\n1l_position = l_position.replace(&quot;][&quot;, &#x27;,&#x27;).replace(&quot;[&quot;, &#x27;&#x27;).replace(&quot;]&quot;, &#x27;&#x27;).split(&#x27;,&#x27;)\n\n\n\n\n\n问题延伸：\n1、列表转字符串：str123&gt;&gt;&gt; a = [1, &#x27;ff&#x27;, &#x27;eed&#x27;]&gt;&gt;&gt; str(a)&quot;[1, &#x27;ff&#x27;, &#x27;eed&#x27;]&quot;\n\n其他呢？\n5.PO封装page：\napp.py    app基本操作\n6.弹框处理基础：base_page.py \n进阶：装饰器\n7. 其他appium测试运行的很慢，看了一下日志，大概是从手机端返回post请求时出现的问题，想要知道是哪里出现问题需要找到手机端的logcat\n(21条消息) 使用adb logcat命令显示Android设备上的Log日志_峥嵘life的博客-CSDN博客_adb logcat\n常用adb logcat命令总结\n1231.adb logcat -v time2.adb logcat -v time &gt; D:\\log.txt3.adb logcat -c\n\n\n\n（吐槽：我太无语了，哭笑不得，用adb logcat -c清除了一下缓存信息就突然不卡了，和我的预想差太多了，懵圈了23333）","dateCreated":"2022-03-26T15:26:07+08:00","dateModified":"2022-04-05T09:55:24+08:00","datePublished":"2022-03-26T15:26:07+08:00","description":"appium知识点笔记系统整理、学习总结\n项目一：bilibili自动化测试\n","headline":"appium知识点笔记","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com/2022/03/26/appium%E7%9F%A5%E8%AF%86%E7%82%B9%E7%AC%94%E8%AE%B0/"},"publisher":{"@type":"Organization","name":"Abilish","sameAs":["https://github.com/abilish","http://stackoverflow.com/users"],"image":"avatar.png","logo":{"@type":"ImageObject","url":"avatar.png"}},"url":"http://example.com/2022/03/26/appium%E7%9F%A5%E8%AF%86%E7%82%B9%E7%AC%94%E8%AE%B0/","keywords":"可改进"}</script>
    <meta name="description" content="appium知识点笔记系统整理、学习总结 项目一：bilibili自动化测试">
<meta property="og:type" content="blog">
<meta property="og:title" content="appium知识点笔记">
<meta property="og:url" content="http://example.com/2022/03/26/appium%E7%9F%A5%E8%AF%86%E7%82%B9%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Do">
<meta property="og:description" content="appium知识点笔记系统整理、学习总结 项目一：bilibili自动化测试">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2022/03/28/g3T9qM7nKuPcmZ1.png">
<meta property="og:image" content="https://s2.loli.net/2022/03/28/3c5tbxTuMOgAKDX.png">
<meta property="og:image" content="https://s2.loli.net/2022/03/29/rI1SCAQR5iUPvzB.png">
<meta property="og:image" content="https://s2.loli.net/2022/03/29/pVWKmaen9G8cRgU.png">
<meta property="article:published_time" content="2022-03-26T07:26:07.000Z">
<meta property="article:modified_time" content="2022-04-05T01:55:24.512Z">
<meta property="article:author" content="Abilish">
<meta property="article:tag" content="可改进">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2022/03/28/g3T9qM7nKuPcmZ1.png">
    
    
        
    
    
        <meta property="og:image" content="http://example.com/assets/images/avatar.png"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-dnipa5uemzhoi9vvrnmqb2ijfofk2ioy6agrjzdgxdcme4ri2nzo71ht0dut.min.css">

    <!--STYLES END-->
    

    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Do
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="打开链接: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/avatar.png" alt="作者的图片"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="阅读有关作者的更多信息"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/avatar.png" alt="作者的图片"/>
                </a>
                <h4 class="sidebar-profile-name">Abilish</h4>
                
                    <h5 class="sidebar-profile-bio"><p>Less is More.</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="首页"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首页</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="分类"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">分类</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="标签"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">标签</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="归档"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">归档</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="搜索"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">搜索</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="关于"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">关于</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/abilish"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="http://stackoverflow.com/users"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Stack Overflow"
                        >
                        <i class="sidebar-button-icon fab fa-stack-overflow" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Stack Overflow</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-center">
    
        <h1 class="post-title">
            appium知识点笔记
        </h1>
    
    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <!-- excerpt -->

<h1 id="table-of-contents">目录</h1><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Appium%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">1. Appium是什么</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-Appium%E5%8E%9F%E7%90%86"><span class="toc-text">1.1 Appium原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-Appium%E8%AE%BE%E8%AE%A1%E7%90%86%E5%BF%B5"><span class="toc-text">1.2 Appium设计理念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-Appium%E7%8E%AF%E5%A2%83"><span class="toc-text">1.3 Appium环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-%E5%B8%B8%E7%94%A8%E7%AB%AF%E5%8F%A3"><span class="toc-text">1.4 常用端口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5-Appium%E6%BA%90%E4%BB%A3%E7%A0%81%EF%BC%88%E5%BE%85%E8%A1%A5%E5%85%85%EF%BC%89"><span class="toc-text">1.5 Appium源代码（待补充）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%8F%8A%E8%AE%BE%E7%BD%AE"><span class="toc-text">2. 常用命令及设置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E5%B8%B8%E7%94%A8adb%E5%91%BD%E4%BB%A4"><span class="toc-text">2.1 常用adb命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-1-%E8%8E%B7%E5%8F%96app%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="toc-text">2.1.1 获取app的信息</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-appium%E5%B8%B8%E7%94%A8%E8%AE%BE%E7%BD%AE"><span class="toc-text">2.2 appium常用设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-Appium-server%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-text">2.3 Appium server的常用命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-Android-Stadio"><span class="toc-text">2.4 Android Stadio</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-%E8%A1%A5%E5%85%85"><span class="toc-text">2.5 补充</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-App%E6%B5%8B%E8%AF%95%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-text">3. App测试注意点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-pytest%EF%BC%9Asetup-class%E3%80%81setup"><span class="toc-text">3.1 pytest：setup_class、setup</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C"><span class="toc-text">4. 常用操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E5%BC%B9%E6%A1%86%E5%A4%84%E7%90%86"><span class="toc-text">3.1 弹框处理</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E9%A1%B9%E7%9B%AE%EF%BC%88%E8%BF%9B%E8%A1%8C%E4%B8%AD%EF%BC%89"><span class="toc-text">5. 项目（进行中）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1%E9%A1%B9%E7%9B%AE%E4%B8%80"><span class="toc-text">5.1项目一</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-1-%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95"><span class="toc-text">5.1.1 遇到的问题及解决方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%90%9C%E7%B4%A2%EF%BC%88%E5%BE%85%E8%A1%A5%E5%85%85%EF%BC%89"><span class="toc-text">1. 搜索（待补充）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text"></span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-MobileBy-%E2%80%94%E2%80%94-gt-AppiumBy"><span class="toc-text">2.MobileBy ——&gt; AppiumBy</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E8%A7%A6%E5%B1%8F%E6%93%8D%E4%BD%9C%EF%BC%88%E5%BE%85%E4%BF%AE%E6%94%B9%EF%BC%89"><span class="toc-text">3. 触屏操作（待修改）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E5%88%97%E8%A1%A8"><span class="toc-text">4. 字符串转列表</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E5%88%97%E8%A1%A8%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%9Astr"><span class="toc-text">1、列表转字符串：str</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-PO%E5%B0%81%E8%A3%85"><span class="toc-text">5.PO封装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E5%BC%B9%E6%A1%86%E5%A4%84%E7%90%86"><span class="toc-text">6.弹框处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E5%85%B6%E4%BB%96"><span class="toc-text">7. 其他</span></a></li></ol></li></ol></li></ol></li></ol>

<h1 id="1-Appium是什么"><a href="#1-Appium是什么" class="headerlink" title="1. Appium是什么"></a>1. Appium是什么</h1><p>Appium 是移动端的自动化测试框架，可用于测试</p>
<ul>
<li><strong>原生应用</strong>：能安装，即从应用程序市场中下载的app</li>
<li><strong>移动网页应用</strong>：浏览器访问的应用，iOS上的Safari和Android上的 Chrome</li>
<li><strong>混合应用</strong>：原生应用中嵌入web网页。（微信小程序）</li>
</ul>
<p>可以用在iOS和Android操作系统上，多语言，多平台（iOS、Android，Windows、Mac）。</p>
<h2 id="1-1-Appium原理"><a href="#1-1-Appium原理" class="headerlink" title="1.1 Appium原理"></a>1.1 Appium原理</h2><p><a target="_blank" rel="noopener" href="https://appium.io/docs/en/about-appium/appium-clients/">The Appium Clients - Appium</a></p>
<p>Appium使用Client/Server设计模式，Client发送HTTP请求给Server其中用任何语言来实现都可以。<strong>采用了C/S设计模式就是Appium和Selenium（WebDriver）支持多语言的原因。</strong></p>
<p>Appium类库封装了selenium类库并在其基础上增加了一些扩展，以实现selenium无法完成的功能，例如：手机端操作、旋转屏幕、手机硬件、手势操作等。</p>
<p>Appium的底层通过HTTP协议进行交互，**在W3C协议<a target="_blank" rel="noopener" href="https://w3c.github.io/webdriver/webdriver-spec.html">WebDriver (w3c.github.io)</a>的基础上进行了扩展[ <a target="_blank" rel="noopener" href="https://github.com/SeleniumHQ/mobile-spec/blob/master/spec-draft.md">Mobile JSON Wire Protocol</a>**。</p>
<p>webdriver基于http协议，第一链接会建立一个session会话，并且通过post发送一个json告知服务端相关测试信息。</p>
<p>按照W3C的协议及appium扩展的协议可以封装成自己的测试框架，通过一系列的api完成各种客户端的操作。</p>
<h2 id="1-2-Appium设计理念"><a href="#1-2-Appium设计理念" class="headerlink" title="1.2 Appium设计理念"></a>1.2 Appium设计理念</h2><p>Appium Client、Appium Server、被测设备</p>
<ul>
<li><p>Appium Client就是脚本，可以用任何语言编写；</p>
</li>
<li><p>Appium Server提供了一整套的服务，先启动4723端口，然后会监听客户端（Appium Client）发来的请求（<strong>HTTP</strong>），客户端通过webdriver.remote给客户端发送请求建立连接；</p>
<p>同时server还会将请求转发给被测的移动设备，客户端和server端建立连接时发送的<strong>JSON</strong>会告诉server被测设备的信息及指令，再将指令转发给被测设备；</p>
<p>被测设备执行完测试转发给server，server再返回给客户端。</p>
</li>
<li><p>server可以放在云端</p>
</li>
</ul>
<img src="https://s2.loli.net/2022/03/28/g3T9qM7nKuPcmZ1.png" alt="appium.png" style="zoom: 150%;" />



<h2 id="1-3-Appium环境"><a href="#1-3-Appium环境" class="headerlink" title="1.3 Appium环境"></a>1.3 Appium环境</h2><p>Java 1.8、Android sdk、Node js（≥10）、npm（≥6）、python3、appium-desktop、Appium-Python-Client</p>
<p><strong>客户端（Appium Client）</strong>：Appium-Python-Client（pip，调用webdriver需要）、python3</p>
<p><strong>服务端（Appium Server）</strong>：</p>
<ol>
<li><p>appium-desktop: </p>
<p>新手友好，官网安装。包含两部分：appium inspector（录制功能）、appium server</p>
</li>
<li><p>appium server（官方方式：<code>npm install -g appium</code>；<code>cnpm install -g appium</code>）</p>
<p>还需要安装的运行环境：Node js（≥10）、npm（≥6）</p>
</li>
</ol>
<p><strong>手机端</strong>：</p>
<p>Android设备：</p>
<ul>
<li><p>真机 / 模拟器（mumu模拟器(6.1)、夜神(5.1)、逍遥、genimotion(连接外网，对不同尺寸型号都能定制)、emulator(电脑性能要好，提供不同版本)）</p>
</li>
<li><p>adb：android debug bridge——&gt;需要配置Android sdk（下载、环境变量）</p>
<p>Java 1.8 （环境变量）</p>
</li>
</ul>
<p>iOS设备（MacOS）：</p>
<ul>
<li>真机 / 模拟器：Xcode，libimobiledevice、ideviceinstaller、WDA</li>
</ul>
<p>Android可以运行在Windows、MacOS、Linux环境下；</p>
<p>iOS设备只能运行在MacOS环境下</p>
<h2 id="1-4-常用端口"><a href="#1-4-常用端口" class="headerlink" title="1.4 常用端口"></a>1.4 常用端口</h2><p>4723、5037、7555、800*</p>
<p>4723：Appium server监听客户端发来的请求的端口，多设备时要监听多个端口</p>
<p>5037：adb server和adb clients之间的通讯端口。<img src="https://s2.loli.net/2022/03/28/3c5tbxTuMOgAKDX.png" alt="adb.png"  /></p>
<p>7555：MuMu模拟器端口</p>
<p>800*：Chrome driver通讯使用的端口。appium server和手机端之间的通讯端口（8200）</p>
<h2 id="1-5-Appium源代码（待补充）"><a href="#1-5-Appium源代码（待补充）" class="headerlink" title="1.5 Appium源代码（待补充）"></a>1.5 Appium源代码（待补充）</h2><p><a target="_blank" rel="noopener" href="https://appium.io/docs/en/contributing-to-appium/appium-packages/#appium-in-a-nutshell">Appium Package Structure - Appium</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/appium">Appium (github.com)</a></p>
<p><strong>appium server</strong>: Node.js系列包、adb shell、ChromeDriver</p>
<p><strong>底层引擎</strong>： Uiautomator java（Android）、WDA（IOS）、selenium</p>
<p><strong>appium client</strong>: Python、java</p>
<p>android直接依赖于uiautomator2-driver，uiautomator2-driver间接依赖uiautomator2-server，uiautomator2-server是核心。</p>
<p>脚本中的所有请求先经过appium server（Node.js写的），多数逻辑直接转化给了android的Uiautomator2 Server（Java写的），收到请求后底层调用Uiautomator2来完成对应控件的识别、定位，以及操作。</p>
<p><strong>二次封装appium</strong></p>
<ul>
<li>自定义Appium Server</li>
</ul>
<p>github下载源码</p>
<p>参考文档<a target="_blank" rel="noopener" href="https://appium.io/docs/cn/contributing-to-appium/appium-from-source/">从源代码运行 Appium - Appium</a></p>
<ul>
<li>重新编译Uiautomator</li>
</ul>
<p>git clone appium-uisutomator2-server</p>
<h1 id="2-常用命令及设置"><a href="#2-常用命令及设置" class="headerlink" title="2. 常用命令及设置"></a>2. 常用命令及设置</h1><h2 id="2-1-常用adb命令"><a href="#2-1-常用adb命令" class="headerlink" title="2.1 常用adb命令"></a>2.1 常用adb命令</h2><p>查看当前设备：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb devices</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">adb kill-server</span><br><span class="line">adb start-server  # 没有server会自动启动，所以这条命令不哟个特意写</span><br><span class="line">adn connect IP/端口</span><br><span class="line">adb shell dumpsys window|findstr mCurrent # 查看当前窗口信息，可以用来获取当前页面名</span><br></pre></td></tr></table></figure>



<h3 id="2-1-1-获取app的信息"><a href="#2-1-1-获取app的信息" class="headerlink" title="2.1.1 获取app的信息"></a>2.1.1 获取app的信息</h3><ul>
<li>app信息：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 获取当前界面元素</span><br><span class="line">adb shell dumpsys activity top</span><br><span class="line"></span><br><span class="line"># 获取任务列表(待补充)</span><br><span class="line">adb shell dumpsys actity activities</span><br></pre></td></tr></table></figure>

<ul>
<li>app入口（获取包名，activity名）：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">adb logcat |grep -i displayed  			# Linux</span><br><span class="line">adb shell &quot;logcat |grep -i displayed&quot;   # Win</span><br><span class="line">adb logcat |findstr -i displayed		# Win</span><br></pre></td></tr></table></figure>

<ul>
<li>启动应用</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am start -W -n 包名/activity名 -S</span><br></pre></td></tr></table></figure>



<h2 id="2-2-appium常用设置"><a href="#2-2-appium常用设置" class="headerlink" title="2.2 appium常用设置"></a>2.2 appium常用设置</h2><p>中文版：<a target="_blank" rel="noopener" href="https://github.com/appium/appium/blob/master/docs/cn/writing-running-appium/caps.md">https://github.com/appium/appium/blob/master/docs/cn/writing-running-appium/caps.md</a></p>
<p>英文版：<a target="_blank" rel="noopener" href="https://github.com/appium/appium/blob/master/docs/en/writing-running-appium/caps.md">https://github.com/appium/appium/blob/master/docs/en/writing-running-appium/caps.md</a> / <a target="_blank" rel="noopener" href="https://appium.io/docs/en/writing-running-appium/caps/">Desired Capabilities - Appium</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app apk地址</span><br><span class="line">appPackage # 包名</span><br><span class="line">appActivity # Activity名</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">“noReset” : True</span><br></pre></td></tr></table></figure>

<p>在当前 session 下不会重置应用的状态。默认值为 false。适用情景：弹框、登录等</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fullReset</span><br></pre></td></tr></table></figure>

<p>Stop app, clear app data and uninstall apk before session starts and after test</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;skipDeviceInitialization&quot;   true or false</span><br></pre></td></tr></table></figure>

<p>跳过安装、权限设置等操作，提升性能，加快速度</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;udid&quot;</span><br></pre></td></tr></table></figure>

<p>多设备测试时启用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;dontStopAppOnReset&quot;</span><br></pre></td></tr></table></figure>

<p>首次启动的时候</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;unicodeKeyboard&quot;   </span><br><span class="line">&quot;resetKeyboard&quot;</span><br></pre></td></tr></table></figure>

<p>是否输入非英文之外的语言并在测试完成后重置输入法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;skipDeviceInitialization&quot;</span><br></pre></td></tr></table></figure>

<p>跳过设备初始化：Skip device initialization which includes i.a.: <strong>installation</strong> and <strong>running of Settings app</strong> or <strong>setting of permissions</strong>. </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;skipServerInstallation&quot;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://github.com/appium/appium-uiautomator2-driver#capabilities">appium/appium-uiautomator2-driver: Appium driver for Android UIAutomator2 (github.com)</a></p>
<p>跳过uiautomator2 server的安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;skipUnlock&quot;</span><br></pre></td></tr></table></figure>

<p>Skips unlock during session creation. Defaults to <code>false</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;skipLogcatCapture&quot;</span><br></pre></td></tr></table></figure>

<p>Skips to start capturing logcat. It might improve performance such as network. Log related commands will not work. Defaults to .<code>false</code></p>
<p>跳过日志捕获，driver也提供了一个logcat的API（get_log）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;waitForIdleTimeout&quot;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://github.com/appium/appium/blob/master/docs/en/advanced-concepts/settings.md">appium/settings.md at master · appium/appium (github.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/appium/appium-uiautomator2-driver#settings-api">appium/appium-uiautomator2-driver: Appium driver for Android UIAutomator2 (github.com)</a></p>
<p>Timeout used for waiting for the user interface to go into an idle state. </p>
<p>动态页面</p>
<h2 id="2-3-Appium-server的常用命令"><a href="#2-3-Appium-server的常用命令" class="headerlink" title="2.3 Appium server的常用命令"></a>2.3 Appium server的常用命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">appium # 直接启动</span><br><span class="line">appium --help # 帮助文档</span><br><span class="line">appium -g d:\appium.log # 打印日志到文件appium.log</span><br><span class="line">appium -p 4723	# 多设备，启动特定端口</span><br></pre></td></tr></table></figure>



<h2 id="2-4-Android-Stadio"><a href="#2-4-Android-Stadio" class="headerlink" title="2.4 Android Stadio"></a>2.4 Android Stadio</h2><p>显示emulator支持的所有命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">emulator -help</span><br></pre></td></tr></table></figure>

<p>列出可用模拟器：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">emulator -list-avds  </span><br></pre></td></tr></table></figure>

<p>命令行方式启动模拟器：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">emulator @可用模拟器名</span><br></pre></td></tr></table></figure>


<h2 id="2-5-补充"><a href="#2-5-补充" class="headerlink" title="2.5 补充"></a>2.5 补充</h2><ol>
<li><code>uiautomatorviewer</code> 命令行启动uiautomator</li>
</ol>
<h1 id="3-App测试注意点"><a href="#3-App测试注意点" class="headerlink" title="3. App测试注意点"></a>3. App测试注意点</h1><h2 id="3-1-pytest：setup-class、setup"><a href="#3-1-pytest：setup-class、setup" class="headerlink" title="3.1 pytest：setup_class、setup"></a>3.1 pytest：setup_class、setup</h2><p>setup_class :、teardown_class在<strong>每一个类中只执行一次</strong>，先执行setup_class方法，再执行setup方法。setup、teardown在方法中调用。</p>
<h1 id="4-常用操作"><a href="#4-常用操作" class="headerlink" title="4. 常用操作"></a>4. 常用操作</h1><h2 id="3-1-弹框处理"><a href="#3-1-弹框处理" class="headerlink" title="3.1 弹框处理"></a>3.1 弹框处理</h2><h1 id="5-项目（进行中）"><a href="#5-项目（进行中）" class="headerlink" title="5. 项目（进行中）"></a>5. 项目（进行中）</h1><h2 id="5-1项目一"><a href="#5-1项目一" class="headerlink" title="5.1项目一"></a>5.1<strong>项目一</strong></h2><p>项目地址：<a target="_blank" rel="noopener" href="https://github.com/Abilish/TestPractice">Abilish/TestPractice: 测试学习及练习汇总，包括代码、笔记等 (github.com)</a></p>
<p>项目介绍：BiliBili的自动化测试脚本。</p>
<p>（√ ）已完成</p>
<p>⭕还有一半未完成</p>
<p>打开app（√ ）—&gt;点击搜索框（√ ）—&gt;输入搜索内容（√ ）—&gt;进行搜索（√   ⭕）—&gt;<del>点击up主第一个视频</del>—这里用触屏操作下滑（√ ），然后点击屏幕中显示的第二个视频（√ ）&gt;发表评论（√ ）并一键三连（√ ）（(●’◡’●)，骗三连喽~）—&gt;toast（√ ），然后返回首页—&gt;测试完成（断言）（√ ）—&gt;生成测试报告 —&gt;PO（√ ）</p>
<p>待改进内容：</p>
<p>触屏操作、数据驱动、弹框使用装饰器</p>
<h3 id="5-1-1-遇到的问题及解决方法"><a href="#5-1-1-遇到的问题及解决方法" class="headerlink" title="5.1.1 遇到的问题及解决方法"></a>5.1.1 遇到的问题及解决方法</h3><h4 id="1-搜索（待补充）"><a href="#1-搜索（待补充）" class="headerlink" title="1. 搜索（待补充）"></a>1. 搜索（待补充）</h4><p><strong>问题描述：</strong></p>
<p>进行搜索有两种方法：①点击下方自动匹配出的搜索关键词； ②点击手机自带输入法中的搜索按钮进行搜索</p>
<p>方法①在appium自带的定位器中无法选中（如下图所示），但在uiautomator定位器中可以被选中</p>
<p><img src="https://s2.loli.net/2022/03/29/rI1SCAQR5iUPvzB.png" alt="bilibili.png"></p>
<p><strong>解决方法：</strong></p>
<p>①当<strong>搜索的关键词在页面出现多次</strong>时，无法使用ID定位、无法使用Accessibility ID 定位，因此<strong>最优选择是XPATH</strong></p>
<p><code>(//*[@text=&#39;天真的和感伤的小说家&#39;])[2]</code></p>
<h3 id=""><a href="#" class="headerlink" title=""></a><img src="https://s2.loli.net/2022/03/29/pVWKmaen9G8cRgU.png" alt="search.png"></h3><p>吐槽：appium定位器太不稳定了，老是崩，还要重启</p>
<p>②待补充</p>
<h4 id="2-MobileBy-——-gt-AppiumBy"><a href="#2-MobileBy-——-gt-AppiumBy" class="headerlink" title="2.MobileBy ——&gt; AppiumBy"></a>2.MobileBy ——&gt; AppiumBy</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">deprecated:: 2.1.0</span><br><span class="line">    Please use &#x27;from appium.webdriver.common.appiumby import AppiumBy&#x27; instead of &#x27;MobileBy&#x27;.</span><br></pre></td></tr></table></figure>

<p>MobileBy已弃用，已使用AppiumBy</p>
<h4 id="3-触屏操作（待修改）"><a href="#3-触屏操作（待修改）" class="headerlink" title="3. 触屏操作（待修改）"></a>3. 触屏操作（待修改）</h4><p><a target="_blank" rel="noopener" href="https://github.com/appium/appium/blob/master/docs/en/writing-running-appium/touch-actions.md">appium/touch-actions.md at master · appium/appium (github.com)</a></p>
<p>在触屏操作之前要注意页面元素显示，因为find_element会不断执行隐式等待，但触屏操作不会，所以要等页面加载出来再执行触屏滑动</p>
<p>用着用着突然看见了已被弃用，扎心了，我都快写完了才发现，等我先写完再改TAT：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x27;TouchAction&#x27; action is deprecated. Please use W3C actions instead.</span><br></pre></td></tr></table></figure>

<p>W3C actions：<a target="_blank" rel="noopener" href="http://appium.io/docs/en/commands/interactions/actions/">http://appium.io/docs/en/commands/interactions/actions/</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">element = driver.find_element_by_accessibility_id(&quot;elId&quot;)</span><br><span class="line">actions = ActionChains(driver)</span><br><span class="line">actions.move_to_element(element)</span><br><span class="line">actions.click(hidden_submenu)</span><br><span class="line">actions.perform()</span><br></pre></td></tr></table></figure>





<h4 id="4-字符串转列表"><a href="#4-字符串转列表" class="headerlink" title="4. 字符串转列表"></a>4. 字符串转列表</h4><p>在获取点赞按钮的坐标这个属性时，获取到的是字符串</p>
<p>获取元素：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">like_element = self.driver.find_element(AppiumBy.ID, &#x27;tv.danmaku.bili:id/recommend_icon&#x27;)</span><br><span class="line">l_position= like_element.get_attribute(&quot;bounds&quot;)</span><br><span class="line">print(l_position)</span><br><span class="line">print(type(l_position))</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PASSED                       [100%][104,1286][170,1352]</span><br><span class="line">&lt;class &#x27;str&#x27;&gt;</span><br></pre></td></tr></table></figure>

<p><strong>解决：</strong>replace替换其中的符号，然后再使用split对逗号（，）进行切割就行。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">l_position = l_position.replace(&quot;][&quot;, &#x27;,&#x27;).replace(&quot;[&quot;, &#x27;&#x27;).replace(&quot;]&quot;, &#x27;&#x27;).split(&#x27;,&#x27;)</span><br></pre></td></tr></table></figure>





<p><strong>问题延伸：</strong></p>
<h5 id="1、列表转字符串：str"><a href="#1、列表转字符串：str" class="headerlink" title="1、列表转字符串：str"></a>1、列表转字符串：str</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; a = [1, &#x27;ff&#x27;, &#x27;eed&#x27;]</span><br><span class="line">&gt;&gt;&gt; str(a)</span><br><span class="line">&quot;[1, &#x27;ff&#x27;, &#x27;eed&#x27;]&quot;</span><br></pre></td></tr></table></figure>

<p>其他呢？</p>
<h4 id="5-PO封装"><a href="#5-PO封装" class="headerlink" title="5.PO封装"></a>5.PO封装</h4><p><strong>page：</strong></p>
<p>app.py    app基本操作</p>
<h4 id="6-弹框处理"><a href="#6-弹框处理" class="headerlink" title="6.弹框处理"></a>6.弹框处理</h4><p>基础：base_page.py </p>
<p>进阶：装饰器</p>
<h4 id="7-其他"><a href="#7-其他" class="headerlink" title="7. 其他"></a>7. 其他</h4><p>appium测试运行的很慢，看了一下日志，大概是从手机端返回post请求时出现的问题，想要知道是哪里出现问题需要找到手机端的logcat</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/wenzhi20102321/article/details/81058196">(21条消息) 使用adb logcat命令显示Android设备上的Log日志_峥嵘life的博客-CSDN博客_adb logcat</a></p>
<p>常用adb logcat命令总结</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.adb logcat -v time</span><br><span class="line">2.adb logcat -v time &gt; D:\log.txt</span><br><span class="line">3.adb logcat -c</span><br></pre></td></tr></table></figure>



<p>（吐槽：我太无语了，哭笑不得，用<code>adb logcat -c</code>清除了一下缓存信息就突然不卡了，和我的预想差太多了，懵圈了23333）</p>
            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">标签</span><br/>
                
    <a class="tag tag--primary tag--small t-none-link" href="/tags/%E5%8F%AF%E6%94%B9%E8%BF%9B/" rel="tag">可改进</a>

            </div>
        
        
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2022 Abilish. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/avatar.png" alt="作者的图片"/>
        
            <h4 id="about-card-name">Abilish</h4>
        
            <div id="about-card-bio"><p>Less is More.</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p><a href="mailto:&#115;&#102;&#121;&#95;&#x6d;&#120;&#x40;&#x31;&#54;&#x33;&#46;&#x63;&#111;&#109;">&#115;&#102;&#121;&#95;&#x6d;&#120;&#x40;&#x31;&#54;&#x33;&#46;&#x63;&#111;&#109;</a></p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                China, Heilongjiang
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/bg.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-u4gocod02ukvjjitb63sjkl6iu1qjp8lpnsrzttfhzhhifp6ao9kpwvy9cik.min.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
