
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Do">
    <title>appium知识点笔记 - Do</title>
    <meta name="author" content="Abilish">
    
    
        <link rel="icon" href="http://example.com/assets/images/avatar.png">
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Abilish","sameAs":["https://github.com/abilish","http://stackoverflow.com/users"],"image":"avatar.png"},"articleBody":"\n\n\n\n1. Appium是什么Appium 是移动端的自动化测试框架，可用于测试\n\n原生应用：能安装，即从应用程序市场中下载的app\n移动网页应用：浏览器访问的应用，iOS上的Safari和Android上的 Chrome\n混合应用：原生应用中嵌入web网页\n\n可以用在iOS和Android操作系统上，多语言，多平台（iOS、Android，Windows、Mac）。\n1.1 Appium原理The Appium Clients - Appium\nAppium使用Client/Server设计模式，Client发送HTTP请求给Server其中用任何语言来实现都可以。采用了C/S设计模式就是Appium和Selenium（WebDriver）支持多语言的原因。\nAppium类库封装了selenium类库并在其基础上增加了一些扩展，以实现selenium无法完成的功能，例如：手机端操作、旋转屏幕、手机硬件、手势操作等。\nAppium的底层通过HTTP协议进行交互，**在W3C协议WebDriver (w3c.github.io)的基础上进行了扩展[ Mobile JSON Wire Protocol**。\nwebdriver基于http协议，第一链接会建立一个session会话，并且通过post发送一个json告知服务端相关测试信息。\n按照W3C的协议及appium扩展的协议可以封装成自己的测试框架，通过一系列的api完成各种客户端的操作。\n1.2 Appium环境Java 1.8、Android sdk、Node js（≥10）、npm（≥6）、python3、appium-desktop、Appium-Python-Client\n1.3 Appium源代码（待补充）Appium Package Structure - Appium\nAppium (github.com)\nappium server: Node.js系列包、adb shell、ChromeDriver\n底层引擎： Uiautomator java（Android）、WDA（IOS）、selenium\nappium client: Python、java\nandroid直接依赖于uiautomator2-driver，uiautomator2-driver间接依赖uiautomator2-server，uiautomator2-server是核心。\n脚本中的所有请求先经过appium server（Node.js写的），多数逻辑直接转化给了android的Uiautomator2 Server（Java写的），收到请求后底层调用Uiautomator2来完成对应控件的识别、定位，以及操作。\n2. 常用命令2.1 常用adb命令查看当前设备：\n1adb devices\n\n\n\n2.1.1 获取app的信息\napp信息：\n\n12345# 获取当前界面元素adb shell dumpsys activity top# 获取任务列表(待补充)adb shell dumpsys actity activities\n\n\napp入口（获取包名，activity名）：\n\n123adb logcat |grep -i displayed  \t\t\t# Linuxadb shell &quot;logcat |grep -i displayed&quot;   # Winadb logcat |findstr -i displayed\t\t# Win\n\n\n启动应用\n\n1adb shell am start -W -n 包名/activity名 -S\n\n\n\n2.2 appium常用设置中文版：https://github.com/appium/appium/blob/master/docs/cn/writing-running-appium/caps.md\n英文版：https://github.com/appium/appium/blob/master/docs/en/writing-running-appium/caps.md\n123app apk地址appPackage # 包名appActivity # Activity名\n\n\n\n“noReset” : True：在当前 session 下不会重置应用的状态。默认值为 false。\n适用情景：弹框、登录等\nfullReset：Stop app, clear app data and uninstall apk before session starts and after test\n1&quot;skipDeviceInitialization&quot;   true or false\n\n跳过安装、权限设置等操作，提升性能，加快速度\n“udid”  多设备测试时启用\n&quot;dontStopAppOnReset&quot;：首次启动的时候\n&quot;unicodeKeyboard&quot;   &quot;resetKeyboard&quot;是否输入非英文之外的语言并在测试完成后重置输入法\n3.","dateCreated":"2022-03-26T15:26:07+08:00","dateModified":"2022-03-27T22:59:06+08:00","datePublished":"2022-03-26T15:26:07+08:00","description":"appium知识点笔记系统整理、学习总结","headline":"appium知识点笔记","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com/2022/03/26/appium%E7%9F%A5%E8%AF%86%E7%82%B9%E7%AC%94%E8%AE%B0/"},"publisher":{"@type":"Organization","name":"Abilish","sameAs":["https://github.com/abilish","http://stackoverflow.com/users"],"image":"avatar.png","logo":{"@type":"ImageObject","url":"avatar.png"}},"url":"http://example.com/2022/03/26/appium%E7%9F%A5%E8%AF%86%E7%82%B9%E7%AC%94%E8%AE%B0/","keywords":"创作中"}</script>
    <meta name="description" content="appium知识点笔记系统整理、学习总结">
<meta property="og:type" content="blog">
<meta property="og:title" content="appium知识点笔记">
<meta property="og:url" content="http://example.com/2022/03/26/appium%E7%9F%A5%E8%AF%86%E7%82%B9%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Do">
<meta property="og:description" content="appium知识点笔记系统整理、学习总结">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-03-26T07:26:07.000Z">
<meta property="article:modified_time" content="2022-03-27T14:59:06.003Z">
<meta property="article:author" content="Abilish">
<meta property="article:tag" content="创作中">
<meta name="twitter:card" content="summary">
    
    
        
    
    
        <meta property="og:image" content="http://example.com/assets/images/avatar.png"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-dnipa5uemzhoi9vvrnmqb2ijfofk2ioy6agrjzdgxdcme4ri2nzo71ht0dut.min.css">

    <!--STYLES END-->
    

    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Do
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="打开链接: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/avatar.png" alt="作者的图片"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="阅读有关作者的更多信息"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/avatar.png" alt="作者的图片"/>
                </a>
                <h4 class="sidebar-profile-name">Abilish</h4>
                
                    <h5 class="sidebar-profile-bio"><p>Less is More.</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="首页"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首页</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="分类"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">分类</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="标签"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">标签</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="归档"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">归档</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="搜索"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">搜索</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="关于"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">关于</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/abilish"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="http://stackoverflow.com/users"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Stack Overflow"
                        >
                        <i class="sidebar-button-icon fab fa-stack-overflow" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Stack Overflow</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-center">
    
        <h1 class="post-title">
            appium知识点笔记
        </h1>
    
    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <!-- excerpt -->

<h1 id="table-of-contents">目录</h1><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Appium%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">1. Appium是什么</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-Appium%E5%8E%9F%E7%90%86"><span class="toc-text">1.1 Appium原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-Appium%E7%8E%AF%E5%A2%83"><span class="toc-text">1.2 Appium环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-Appium%E6%BA%90%E4%BB%A3%E7%A0%81%EF%BC%88%E5%BE%85%E8%A1%A5%E5%85%85%EF%BC%89"><span class="toc-text">1.3 Appium源代码（待补充）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-text">2. 常用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E5%B8%B8%E7%94%A8adb%E5%91%BD%E4%BB%A4"><span class="toc-text">2.1 常用adb命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-1-%E8%8E%B7%E5%8F%96app%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="toc-text">2.1.1 获取app的信息</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-appium%E5%B8%B8%E7%94%A8%E8%AE%BE%E7%BD%AE"><span class="toc-text">2.2 appium常用设置</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3"><span class="toc-text">3.</span></a></li></ol>

<h1 id="1-Appium是什么"><a href="#1-Appium是什么" class="headerlink" title="1. Appium是什么"></a>1. Appium是什么</h1><p>Appium 是移动端的自动化测试框架，可用于测试</p>
<ul>
<li><strong>原生应用</strong>：能安装，即从应用程序市场中下载的app</li>
<li><strong>移动网页应用</strong>：浏览器访问的应用，iOS上的Safari和Android上的 Chrome</li>
<li><strong>混合应用</strong>：原生应用中嵌入web网页</li>
</ul>
<p>可以用在iOS和Android操作系统上，多语言，多平台（iOS、Android，Windows、Mac）。</p>
<h2 id="1-1-Appium原理"><a href="#1-1-Appium原理" class="headerlink" title="1.1 Appium原理"></a>1.1 Appium原理</h2><p><a target="_blank" rel="noopener" href="https://appium.io/docs/en/about-appium/appium-clients/">The Appium Clients - Appium</a></p>
<p>Appium使用Client/Server设计模式，Client发送HTTP请求给Server其中用任何语言来实现都可以。<strong>采用了C/S设计模式就是Appium和Selenium（WebDriver）支持多语言的原因。</strong></p>
<p>Appium类库封装了selenium类库并在其基础上增加了一些扩展，以实现selenium无法完成的功能，例如：手机端操作、旋转屏幕、手机硬件、手势操作等。</p>
<p>Appium的底层通过HTTP协议进行交互，**在W3C协议<a target="_blank" rel="noopener" href="https://w3c.github.io/webdriver/webdriver-spec.html">WebDriver (w3c.github.io)</a>的基础上进行了扩展[ <a target="_blank" rel="noopener" href="https://github.com/SeleniumHQ/mobile-spec/blob/master/spec-draft.md">Mobile JSON Wire Protocol</a>**。</p>
<p>webdriver基于http协议，第一链接会建立一个session会话，并且通过post发送一个json告知服务端相关测试信息。</p>
<p>按照W3C的协议及appium扩展的协议可以封装成自己的测试框架，通过一系列的api完成各种客户端的操作。</p>
<h2 id="1-2-Appium环境"><a href="#1-2-Appium环境" class="headerlink" title="1.2 Appium环境"></a>1.2 Appium环境</h2><p>Java 1.8、Android sdk、Node js（≥10）、npm（≥6）、python3、appium-desktop、Appium-Python-Client</p>
<h2 id="1-3-Appium源代码（待补充）"><a href="#1-3-Appium源代码（待补充）" class="headerlink" title="1.3 Appium源代码（待补充）"></a>1.3 Appium源代码（待补充）</h2><p><a target="_blank" rel="noopener" href="https://appium.io/docs/en/contributing-to-appium/appium-packages/#appium-in-a-nutshell">Appium Package Structure - Appium</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/appium">Appium (github.com)</a></p>
<p><strong>appium server</strong>: Node.js系列包、adb shell、ChromeDriver</p>
<p><strong>底层引擎</strong>： Uiautomator java（Android）、WDA（IOS）、selenium</p>
<p><strong>appium client</strong>: Python、java</p>
<p>android直接依赖于uiautomator2-driver，uiautomator2-driver间接依赖uiautomator2-server，uiautomator2-server是核心。</p>
<p>脚本中的所有请求先经过appium server（Node.js写的），多数逻辑直接转化给了android的Uiautomator2 Server（Java写的），收到请求后底层调用Uiautomator2来完成对应控件的识别、定位，以及操作。</p>
<h1 id="2-常用命令"><a href="#2-常用命令" class="headerlink" title="2. 常用命令"></a>2. 常用命令</h1><h2 id="2-1-常用adb命令"><a href="#2-1-常用adb命令" class="headerlink" title="2.1 常用adb命令"></a>2.1 常用adb命令</h2><p>查看当前设备：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb devices</span><br></pre></td></tr></table></figure>



<h3 id="2-1-1-获取app的信息"><a href="#2-1-1-获取app的信息" class="headerlink" title="2.1.1 获取app的信息"></a>2.1.1 获取app的信息</h3><ul>
<li>app信息：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 获取当前界面元素</span><br><span class="line">adb shell dumpsys activity top</span><br><span class="line"></span><br><span class="line"># 获取任务列表(待补充)</span><br><span class="line">adb shell dumpsys actity activities</span><br></pre></td></tr></table></figure>

<ul>
<li>app入口（获取包名，activity名）：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">adb logcat |grep -i displayed  			# Linux</span><br><span class="line">adb shell &quot;logcat |grep -i displayed&quot;   # Win</span><br><span class="line">adb logcat |findstr -i displayed		# Win</span><br></pre></td></tr></table></figure>

<ul>
<li>启动应用</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am start -W -n 包名/activity名 -S</span><br></pre></td></tr></table></figure>



<h2 id="2-2-appium常用设置"><a href="#2-2-appium常用设置" class="headerlink" title="2.2 appium常用设置"></a>2.2 appium常用设置</h2><p>中文版：<a target="_blank" rel="noopener" href="https://github.com/appium/appium/blob/master/docs/cn/writing-running-appium/caps.md">https://github.com/appium/appium/blob/master/docs/cn/writing-running-appium/caps.md</a></p>
<p>英文版：<a target="_blank" rel="noopener" href="https://github.com/appium/appium/blob/master/docs/en/writing-running-appium/caps.md">https://github.com/appium/appium/blob/master/docs/en/writing-running-appium/caps.md</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app apk地址</span><br><span class="line">appPackage # 包名</span><br><span class="line">appActivity # Activity名</span><br></pre></td></tr></table></figure>



<p><code>“noReset” : True</code>：在当前 session 下不会重置应用的状态。默认值为 false。</p>
<p>适用情景：弹框、登录等</p>
<p><code>fullReset</code>：Stop app, clear app data and uninstall apk before session starts and after test</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;skipDeviceInitialization&quot;   true or false</span><br></pre></td></tr></table></figure>

<p>跳过安装、权限设置等操作，提升性能，加快速度</p>
<p><code>“udid”</code>  多设备测试时启用</p>
<p><code>&quot;dontStopAppOnReset&quot;</code>：首次启动的时候</p>
<p><code>&quot;unicodeKeyboard&quot;   &quot;resetKeyboard&quot;</code>是否输入非英文之外的语言并在测试完成后重置输入法</p>
<h1 id="3"><a href="#3" class="headerlink" title="3."></a>3.</h1>
            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">标签</span><br/>
                
    <a class="tag tag--primary tag--small t-none-link" href="/tags/%E5%88%9B%E4%BD%9C%E4%B8%AD/" rel="tag">创作中</a>

            </div>
        
        
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2022 Abilish. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/avatar.png" alt="作者的图片"/>
        
            <h4 id="about-card-name">Abilish</h4>
        
            <div id="about-card-bio"><p>Less is More.</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p><a href="mailto:&#x73;&#102;&#x79;&#x5f;&#x6d;&#120;&#64;&#x31;&#x36;&#51;&#46;&#99;&#x6f;&#109;">&#x73;&#102;&#x79;&#x5f;&#x6d;&#120;&#64;&#x31;&#x36;&#51;&#46;&#99;&#x6f;&#109;</a></p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                China, Heilongjiang
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/bg.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-u4gocod02ukvjjitb63sjkl6iu1qjp8lpnsrzttfhzhhifp6ao9kpwvy9cik.min.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
