
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Do">
    <title>Dockerå­¦ä¹ ç¬”è®° - Do</title>
    <meta name="author" content="Abilish">
    
    
        <link rel="icon" href="http://example.com/assets/images/avatar.png">
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Abilish","sameAs":["https://github.com/abilish","http://stackoverflow.com/users"],"image":"avatar.png"},"articleBody":"\n\n\n\n\n\nä¸€ã€Docker ç®€ä»‹æ ¹æ®ç™¾åº¦ç™¾ç§‘çš„ä»‹ç»ï¼š\n\nDocker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­,ç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„Linuxæˆ–Windowsæ“ä½œç³»ç»Ÿçš„æœºå™¨ä¸Š,ä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–,å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶,ç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ã€‚\n\nDockeré‡‡ç”¨çš„æ˜¯Goè¯­è¨€ç¼–å†™çš„ï¼Œè¯¥è¯­è¨€ä¸€ç§é™æ€å¼ºç±»å‹ã€ç¼–è¯‘å‹ã€å¹¶å‘å‹ï¼Œå¹¶å…·æœ‰åƒåœ¾å›æ”¶åŠŸèƒ½çš„ç¼–ç¨‹è¯­è¨€ï¼Œå¸¸ç”¨äºWebç¨‹åºå¼€å‘ï¼Œå¹¶ä¸”å…·æœ‰æˆç†Ÿçš„Webå¼€å‘æ¡†æ¶ï¼Œå¦‚Beegoã€Ginã€Irisç­‰ç­‰ã€‚\nGoè¯­è¨€æè¿°\nGoçš„è¯­æ³•æ¥è¿‘Cè¯­è¨€ï¼Œä½†å¯¹äºå˜é‡çš„å£°æ˜æœ‰æ‰€ä¸åŒã€‚Goæ”¯æŒåƒåœ¾å›æ”¶åŠŸèƒ½ã€‚\näºŒã€Docker æ¦‚è¿°å’Œå¸¸ç”¨å‘½ä»¤1. Docker æ•´ä½“ç†è§£\ndockerè§£å†³é—®é¢˜ï¼šé¡¹ç›®å¸¦ä¸Šç¯å¢ƒå®‰è£…æ‰“åŒ…ï¼Œå¯ä»¥è·¨å¹³å°ï¼ˆwindowsâ€“&gt;Linuxï¼‰\nDockerå’ŒVMå¯¹æ¯”ï¼š\nVmwareï¼Œè™šæ‹Ÿç”µè„‘ï¼Œå¾ˆç¬¨é‡ï¼Œå±äºè™šæ‹ŸåŒ–æŠ€æœ¯\nâ€‹    dockerså®¹å™¨æŠ€æœ¯ä¹Ÿæ˜¯ä¸€ç§è™šæ‹ŸåŒ–æŠ€æœ¯\ndockerï¼šéš”ç¦»ï¼Œé•œåƒï¼ˆæœ€æ ¸å¿ƒçš„ç¯å¢ƒï¼‰ååˆ†å°å·§\n\nä¼ ç»Ÿè™šæ‹Ÿæœºï¼Œè™šæ‹Ÿå‡ºä¸€å¥—ç¡¬ä»¶ï¼Œè¿è¡Œä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œç„¶ååœ¨è¿™ä¸ªæ“ä½œç³»ç»Ÿä¸Šå®‰è£…å’Œè¿è¡Œè½¯ä»¶\nå®¹å™¨å†…çš„åº”ç”¨ç›´æ¥è¿è¡Œåœ¨å®¿ä¸»æœºçš„å†…æ ¸ä¸Šï¼Œå®¹å™¨æ²¡æœ‰è‡ªå·±çš„å†…æ ¸ï¼Œä¹Ÿæ²¡æœ‰è™šæ‹Ÿç¡¬ä»¶ï¼Œå› æ­¤æ›´ä¸ºè½»ä¾¿ã€‚æ¯ä¸ªå®¹å™¨ä¹‹é—´æ˜¯äº’ç›¸éš”ç¦»çš„ï¼Œæ¯ä¸ªå®¹å™¨å†…éƒ½æœ‰ä¸€ä¸ªå±äºè‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿï¼Œä¸”äº’ä¸å½±å“\n\nDockeræœ‰ç€æ¯”è™šæ‹Ÿæœºæ›´å°‘çš„æŠ½è±¡å±‚ã€‚\n\nDockeråˆ©ç”¨çš„æ˜¯å®¿ä¸»æœºçš„å†…æ ¸ï¼ŒVMç”¨çš„æ˜¯Guest OSï¼Œå› æ­¤ï¼Œæ–°å»ºå®¹å™¨æ—¶ï¼Œdockerä¸éœ€è¦åƒè™šæ‹Ÿæœºä¸€æ ·é‡æ–°åŠ è½½ä¸€ä¸ªæ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œé¿å…å¼•å¯¼ã€‚VMæ˜¯åˆ†é’Ÿçº§çš„ï¼Œdockeræ˜¯ç§’çº§çš„\n\nå­¦ä¹ è·¯å¾„ï¼šå…ˆå­¦ä¼šä¼ ç»Ÿè™šæ‹Ÿæœºä¸Šå¦‚ä½•éƒ¨ç½²ç¯å¢ƒï¼Œå†å­¦ä¹ Docker\næ¦‚è¿°ï¼šåŸºäºGoè¯­è¨€å¼€å‘ï¼Œå¼€æº\n\né•œåƒ(Image)ï¼šé•œåƒæ˜¯ä¸€ä¸ªåŸå§‹æ¨¡æ¿ï¼Œé€šè¿‡æ¨¡æ¿æ¥åˆ›å»ºå®¹å™¨\nå®¹å™¨(container)ï¼šå®¹å™¨æ˜¯æ¥æä¾›æœåŠ¡çš„ã€‚å¯åŠ¨ï¼Œåœæ­¢ï¼Œåˆ é™¤ç­‰ç­‰\nä»“åº“(repository)ï¼šä»“åº“æ˜¯ç”¨æ¥å­˜æ”¾é•œåƒçš„åœ°æ–¹ï¼Œç±»ä¼¼ä¸githubã€giteeç­‰ç­‰ï¼Œåˆ†ä¸ºå…±æœ‰ç§æœ‰ã€‚docker hub åœ¨å›½å¤–ï¼Œéœ€è¦é…ç½®å›½å†…çš„é•œåƒåŠ é€Ÿã€‚\n**å®‰è£…åŸºæœ¬æ­¥éª¤(cnetos8)**ï¼š\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657581. å¸è½½æ—§ç‰ˆæœ¬sudo yum remove docker \\                  docker-client \\                  docker-client-latest \\                  docker-common \\                  docker-latest \\                  docker-latest-logrotate \\                  docker-logrotate \\                  docker-engine2. å®‰è£…ç›¸å…³ä¾èµ–sudo yum install -y yum-utils3. è®¾ç½®å›½å†…yumé•œåƒæºå›½å¤–æºï¼šsudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repoé˜¿é‡Œäº‘å›½å†…æºå®‰è£…dockerï¼šsudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo4. æ›´æ–°yumè½¯ä»¶åŒ…ç´¢å¼•centos8 æ— fastå‚æ•°ï¼šyum makecacheyum makecache fast5. å®‰è£…dockeræœ€æ–°ç‰ˆçš„å®‰è£…æ–¹å¼(2023/2/18)ï¼šdocker-ceç¤¾åŒºç‰ˆï¼›docker-eeä¼ä¸šç‰ˆsudo yum install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-pluginä¸€è·¯æŒ‰ y6. å¯åŠ¨dockersudo systemctl start docker7. éªŒè¯å®‰è£…æˆåŠŸdocker version8. é€šè¿‡å¯åŠ¨é•œåƒéªŒè¯å®‰è£…æˆåŠŸsudo docker run hello-world9. æŸ¥çœ‹é•œåƒæ˜¯å¦å·²ç»è¢«ä¸‹è½½docker images10. å¸è½½dockera. å¸è½½ä¾èµ–sudo yum remove docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin docker-ce-rootless-extrasb. åˆ é™¤èµ„æºsudo rm -rf /var/lib/dockersudo rm -rf /var/lib/containerd11. è®¾ç½®é˜¿é‡Œäº‘dockeré•œåƒåŠ é€Ÿç™»å½•é˜¿é‡Œäº‘å®˜æ–¹ï¼Œæ‰¾åˆ°â€œå®¹å™¨é•œåƒæœåŠ¡â€--&gt; é•œåƒå·¥å…· --&gt; é•œåƒåŠ é€Ÿå™¨é€‰æ‹©æ‰€ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿï¼ŒæŒ‰ç…§æ­¥éª¤æ¥é…ç½®ï¼Œä¸‹é¢çš„å‘½ä»¤ä¾æ¬¡æ•²ï¼šsudo mkdir -p /etc/dockersudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;&#123;  &quot;registry-mirrors&quot;: [&quot;https://è‡ªå·±çš„ä»“åº“åœ°å€ï¼Œä½ çŒœ.mirror.aliyuncs.com&quot;]&#125;EOFsudo systemctl daemon-reloadsudo systemctl restart docker\n\nDockeræ˜¯ä¸€ä¸ªClient-Serverç»“æ„çš„ç³»ç»Ÿï¼ŒDockerçš„å®ˆæŠ¤è¿›ç¨‹è¿è¡Œåœ¨ä¸»æœºä¸Šé€šè¿‡Socketä»å®¢æˆ·ç«¯è®¿é—®ã€‚DockerServeræ¥æ”¶åˆ°Docker-Clientçš„æŒ‡ä»¤å°±ä¼šæ‰§è¡Œã€‚å®¹å™¨å†…çš„ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„ç«¯å£ã€‚\n\n2. è¾…åŠ©å‘½ä»¤åŠå­¦ä¹ ç½‘ç«™dockerå®˜ç½‘\ndocker hub  ä»“åº“åœ°å€\n123456# æŸ¥çœ‹æ“ä½œç³»ç»Ÿçš„å‘è¡Œç‰ˆå·uname -r  # æ˜¾ç¤ºç³»ç»Ÿåã€èŠ‚ç‚¹åç§°ã€æ“ä½œç³»ç»Ÿçš„å‘è¡Œç‰ˆå·ã€å†…æ ¸ç‰ˆæœ¬ç­‰ç­‰uname -a # æŸ¥çœ‹è™šæ‹Ÿæœºç³»ç»Ÿç‰ˆæœ¬ä¿¡æ¯cat /etc/os-release\n\nå¸®åŠ©å‘½ä»¤ï¼š\n123456# æ˜¾ç¤ºdockerçš„ç‰ˆæœ¬ä¿¡æ¯docker version# æ˜¾ç¤ºdockerç³»ç»Ÿä¿¡æ¯ï¼ŒåŒ…æ‹¬é•œåƒå’Œå®¹å™¨çš„æ•°é‡docker info# å¸®åŠ©ä¸‡èƒ½å‘½ä»¤docker å‘½ä»¤ --help  \n\ndockerå‘½ä»¤å¸®åŠ©æ–‡æ¡£åœ°å€ï¼šhttps://docs.docker.com/reference/\nèœé¸Ÿæ•™ç¨‹ä¸­æ–‡åœ°å€ï¼šDocker å‘½ä»¤å¤§å…¨ | èœé¸Ÿæ•™ç¨‹ (runoob.com)\n3. é•œåƒå‘½ä»¤docker images æŸ¥çœ‹é•œåƒ\n1234docker images# å¸¸ç”¨å‚æ•°-a, --all             Show all images (default hides intermediate images)-q, --quiet           Only show image IDs\n\na. é€šè¿‡å®˜æ–¹æ–‡æ¡£æ¥å­¦ä¹ å‘½ä»¤ï¼šhttps://docs.docker.com/engine/reference/commandline/images/\nb. é€šè¿‡helpæ¥å­¦ä¹ docker images --help\n1234# ç›¸å½“äºåœ¨docker hubä¸Šæœç´¢docker search mysql # è¿‡æ»¤å‡ºæ”¶è—é‡å¤§äº3000çš„ï¼Œä¸”å±•ç¤ºè¯¦ç»†ä¿¡æ¯docker search mysql --filter=STARS=3000 --no-trunc\n\n\n\n12# åˆ—å‡ºimageså®Œæ•´iddocker images --no-trunc\n\n\n\ndocker pull ä¸‹è½½é•œåƒ\n1docker pull é•œåƒå:tag\n\nä¸å†™tagé»˜è®¤ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼Œdocker images åˆ†å±‚ä¸‹è½½ï¼Œæ˜¯imageçš„æ ¸å¿ƒï¼Œè”åˆæ–‡ä»¶ç³»ç»Ÿã€‚\npullä¸­çš„designæ˜¯ç­¾åï¼Œæœ€åä¸€è¡Œä¸ºçœŸå®åœ°å€\n123# pull mysqlç­‰ä»·äºä»çœŸå®åœ°å€å»æ‹‰å–docker pull mysqldocker pull docker.io/library/mysql:latest\n\n\n\ndocker rmi åˆ é™¤é•œåƒ\n1234docker rmi -f é•œåƒiddocker rmi repository:tag# åˆ é™¤æ‰€æœ‰é•œåƒdocker rmi -f $(docker images -aq)\n\n\n\n\n\n4. å®¹å™¨å‘½ä»¤å‰æï¼Œå…ˆpullä¸€ä¸ªé•œåƒ\n1docker pull centos\n\n\n\ndocker run å¯åŠ¨å®¹å™¨\ndocker run | Docker Documentation\n12345678910111213docker run [OPTIONS] IMAGE [COMMAND] [ARG...]# å¦‚æœæ²¡æœ‰ä¸‹è½½å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨ä¸‹è½½ï¼Œé»˜è®¤ä¸‹è½½æœ€æ–°ç‰ˆæœ¬# å¸¸ç”¨å‚æ•°--name ç»™å®¹å™¨å‘½å-d     åå°æ–¹å¼å¯åŠ¨(åå°è¿è¡Œæ—¶å¦‚æœæ²¡æœ‰å‰å°è¿›ç¨‹ï¼Œdockerå‘ç°æ²¡æœ‰åº”ç”¨å°±ä¼šè‡ªåŠ¨åœæ­¢)-i     äº¤äº’å¼æ“ä½œ-t     ç»ˆç«¯-p     æŒ‡å®šå®¹å™¨çš„ç«¯å£ï¼Œå°†å®¹å™¨ç«¯å£æ˜ å°„åˆ°ä¸»æœº  -p 8080ï¼š8080\t-p ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£   ï¼ˆæœ€å¸¸ç”¨çš„ä¸€ç§æ–¹å¼ï¼‰\t-p å®¹å™¨ç«¯å£\tå®¹å™¨ç«¯å£\tip ip:ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£-P     å¤§å†™çš„Pæ˜¯éšæœºæŒ‡å®šç«¯å£\n\nå¯åŠ¨ä¸€ä¸ªå®¹å™¨: \n1docker run -it centos /bin/bash\n\néåå°å¯åŠ¨ï¼Œé€€å‡ºå‘½ä»¤ä¸ºï¼šexit\n123456# åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„å®¹å™¨docker ps# å¸¸ç”¨å‚æ•°-a    åˆ—å‡ºæ‰€æœ‰ï¼ŒåŒ…æ‹¬å†å²æ›¾è¿è¡Œè¿‡çš„å®¹å™¨-n=1  åªæ˜¾ç¤ºæœ€è¿‘çš„ä¸€ä¸ª-q    åªæ˜¾ç¤ºå®¹å™¨çš„ç¼–å·\n\né€€å‡ºå®¹å™¨\n1234# ç›´æ¥åœæ­¢å¹¶é€€å‡ºexit# å®¹å™¨ä¸åœæ­¢é€€å‡ºCtrl + P + Q\n\nåˆ é™¤å®¹å™¨\n123456# åˆ é™¤æŒ‡å®šå®¹å™¨docker rm å®¹å™¨id# åˆ é™¤æ‰€æœ‰çš„å®¹å™¨docker rm -f $(docker ps -aq)# é€šè¿‡ç®¡é“ç¬¦è¿‡æ»¤åˆ é™¤docker ps -a -q|xargs docker rm\n\nå¯åŠ¨å®¹å™¨\n 12345678# å¯åŠ¨å®¹å™¨docker start å®¹å™¨id# é‡å¯å®¹å™¨docker restart å®¹å™¨id# åœæ­¢å½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨docker stop å®¹å™¨id# å¼ºåˆ¶åœæ­¢å½“å‰å®¹å™¨docker kill å®¹å™¨id\n\n\n\n5 å¸¸ç”¨å‘½ä»¤æ±‡æ€»æŸ¥çœ‹æ—¥å¿—ï¼š\ndocker logs | Docker Documentation\n12345docker logs å®¹å™¨id# å¸¸ç”¨å‚æ•°-f : è·Ÿè¸ªæ—¥å¿—è¾“å‡ºï¼ŒæŒç»­è¾“å‡ºæ—¥å¿—å†…å®¹-t : æ˜¾ç¤ºæ—¶é—´æˆ³--tail/-n :ä»…åˆ—å‡ºæœ€æ–°Næ¡å®¹å™¨æ—¥å¿—  -n 15\n\n\n\n123456# shell è„šæœ¬&quot;while true;do echo docker;sleep 1;done&quot;# é‡æ–°å¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼Œè¿è¡Œshellè„šæœ¬ï¼Œä½¿å…¶ä¸æ–­æ‰“å°ï¼Œäº§ç”Ÿæ—¥å¿—docker run -d centos /bin/sh -c &quot;while true;do echo docker;sleep 1;done&quot;# æŸ¥çœ‹å®¹å™¨æ—¥å¿—docker logs -t -f -n 10 71f8b56ac14e\n\n\n\næŸ¥çœ‹å®¹å™¨ä¸­çš„è¿›ç¨‹ä¿¡æ¯\n12345docker top å®¹å™¨id# æ˜¾ç¤ºUID  ç”¨æˆ·IDPID  çˆ¶IDPPID è¿›ç¨‹ID\n\n\n\næŸ¥çœ‹é•œåƒçš„å…ƒæ•°æ®\n1docker inspect å®¹å™¨id\n\n\n\nè¿›å…¥å½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨\n12345# è¿›å…¥å®¹å™¨åå¼€å¯æ–°ç»ˆç«¯ï¼ˆå¸¸ç”¨ï¼‰docker exec -it å®¹å™¨id/name bashShell# ä¾‹ï¼šdocker exec -it 71f8b56ac14e /bin/bash\n\n\n\n123# è¿›å…¥å®¹å™¨æ­£åœ¨æ‰§è¡Œçš„ç»ˆç«¯ï¼Œä¸ä¼šå¯åŠ¨æ–°çš„è¿›ç¨‹docker attach å®¹å™¨id# Attach local standard input, output, and error streams to a running container\n\n\n\nä»å®¹å™¨å†…æ‹·è´æ–‡ä»¶åˆ°ä¸»æœº\n123docker cp å®¹å™¨id:å®¹å™¨å†…è·¯å¾„ ç›®çš„çš„ä¸»æœºè·¯å¾„docker cp 9d140e95797a:/home/a.txt /home\n\n\n\nå®˜æ–¹å›¾ï¼š\n\n6 Docker é•œåƒç†è§£é•œåƒæ˜¯ç‹¬ç«‹çš„è½¯ä»¶åŒ…\nDockeré•œåƒåŠ è½½åŸç†ä¸º**UnionFS (è”åˆæ–‡ä»¶ç³»ç»Ÿ)**ï¼Œé•œåƒå¯ä»¥é€šè¿‡åˆ†å±‚æ¥è¿›è¡Œç»§æ‰¿ï¼ŒåŸºäºåŸºç¡€é•œåƒï¼Œåˆ¶ä½œå¤åˆ¶å…·ä½“çš„åº”ç”¨é•œåƒã€‚\ndockerçš„é•œåƒå®é™…ä¸Šæœ‰ä¸€å±‚ä¸€å±‚çš„æ–‡ä»¶ç³»ç»Ÿç»„æˆï¼Œè¿™ç§å±‚çº§çš„æ–‡ä»¶ç³»ç»Ÿå°±æ˜¯UnionFSã€‚\nbootfs(boot file system) linuxåˆšå¯åŠ¨æ—¶ä¼šåŠ è½½bootfsæ–‡ä»¶ç³»ç»Ÿï¼ŒDckerä¹Ÿæ˜¯ä¸€æ ·çš„ï¼ŒåŠ è½½å®Œæˆåæ•´ä¸ªå†…æ ¸å°±åœ¨å†…å­˜ä¸­äº†ï¼Œæ­¤æ—¶å†…å­˜çš„ä½¿ç”¨æƒå·²ç”±bootfsè½¬äº¤ç»™å†…æ ¸ï¼Œæ­¤æ—¶ç³»ç»Ÿä¹Ÿä¼šå¸è½½bootfs\nrootfs(root file system) ï¼Œåœ¨bootfsä¹‹ä¸Šã€‚åŒ…å«çš„å°±æ˜¯å…¸å‹Linuxç³»ç»Ÿä¸­çš„ /dev, /proc, /bin, /etc ç­‰æ ‡å‡†ç›®å½•å’Œæ–‡ä»¶ï¼Œrootfså°±æ˜¯å„ç§ä¸åŒçš„æ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆï¼Œæ¯”å¦‚Ubuntuï¼ŒCentosç­‰ç­‰\nä¸ºä»€ä¹ˆDockerä¸­çš„centoså¾ˆå°ï¼Ÿ\nå› ä¸ºrootfsä¸­åªåŒ…å«äº†æœ€åŸºæœ¬çš„å‘½ä»¤ã€å·¥å…·å’Œç¨‹åºåº“ï¼Œç›´æ¥ç”¨çš„æ˜¯ä¸»æœºçš„kernelï¼Œè‡ªå·±åªéœ€è¦æä¾›rootfså°±å¯ä»¥äº†ã€‚ç”±æ­¤å¯è§å¯¹äºä¸åŒçš„linuxå‘è¡Œç‰ˆï¼ŒbootfsåŸºæœ¬æ˜¯ä¸€è‡´çš„ï¼Œrootfsä¼šæœ‰å·®åˆ«ï¼Œå› æ­¤ä¸åŒçš„å‘è¡Œç‰ˆå¯ä»¥å…¬ç”¨bootfsã€‚\nåˆ†å±‚\nåˆ†å±‚è¿›è¡Œå¤ç”¨ã€‚\nDockerçš„é•œåƒéƒ½æ˜¯åªè¯»çš„ï¼Œå½“å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¸€ä¸ªæ–°çš„å¯å†™å±‚è¢«åŠ è½½åˆ°é•œåƒçš„é¡¶éƒ¨ã€‚è¿™ä¸€å±‚å°±æ˜¯æˆ‘ä»¬è¯´çš„å®¹å™¨å±‚ï¼Œå®¹å™¨ä¹‹ä¸‹åªè¯»ï¼Œæ— æ³•æ”¹å˜çš„éƒ¨åˆ†éƒ½å«åšé•œåƒå±‚ã€‚\n7 commité•œåƒ123docker commit æäº¤å®¹å™¨æˆä¸ºä¸€ä¸ªæ–°çš„å‰¯æœ¬docker commit -m=&quot;æäº¤çš„æè¿°ä¿¡æ¯&quot; -a=&quot;ä½œè€…&quot; å®¹å™¨id ç›®æ ‡é•œåƒå:[TAG]\n\n123456é¡¹ç›®ç»ƒä¹ 2 æ‹·è´tomcatåŸºæœ¬é•œåƒdocker commit -a=&quot;Abilish&quot; -m=&quot;add webapps app&quot; 236dffd55cf1 tomcat02:1.0# æŸ¥çœ‹è‡ªå·±æäº¤çš„é•œåƒdocker images \n\n\n\n\n\n\n\nä¸‰ã€Docker è¿›é˜¶0 å¯è§†åŒ–ç®¡ç†dockerportainer\n1docker run -d -p 8088:9000 --restart=always -v /var/run/docker.sock:/var/run/docker.sock --privileged=true portainer/portainer\n\nè®¾ç½®ç™»å½•å¯†ç ï¼Œé€‰æ‹©æœ¬åœ°(local)\nRancher(CI/CD)\n1å¾…è¡¥å……\n\n\n\n\n\næŒ‚è½½åˆ†ä¸ºä½¿ç”¨å‘½ä»¤æŒ‚è½½ï¼Œä»¥åŠç”¨DockerFileæŒ‚è½½ä¸¤ç§æ–¹å¼ã€‚\n1. å®¹å™¨æ•°æ®å·äº§ç”ŸåŸå› ï¼šæ•°æ®å’Œå®¹å™¨åˆ†ç¦»ï¼Œæ•°æ®å•ç‹¬ç‹¬ç«‹ï¼ŒæŒä¹…åŒ–ä¿å­˜ã€‚\nMySQLæ•°æ®å¯ä»¥å­˜å‚¨åœ¨æœ¬åœ°ã€‚å®¹å™¨ä¹‹é—´å¯ä»¥æœ‰ä¸€ä¸ªæ•°æ®å…±äº«çš„æŠ€æœ¯ã€‚Docker å®¹å™¨ä¸­äº§ç”Ÿçš„æ•°æ®å‰‹åŒæ­¥åˆ°æœ¬åœ°ï¼Œå› æ­¤äº§ç”Ÿäº†ç›®å½•æŒ‚è½½ã€‚ç›®å½•æŒ‚è½½å°±æ˜¯å®¹å™¨å†…å’Œå®¹å™¨å¤–è¿æ¥çš„ç›®å½•æ˜¯åŒæ­¥æ›´æ–°çš„ã€‚\næ–¹å¼ä¸€ï¼šä½¿ç”¨å‘½ä»¤æŒ‚è½½\n1234567891011121314151617docker run -it -v ä¸»æœºç›®å½•:å®¹å™¨ç›®å½•docker run -it -v /home/test:/home centos /bin/bash# å¯ä»¥æŸ¥çœ‹åˆ°å®¹å™¨çš„æŒ‚è½½ä¿¡æ¯docker inspect å®¹å™¨id......        &quot;Mounts&quot;: [            &#123;                &quot;Type&quot;: &quot;bind&quot;,                &quot;Source&quot;: &quot;/home/test&quot;,                &quot;Destination&quot;: &quot;/home&quot;,                &quot;Mode&quot;: &quot;&quot;,                &quot;RW&quot;: true,                &quot;Propagation&quot;: &quot;rprivate&quot;            &#125;......# å®¹å™¨åˆ é™¤ï¼Œæœ¬æœºä¸ŠæŒ‚è½½çš„æ•°æ®ä¾æ—§å­˜åœ¨\n\n\n\nå…·åæŒ‚è½½å’ŒåŒ¿åæŒ‚è½½\n12345678910111213141516171819202122232425# åŒ¿åæŒ‚è½½ï¼šåªå†™å®¹å™¨å†…åå­—ä¸å†™å®¹å™¨å¤–åå­—-v å®¹å™¨å†…è·¯å¾„docker run -d -P --name nginx01 -v /etc/nginx nginx# æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰çš„å·çš„æƒ…å†µï¼Œæ˜¾ç¤ºçš„æ˜¯æ²¡æœ‰åå­—çš„è¿™å°±æ˜¯åŒ¿åæŒ‚è½½docker volume ls# å…·åæŒ‚è½½docker run -d -P --name nginx02 -v juming-nginx:/etc/nginx nginxdocker volume ls# å¯ä»¥çœ‹åˆ°æŒ‚è½½çš„åå­—ä¸º juming-nginx# æŸ¥çœ‹è¿™ä¸ªå·çš„ä½ç½®docker volume inspect juming-nginx    &#123;        &quot;CreatedAt&quot;: &quot;2023-02-22T22:48:38+08:00&quot;,        &quot;Driver&quot;: &quot;local&quot;,        &quot;Labels&quot;: null,        &quot;Mountpoint&quot;: &quot;/var/lib/docker/volumes/juming-nginx/_data&quot;,  # æ­¤å‚æ•°ä¸ºæŒ‚è½½çš„ç›®å½•ä½ç½®        &quot;Name&quot;: &quot;juming-nginx&quot;,        &quot;Options&quot;: null,        &quot;Scope&quot;: &quot;local&quot;    &#125;    # åœ¨æ²¡æœ‰æŒ‡å®šç›®å½•çš„æƒ…å†µä¸‹ï¼ŒåŸºæœ¬æ‰€æœ‰çš„å·éƒ½åœ¨è¿™ä¸ªä½ç½® /var/lib/docker/volumes/å·å/_data\n\ndocker volume â€“help\næ€»ç»“ï¼šæŒ‚è½½çš„æ–¹å¼æ€»å…±åˆ†ä¸ºä¸‰ç§ï¼ŒæŒ‡å®šè·¯å¾„æŒ‚è½½ã€åŒ¿åæŒ‚è½½ã€å…·åæŒ‚è½½\nå…¶ä»–ï¼š\n12345678# æŒ‚è½½ç›®å½•åé¢åŠ ä¸Š ro æˆ–è€… rw# ro è¡¨ç¤º read only åªè¯»# rw è¡¨ç¤º read write å¯è¯»å¯å†™# é»˜è®¤ä¸º rw# è®¾ç½®çš„å®¹å™¨æƒé™ã€‚å¦‚æœæ˜¯ ro ï¼Œé‚£ä¹ˆåœ¨å®¹å™¨å†…éƒ¨æ˜¯åªè¯»çš„ï¼Œæ— æ³•æ”¹å˜ï¼Œåªèƒ½é€šè¿‡å®¿ä¸»æœºæ”¹å˜docker run -d -P --name nginx02 -v juming-nginx:/etc/nginx:ro nginxdocker run -d -P --name nginx02 -v juming-nginx:/etc/nginx:rw nginx\n\n\n\n\n\n2. DockerFile æ„å»ºé•œåƒæŒ‚è½½æ–¹å¼äºŒï¼š\nDockerfile å°±æ˜¯ç”¨æ¥æ„å»º docker é•œåƒçš„æ„å»ºæ–‡ä»¶ï¼Œæ˜¯å‘½ä»¤è„šæœ¬ï¼Œé€šè¿‡è¿™ä¸ªè„šæœ¬å¯ä»¥ç”Ÿæˆé•œåƒï¼Œé•œåƒæ˜¯ä¸€å±‚ä¸€å±‚çš„ï¼Œè„šæœ¬æ˜¯ä¸€ä¸ªä¸€ä¸ªå‘½ä»¤ï¼Œæ¯ä¸ªå‘½ä»¤éƒ½æ˜¯ä¸€å±‚ã€‚\n123456789101112131415161718192021222324252627# 1 æ–°å»ºä¸€ä¸ªdockerfile01æ–‡ä»¶ï¼Œç¼–è¾‘ï¼Œå†™å…¥å¦‚ä¸‹çš„å‘½ä»¤ï¼šFROM centosVOLUME [&quot;volume01&quot;,&quot;volume02&quot;]CMD echo &quot;----end----&quot;CMD /bin/bash# æ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œæˆ–è€…æŒ‡ä»¤éƒ½æ˜¯å¤§å†™çš„# 2 docker build å‘½ä»¤æ„å»ºé•œåƒdocker build -f dockerfile01 -t abilish/centos:1.0 .# å¸¸ç”¨å‚æ•°-f   fileæ–‡ä»¶å-t   ç”Ÿæˆçš„é•œåƒåŠæ ‡ç­¾å Name and optionally a tag in the name:tag format# 3 æ‰§è¡Œåå¯ä»¥çœ‹åˆ°æˆåŠŸç”Ÿæˆçš„é•œåƒdocker images# 4 å¯åŠ¨é•œåƒdocker run -it afa669b6bce7 /bin/bashls# å¯ä»¥çœ‹åˆ°å…¶ä¸­çš„ä¸¤ä¸ªç›®å½•ï¼švolume01ã€volume02ï¼Œè¿™ä¸¤ä¸ªç›®å½•å°±æ˜¯åˆšåˆšæŒ‚è½½çš„ç›®å½•docker inspect å®¹å™¨id# å¯ä»¥æŸ¥åˆ°ä¸»æœºä¸­æŒ‚è½½çš„ä½ç½®\n\nå¦‚æœåœ¨æ„å»ºé•œåƒæ—¶æ²¡æœ‰è®¾ç½®æŒ‚è½½ï¼Œé‚£ä¹ˆéœ€è¦åœ¨å¯åŠ¨é•œåƒæ—¶è®¾ç½® -v æŒ‚è½½å‚æ•°\næ•°æ®å·å®¹å™¨å¤šä¸ªå®¹å™¨ä¹‹é—´å®ç°æ•°æ®åŒæ­¥\nè¢«æŒ‚è½½çš„å«åšçˆ¶å®¹å™¨\n12345678910111213--volumes-from docker run -it --name docker01 abilish/centos:1.0# å¯åŠ¨ç¬¬äºŒä¸ªé•œåƒå¹¶è¿›è¡ŒæŒ‚è½½docker run -it --name docker02 --volumes-from docker01  abilish/centos:1.0# volume01ã€volume02 é•œåƒä¹‹é—´ä¼šåŒæ­¥æ›´æ–°docker run -it --name docker03 --volumes-from docker01  abilish/centos:1.0# åœæ­¢çˆ¶å®¹å™¨ï¼Œåœ¨å…¶ä»–å®¹å™¨ä¸­ï¼ˆdocker02ã€docker03ï¼‰æŒ‚è½½ç›®å½•ä¾æ—§åŒæ­¥ï¼Œ# å…¶ä»–çš„å®¹å™¨ä¸­ä¹‹å‰åˆ›å»ºçš„æ–‡ä»¶ä¸ä¼šæ¶ˆå¤±# åˆ é™¤çˆ¶å®¹å™¨ï¼Œdocker02ã€docker03 ä¹‹é—´æŒ‚è½½ç›®å½•çš„æ•°æ®ä¾æ—§æ—¶åŒæ­¥çš„docker rm -f docker01\n\n\n\né—®é¢˜(å¾…è§£å†³)ï¼šå¦‚æœä¸¤ä¸ªå®¹å™¨æœ‰ä¸åŒæ•°é‡çš„æŒ‚è½½ç›®å½•å‘¢ï¼Ÿå¦‚æœæŒ‚è½½ä¹‹å‰æ¯ä¸ªå®¹å™¨ä¸­æœ‰ä¸åŒçš„æ•°æ®ï¼Œèƒ½åˆå¹¶å—ï¼Ÿ\nåŒç†ï¼Œmysqlä¸­ä¹Ÿå°±å¯ä»¥å®ç°æ•°æ®åŒæ­¥äº†\nå®¹å™¨ä¹‹é—´é…ç½®ä¿¡æ¯çš„ä¼ é€’ï¼Œæ•°æ®å·å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸä¸€ç›´æŒç»­åˆ°æ²¡æœ‰å®¹å™¨ä½¿ç”¨ä¸ºæ­¢\nä½†æ˜¯ä¸€ä½†æŒä¹…åŒ–åˆ°äº†æœ¬åœ°ï¼Œå°±å¯ä»¥æŒä¹…åŒ–ä¿å­˜äº†\nDockerFileæ¦‚å¿µï¼šdockerfile æ˜¯ç”¨æ¥æ„å»ºdockeré•œåƒçš„æ–‡ä»¶ï¼Œå‘½ä»¤å‚æ•°è„šæœ¬\næ„å»ºæ­¥éª¤ï¼š\n1ã€ç¼–å†™ä¸€ä¸ª dockerfile æ–‡ä»¶\n2ã€docker build æ„å»ºæˆä¸ºä¸€ä¸ªé•œåƒ\n3ã€docker run è¿è¡Œé•œåƒ\n4ã€docker push å‘å¸ƒé•œåƒï¼ˆDockerHubæˆ–è€…é˜¿é‡Œäº‘é•œåƒåº“ï¼‰\ncentosä¸ºä¾‹ï¼š\nsig-cloud-instance-images/Dockerfile at b2d195220e1c5b181427c3172829c23ab9cd27eb Â· CentOS/sig-cloud-instance-images (github.com)\n123456789101112131415FROM scratchADD centos-7-x86_64-docker.tar.xz /LABEL \\    org.label-schema.schema-version=&quot;1.0&quot; \\    org.label-schema.name=&quot;CentOS Base Image&quot; \\    org.label-schema.vendor=&quot;CentOS&quot; \\    org.label-schema.license=&quot;GPLv2&quot; \\    org.label-schema.build-date=&quot;20201113&quot; \\    org.opencontainers.image.title=&quot;CentOS Base Image&quot; \\    org.opencontainers.image.vendor=&quot;CentOS&quot; \\    org.opencontainers.image.licenses=&quot;GPL-2.0-only&quot; \\    org.opencontainers.image.created=&quot;2020-11-13 00:00:00+00:00&quot;CMD [&quot;/bin/bash&quot;]\n\nå¤§å¤šæ•°å®˜æ–¹çš„é•œåƒéƒ½æ˜¯åŸºç¡€åŒ…ï¼Œç”¨æˆ·éœ€è¦è‡ªå®šä¹‰æ­å»ºé•œåƒ\nDockerFile æ„å»ºè¿‡ç¨‹åŠæŒ‡ä»¤åŸºç¡€çŸ¥è¯†ï¼š\n1ã€æ¯ä¸ªä¿ç•™å…³é”®å­—(æŒ‡ä»¤)éƒ½å¿…é¡»æ˜¯å¤§å†™å­—æ¯\n2ã€æ‰§è¡Œä»ä¸Šåˆ°ä¸‹é¡ºåºæ‰§è¡Œ\n3ã€# è¡¨ç¤ºæ³¨é‡Š\n4ã€æ¯ä¸€ä¸ªæŒ‡ä»¤éƒ½ä¼šåˆ›å»ºæäº¤ä¸€ä¸ªæ–°çš„é•œåƒå±‚\nDockerFile æ˜¯é¢å‘å¼€å‘çš„ï¼Œç”¨æ¥å‘å¸ƒé¡¹ç›®ï¼Œåšé•œåƒ\næŒ‡ä»¤\n123456789101112FROM        # åŸºç¡€é•œåƒMAINTAINER  # é•œåƒæ˜¯è°å†™çš„ï¼Œç»´æŠ¤è€…ä¿¡æ¯ï¼Œå§“å+é‚®ç®±RUN         # é•œåƒæ„å»ºçš„æ—¶å€™éœ€è¦è¿è¡Œçš„å‘½ä»¤ADD         # æ­¥éª¤ï¼Œtomcaté•œåƒï¼Œä¸Šä¼ å‹ç¼©åŒ…ï¼Œä¼šè‡ªåŠ¨è§£å‹WORKDIR     # é•œåƒçš„å·¥ä½œç›®å½•VOLUME      # æŒ‚è½½çš„ç›®å½•EXPOSE      # æŒ‡å®šç«¯å£ï¼Œè¿™é‡Œå†™äº†å°±ä¸ç”¨æŒ‡å®š -p äº†CMD         # æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œæ˜¯æ›¿æ¢å‘½ä»¤è¡Œä¸­çš„å‘½ä»¤ENTRYPOINT  # æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œæ˜¯åœ¨å‘½ä»¤è¡Œå‘½ä»¤åè¿½åŠ å‘½ä»¤ONBUILD     # å½“æ„å»ºä¸€ä¸ªè¢«ç»§æ‰¿ DockerFile è¿™ä¸ªæ—¶å€™å°±ä¼šè¿è¡Œ ONBUILD çš„æŒ‡ä»¤ï¼Œè§¦å‘æŒ‡ä»¤ã€‚COPY        # ç±»ä¼¼ ADD ï¼Œå°†æˆ‘ä»¬æ–‡ä»¶æ‹·è´åˆ°é•œåƒä¸­ENV         # æ„å»ºçš„æ—¶å€™è®¾ç½®ç¯å¢ƒå˜é‡\n\n\n\n\n\n12# æŸ¥çœ‹æ„å»ºå†å²docker history é•œåƒid\n\n\n\nCMD å’Œ ENTRYPOINT çš„åŒºåˆ«1234567891011121314151617181920212223242526272829CMD         # æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œæ˜¯æ›¿æ¢å‘½ä»¤è¡Œä¸­çš„å‘½ä»¤ENTRYPOINT  # æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œæ˜¯åœ¨å‘½ä»¤è¡Œå‘½ä»¤åè¿½åŠ å‘½ä»¤vim dockerfile-cmd-testFROM centosCMD [&quot;ls&quot;, &quot;-a&quot;]docker build -f dockerfile-cmd-test -t cmdtest .# run è¿™ä¸ªå®¹å™¨åä¼šè¾“å‡ºå½“å‰ç›®å½•ï¼Œè¿™æ˜¯å› ä¸ºDockerFileä¸­å¢åŠ äº†CMDå‘½ä»¤docker run cmdtest# å¦‚æœåœ¨runæ—¶å¢åŠ -lå‚æ•°ï¼Œ-lä¼šæ›¿æ¢ CMD [&quot;ls&quot;, &quot;-a&quot;] å‘½ä»¤ï¼Œ-lä¸æ˜¯å‘½ä»¤æ‰€ä»¥ä¼šæŠ¥é”™docker run cmdtest -l# æ­£ç¡®çš„æ–¹å¼ä¸ºï¼šdocker run cmdtest ls -alvim dockerfile-cmd-entrypointFROM centosENTRYPOINT [&quot;ls&quot;, &quot;-a&quot;]docker build -f dockerfile-cmd-entrypoint -t entorypoint-test .# å¯ä»¥æ‰§è¡ŒæˆåŠŸï¼Œå¹¶ä¸”è¾“å‡º ls -al çš„ç»“æœdocker run b40785390900 -l\n\n\n\n\n\n\n\nDockerFile ï¼šæ„å»ºæ–‡ä»¶ï¼Œå®šä¹‰äº†ä¸€åˆ‡çš„æ­¥éª¤ï¼Œæºä»£ç \nDockerImages ï¼šé€šè¿‡ DockerFile æ„å»ºç”Ÿæˆçš„é•œåƒï¼Œæœ€ç»ˆå‘å¸ƒå’Œè¿è¡Œçš„äº§å“\nDockerå®¹å™¨ ï¼šå®¹å™¨æ˜¯é•œåƒè¿è¡Œèµ·æ¥æä¾›æœåŠ¡çš„\n3.Docker ç½‘ç»œåŸç†Docker0123456# æŸ¥çœ‹ç½‘å¡ip addrç»“æœï¼šlo æœ¬æœºå›ç¯åœ°å€eth0 å†…ç½‘åœ°å€docker0 dockerç½‘å¡åœ°å€ï¼Œæ¡¥æ¥æ¨¡å¼ï¼Œä½¿ç”¨çš„æŠ€æœ¯æ˜¯ veth-pair æŠ€æœ¯\n\nDocker ä¸­çš„ç½‘ç»œè®¿é—®\n12345678910111213141516docker exec -it tomcat_net ip addr1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00    inet 127.0.0.1/8 scope host lo       valid_lft forever preferred_lft forever76: eth0@if77: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default     link/ether 02:42:ac:11:00:02 brd ff:ff:ff:ff:ff:ff link-netnsid 0    inet 172.17.0.2/16 brd 172.17.255.255 scope global eth0       valid_lft forever preferred_lft forever       # å¯ä»¥çœ‹åˆ°å®¹å™¨å¯åŠ¨çš„æ—¶å€™ä¼šå¾—åˆ°ä¸€ä¸ª eth0@  çš„ipåœ°å€ï¼Œè¿™æ˜¯dockersåˆ†é…çš„ipåœ°å€ã€‚ping 172.17.0.2# Linuxæ˜¯å¯ä»¥pingé€šdockerå®¹å™¨å†…éƒ¨çš„å®¹å™¨å¸¦æ¥çš„ç½‘å¡éƒ½æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œveth-pair æŠ€æœ¯ï¼Œæ˜¯ä¸€å¯¹çš„è™šæ‹Ÿè®¾å¤‡æ¥å£ï¼Œä¸€ç«¯è¿ç€åè®®ï¼Œä¸€ç«¯å½¼æ­¤ç›¸è¿ã€‚veth-pair å……å½“ä¸€ä¸ªæ¡¥æ¢ï¼Œè¿æ¥å„ç§è™šæ‹Ÿç½‘ç»œè®¾å¤‡çš„ã€‚# ä¸åŒå®¹å™¨ä¹‹å‰æ˜¯å¯ä»¥äº’ç›¸pingé€šçš„\n\n\n\n1234567891011# docker0 ç›¸å½“äºæ˜¯è·¯ç”±å™¨ï¼Œè½¬å‘æ¶ˆæ¯ï¼Œä¸åŒå®¹å™¨å…±ç”¨ä¸€ä¸ªè·¯ç”±å™¨# æ‰€æœ‰çš„å®¹å™¨ä¸æŒ‡å®šç½‘ç»œçš„æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯ docker0 è·¯ç”±çš„ï¼Œdockerä¼šç»™æˆ‘ä»¬çš„å®¹å™¨åˆ†é…ä¸€ä¸ªé»˜è®¤çš„å¯ç”¨ IP# åªè¦å®¹å™¨åˆ é™¤ï¼Œå¯¹åº”çš„ç½‘æ¡¥å°±æ²¡äº†255.255.0.1/16æ­£å¸¸çš„åœ°å€ï¼š00000000.00000000.00000000.00000000åè¿›åˆ¶ï¼š255.255.255.255ä¸€ä¸ªè·¯ç”±ä¸‹ï¼š255.255.0.0  255*255-0.0.0.0(å›ç¯åœ°å€)-255.255.255.255(æœ€ç»ˆåœ°å€)=65535255.255.0.1/24  åŸŸ å±€åŸŸç½‘ï¼Œä¸€èˆ¬å°æ•™å®¤æ˜¯24ï¼Œå…¬å¸æ˜¯16\n\n\n\n\nå®¹å™¨äº’è”â€“link ï¼ˆå…¥é—¨äº’è” é€šè¿‡åå­—pingé€šä¸¤ä¸ªå®¹å™¨ï¼‰å¯åŠ¨ä¸¤ä¸ªtomcatï¼š\n12docker run -d -P --name tomcat01 tomcatdocker run -d -P --name tomcat02 tomcat\n\nç›´æ¥é€šè¿‡åå­—pingæ˜¯æ— æ³•pingé€šçš„\n12docker exec -it tomcat02 ping tomcat01OCI runtime exec failed: exec failed: unable to start container process: exec: &quot;ping&quot;: executable file not found in $PATH: unknown\n\nåˆ›å»ºå®¹å™¨æ—¶é€šè¿‡ â€“link å‚æ•°æ¥ link å¦ä¸€ä¸ªå®¹å™¨\n1docker run -d -P --name tomcat03 --link tomcat02 tomcat\n\né€šè¿‡ --link å‚æ•°å»ºç«‹è¿æ¥åï¼Œåªèƒ½ä»03çš„æ–¹å‘ping 02ï¼Œåè¿‡æ¥æ˜¯pingä¸é€šçš„\n1docker exec -it tomcat03 ping tomcat02\n\nå¦‚æœåœ¨å®¹å™¨å¯åŠ¨æ—¶è¿›è¡Œäº†linkï¼Œä½†è¢«linkçš„å®¹å™¨åˆ é™¤æ‰ï¼Œå³ä½¿å†åˆ›å»ºä¸€ä¸ªåŒåçš„å®¹å™¨ä¹Ÿæ˜¯æ— æ³•pingé€šçš„\ndocker network å‘½ä»¤\n123456789101112131415docker network -helpdocker network lsNETWORK ID     NAME      DRIVER    SCOPEd50b0dcbbc57   bridge    bridge    localeeea9a40175b   host      host      local8460731336c8   none      null      local# æŸ¥çœ‹ç½‘ç»œä¿¡æ¯docker network inspect d50b0dcbbc57# ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å¯ä»¥æ‰¾åˆ° &quot;Links&quot; å‚æ•°ï¼Œå­˜æ”¾äº†linkçš„ä¿¡æ¯docker inspect å®¹å™¨id# æˆ–è€…é€šè¿‡ç¬¬äºŒç§æ–¹å¼æŸ¥çœ‹ï¼Œåœ¨hostsæ–‡ä»¶ä¸­å¢åŠ äº†ä¸€ä¸ªæ˜ å°„docker exec -it tomcat03 cat /etc/hosts...172.17.0.5\ttomcat02 606ae16ac1bd...\n\n\n\nè‡ªå®šä¹‰ç½‘ç»œ(é«˜çº§äº’è”)æŸ¥çœ‹æ‰€æœ‰çš„ç½‘ç»œ\n1docker network ls\n\n\n\nç½‘ç»œæ¨¡å¼\n**bridge(æ¡¥æ¥æ¨¡å¼)**ï¼šæ­æ¡¥ï¼Œé€šè¿‡ 0.1 å¯ä»¥è®¿é—® 0.2 å’Œ 0.3 ï¼Œ0.1èµ·åˆ°è½¬å‘çš„ä½œç”¨ã€‚dockeré»˜è®¤ä½¿ç”¨æ¡¥æ¥æ¨¡å¼ï¼Œè‡ªå·±åˆ›å»ºçš„ç½‘ç»œä¹Ÿä½¿ç”¨æ¡¥æ¥æ¨¡å¼\nnone(ä¸é…ç½®ç½‘ç»œ)\n**host(ä¸»æœºæ¨¡å¼)**ï¼šå’Œå®¿ä¸»æœºå…±äº«ç½‘ç»œ\ncontainer(å®¹å™¨å†…ç½‘ç»œè¿é€š)ï¼šç”¨çš„è¾ƒå°‘ï¼Œå±€é™å¾ˆå¤§\né»˜è®¤ç½‘ç»œç›´æ¥å¯åŠ¨æ—¶æ—¶å¯ä»¥æŒ‡å®šå‚æ•°ï¼Œbridge å°±æ˜¯docker0çš„ç½‘ç»œ\n1docker run -d -P --name tomcat01 --net bridge diytomcat\n\ndocker0çš„ç‰¹ç‚¹ï¼š\n\nâ€“net é»˜è®¤èµ°docker0\nåŸŸåä¸èƒ½è®¿é—®ï¼Œâ€“linkå¯ä»¥æ‰“é€šè¿æ¥\n\nè‡ªå®šä¹‰ç½‘ç»œ123456789101112131415161718docker network create --driver bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 mynet# å¸¸ç”¨å‚æ•°--driver: æŒ‡å®šç½‘ç»œæ¨¡å¼ï¼Œbridge æ¡¥æ¥æ¨¡å¼--subnetï¼šå­ç½‘ï¼Œ192.168.0.0/16ï¼Œ16æ—¶65535ä¸ªå­ç½‘ï¼Œå¦‚æœä¸º24ï¼Œé‚£ä¹ˆåªèƒ½åˆ›å»º255ä¸ª--gatewayï¼šæŒ‡å®šç½‘å…³ï¼Œä»å“ªé‡Œå‡ºå»# lsæŸ¥çœ‹ä¸€ä¸‹ï¼Œå³å¯çœ‹åˆ°åˆ›å»ºçš„ç½‘ç»œ mynetdocker network ls2e4276da5434   mynet     bridge    local# å¯åŠ¨ä¸€ä¸ªä½¿ç”¨è‡ªå®šä¹‰ç½‘ç»œçš„å®¹å™¨docker run -d -P --name tomcat-net-01 --net mynet diytomcatdocker run -d -P --name tomcat-net-02 --net mynet diytomcat# æŸ¥çœ‹ç½‘ç»œçŠ¶æ€docker network inspect mynet# ä½¿ç”¨è‡ªå®šä¹‰çš„ç½‘ç»œæ˜¯å¯ä»¥ ping é€šçš„ docker exec -it tomcat-net-01 ping tomcat-net-02docker exec -it tomcat-net-02 ping tomcat-net-01\n\nè‡ªå®šä¹‰çš„ç½‘ç»œdocker0å·²ç»ç»´æŠ¤å¥½äº†å¯¹åº”çš„å…³ç³»ï¼ŒåŠŸèƒ½æ›´åŠ å®Œå–„ï¼Œæ— éœ€æŒ‡å®šâ€“linkå‚æ•°ã€‚\nä¸åŒçš„é›†ç¾¤ä½¿ç”¨ä¸åŒçš„ç½‘ç»œï¼Œä¿è¯é›†ç¾¤æ˜¯å®‰å…¨å’Œå¥åº·çš„\nç½‘ç»œè¿é€šåœ¨docker0ç½‘ç»œä¸­å¯åŠ¨ä¸¤ä¸ªå®¹å™¨\n12docker run -d -P --name tomcat1 diytomcatdocker run -d -P --name tomcat2 diytomcat\n\nè¿æ¥å®¹å™¨tomcat1åˆ°ç½‘ç»œmynet\n1docker network connect mynet tomcat1\n\næ­¤æ—¶ï¼Œä¸¤ä¸ªæ–¹å‘æ¥pingæ˜¯å¯ä»¥pingé€šçš„äº†\nå®é™…ä¸Šï¼Œtomcat1æ˜¯è¢«åŠ å…¥åˆ°äº†mynetç½‘ç»œä¸­ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªå®¹å™¨ä¸¤ä¸ªipåœ°å€\n1docker network inspect mynet\n\n\n\n\n\n4.IDEA æ•´åˆ Docker5.Docker Compose  é›†ç¾¤ç®¡ç†6. Docker Swarm å®¹å™¨ç¼–æ’7.CI/CD jenkinså››ã€æ·±å…¥ç†è§£Dockerè¯»æ–‡æ¡£1ã€\n\ndocker layer æ˜¯ä»€ä¹ˆï¼Ÿ\nWhat is docker layer? importance of docker layer while creating Dockerfile (naiveskill.com)\nçœ‹å®Œè¿™ç¯‡æ–‡ç« åæˆ‘çš„ç®€å•ç†è§£ï¼šdocker layer æ˜¯ dockerfiles åˆ›å»ºæ—¶çš„æ¯ä¸€å±‚ï¼Œæ¯ä¸€å±‚å¯¹åº”å®Œæˆfockerfilesçš„ä¸€ä¸ªåŠ¨ä½œï¼Œdockerfilesæ€»çš„æ¥çœ‹åˆ†æˆäº†ä¸¤ä¸ªåŠ¨ä½œï¼šbase imageï¼›åŸºäºbase imageçš„layers\n\nå±‚æ•°è¶Šå¤šï¼Œæ‰€å ç”¨çš„ç©ºé—´å°±è¶Šå¤šï¼Œå› æ­¤å¯ä»¥é€šè¿‡å‡å°‘å±‚æ•°æ¥é™ä½æ‰€å ç”¨çš„ç©ºé—´\näº”ã€é¡¹ç›®ç»ƒä¹ 1 Docker éƒ¨ç½²Nginx12345678910111213# 1 æœç´¢nginxï¼š a.docker search   b.åˆ° docker hub ä¸Šæœç´¢https://hub.docker.com/_/nginxdocker pull nginx# æœåŠ¡å™¨å¼€æ”¾3344ç«¯å£ï¼Œå®¹å™¨å†…åœ¨80ç«¯å£ï¼Œé€šè¿‡å…¬ç½‘3344å¯ä»¥è®¿é—®åˆ°å®¹å™¨å†…éƒ¨docker run -d --name nginx01 -p 3344:80 nginx# è¿è¡Œæµ‹è¯•curl localhost:3344# è¿›å…¥å®¹å™¨docker exec -it nginx01 /bin/bash# æ‰¾nginxçš„é…ç½®æ–‡ä»¶ä½ç½®(æœ‰å¾ˆå¤šï¼Œéƒ½æ˜¯åšä»€ä¹ˆçš„å‘¢ï¼Ÿ)whereis nginxcd /etc/nginx# å…¶ä¸­ nginx.conf ä½¿nginxçš„é…ç½®æ–‡ä»¶\n\n\n\né—®é¢˜ï¼šæ¯æ¬¡æ”¹åŠ¨nginxé…ç½®æ–‡ä»¶éƒ½ä¸€å®šéœ€è¦è¿›å…¥å®¹å™¨å—ï¼Ÿâ€”&gt;æ•°æ®å·\n2 ä½¿ç”¨dockeræ¥è£…ä¸€ä¸ªtomcat123456789101112docker run -it --rm tomcat:9.0# --rmå‚æ•°ï¼Œç”¨å®Œå³åˆ docker pull tomcatdocker run -d -p 8080:8080 tomcat:latest# æŒ‡å®šå¼€æ”¾çš„ç«¯å£åï¼Œå¤–ç½‘å¯ä»¥è®¿é—®åˆ°ï¼Œä½†æç¤º404ï¼Œå› ä¸ºå®˜æ–¹æ‰€ç»™çš„tomcatä¸æ˜¯å®Œæ•´ç‰ˆ# è¿›å…¥å®¹å™¨docker exec -it b9b74f7a705d /bin/bash# å‘ç°é—®é¢˜ï¼š1 Linuxå‘½ä»¤å°‘äº†  2 æ²¡æœ‰webapps# é˜¿é‡Œäº‘é•œåƒåŸå› ï¼Œé»˜è®¤ä¸ºæœ€å°é•œåƒï¼Œæ‰€æœ‰ä¸å¿…è¦çš„éƒ½å‰”é™¤æ‰# å°†webapps.dist å¤åˆ¶è¿‡å»å°±å¯ä»¥è®¿é—®äº†cp -r webapps.dist/* webapps\n\n\n\n3 éƒ¨ç½² es + kibanaelasticsearch - Official Image | Docker Hub\n123456789101112131415161718# es æš´éœ²çš„ç«¯å£å¾ˆå¤š# es ååˆ†è€—å†…å­˜# es çš„æ•°æ®ä¸€èˆ¬è¦æ”¾åœ¨å®‰å…¨ç›®å½•ï¼ŒæŒ‚è½½# --net somenetwork ç½‘ç»œé…ç½®# å¯åŠ¨å®Œæ•´ç‰ˆå‘½ä»¤ï¼šdocker run -d --name elasticsearch --net somenetwork -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; elasticsearch:tagdocker run -d --name elasticsearch -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; elasticsearch:8.6.1# éªŒè¯å®‰è£…æˆåŠŸcurl localhost:9200# æŸ¥çœ‹cpuçŠ¶æ€docker stats# è¿‡äºå ç”¨å†…å­˜ï¼Œç›´æ¥å¡æ­»äº†ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œ-eä¿®æ”¹ç¯å¢ƒdocker run -d --name elasticsearch02 -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; -e ES_JAVA_OPTS=&quot;-Xms64m -Xmx512m&quot; elasticsearch:8.6.1\n\n\n\n4 å®‰è£…å¹¶æŒ‚è½½mysqlmysql - Official Image | Docker Hub\n12345678# 1 æ‹‰å–é•œåƒdocker pull mysql:5.7# 2 æŒ‚è½½é•œåƒï¼Œæ³¨æ„mysqléœ€è¦è®¾ç½®å¯†ç docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag# å¢åŠ å¤šä¸ªæŒ‚è½½ç‰ˆæœ¬çš„å‘½ä»¤docker run -d -p 3310:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 --name mysql01 mysql:5.7# å¯åŠ¨æˆåŠŸåå³å¯è®¿é—®# å®¹å™¨åˆ é™¤ï¼Œæœ¬æœºä¸ŠæŒ‚è½½çš„æ•°æ®ä¾æ—§å­˜åœ¨\n\n\n\n5 DockerFile æ„å»ºé•œåƒ12345678910111213141516171819202122232425262728293031323334353637383940# åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹mkdir dockerfilecd dockerfilevim mydockerfile-centos# å¡«å†™æ„å»ºé•œåƒå†…å®¹# åŸºç¡€é•œåƒcentosï¼Œè®¾ç½®ç¯å¢ƒå˜é‡å’Œå·¥ä½œè·¯å¾„ï¼Œå¼€æ”¾80ç«¯å£ï¼Œå®‰è£…vimã€‚netå·¥å…·# å› ä¸ºcentoså·²ç»åœæ­¢ç»´æŠ¤äº†ï¼Œæ‰€ä»¥è¿è¡Œåˆ° yum install è¿™é‡Œä¼šå¡ä½ï¼Œéœ€è¦åŠ ä¸Šä¿®æ”¹é•œåƒæºçš„å‘½ä»¤ï¼Œyum makecacheè¿™ä¸€æ­¥ä¼šå¾ˆæ…¢ï¼Œæˆ‘æ›´äº†å¤§æ¦‚æœ‰4åˆ†é’Ÿå¤šï¼Œéœ€è¦è€å¿ƒç­‰å¾…ã€‚# ä½†æ˜¯ä¼šè‡ªåŠ¨æ›´æ–°ç‰ˆæœ¬ï¼æœ€åæ„å»ºå‡ºæ¥çš„é•œåƒç‰¹åˆ«å¤§ï¼Œæ­£åœ¨æ‰¾è§£å†³æ–¹æ³•(å¾…è§£å†³)FROM centosMAINTAINER abilish&lt;sfy_mx@163.com&gt;ENV MYPATH /usr/localWORKDIR $MYPATHRUN cd /etc/yum.repos.d/RUN sed -i &#x27;s/mirrorlist/#mirrorlist/g&#x27; /etc/yum.repos.d/CentOS-*RUN sed -i &#x27;s|#baseurl=http://mirror.centos.org|baseurl=http://vault.centos.org|g&#x27; /etc/yum.repos.d/CentOS-*RUN yum makecacheRUN yum update -yRUN yum -y install vimRUN yum -y install net-toolsEXPOSE 80CMD echo $MYPATHCMD echo &quot;----end----&quot;CMD /bin/bash# build æ„å»ºdocker build -f mydockerfile-centos -t mycentos:1.0 .# æŸ¥çœ‹æ„å»ºå¥½çš„é•œåƒdocker images# è¿è¡Œdocker -it mycentos:1.0# æŸ¥çœ‹æ„å»ºå˜æ›´å†å²docker history\n\né—®é¢˜å¾…è§£å†³ï¼Œé•œåƒæ¢æºåå¦‚ä½•ä¸è‡ªåŠ¨æ›´æ–°\n6 tomcat é•œåƒ1ã€å‡†å¤‡é•œåƒæ–‡ä»¶ tomcatå‹ç¼©åŒ…ï¼Œjdkçš„å‹ç¼©åŒ…\njdk-8u151-linux-x64.tar.gz\napache-tomcat-9.0.72.tar.gz\né“¾æ¥ï¼šhttps://pan.baidu.com/s/1Zbe2JcOVYX-b1YPQhL3cgw?pwd=8888æå–ç ï¼š8888 \n1touch readme.txt\n\n\n\n2ã€ç¼–å†™dockerfileæ–‡ä»¶\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116# Dockerfile æ˜¯å®˜æ–¹å‘½åï¼Œbuildæ—¶ä¼šè‡ªåŠ¨æ‰¾è¿™ä¸ªåå­—çš„æ–‡ä»¶ï¼Œä¸ç”¨æŒ‡å®š-få‚æ•°äº†vim Dockerfile# Dockerfile æ–‡ä»¶ä¸­çš„å†…å®¹ï¼ŒADDåä¼šè‡ªåŠ¨è§£å‹æ–‡ä»¶FROM centosMAINTAINER abilish&lt;sfy_mx@163.com&gt;COPY readme.txt /usr/local/readme.txtADD jdk-8u151-linux-x64.tar.gz /usr/local/ADD apache-tomcat-9.0.72.tar.gz /usr/local/RUN cd /etc/yum.repos.d/RUN sed -i &#x27;s/mirrorlist/#mirrorlist/g&#x27; /etc/yum.repos.d/CentOS-*RUN sed -i &#x27;s|#baseurl=http://mirror.centos.org|baseurl=http://vault.centos.org|g&#x27; /etc/yum.repos.d/CentOS-*RUN yum makecacheRUN yum update -yRUN yum -y install vimENV MYPATH /usr/localWORKDIR $MYPATHENV JAVA_HOME /usr/local/jdk1.8.0_151ENV CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jarENV CATALINA_HOME /usr/local/apache-tomcat-9.0.72ENV CATALINE_BASE /usr/local/apache-tomcat-9.0.72ENV PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/lib:$CATALINA_HOME/binEXPOSE 8080CMD /usr/local/apache-tomcat-9.0.72/bin/startup.sh &amp;&amp; tail -F /url/local/apache-tomcat-9.0.72/bin/logs/catalina.out# æ„å»ºé•œåƒdocker build -t diytomcat .# è¿è¡Œé•œåƒ# æŒ‚è½½ç›®å½•æ˜¯ä¸Šé¢å­˜æ”¾jdkã€apacheç­‰æ–‡ä»¶ç›®å½•ä¸‹çš„ç›®å½•docker run -d -p 9090:8080 --name abilishtomcat -v /home/tomcat-jdk/test:/usr/local/apache-tomcat-9.0.72/webapps/test -v /home/tomcat-jdk/tomcatlogs/:/usr/local/apache-tomcat-9.0.72/logs diytomcat# è¿›å…¥å®¹å™¨docker exec -it é•œåƒid /bin/bash# è®¿é—® ip:9090 # å‘å¸ƒé¡¹ç›®(ç”±äºåšäº†å·æŒ‚è½½ï¼Œç›´æ¥åœ¨æœ¬åœ°ç¼–å†™é¡¹ç›®å°±å¯ä»¥å‘å¸ƒäº†)cd /home/tomcat-jdk/testmkdir WEB-INFcd WEB-INFvim web.xml# å†™å…¥&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;    xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;    xmlns:web=&quot;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;    xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;    id=&quot;WebApp_ID&quot; version=&quot;2.5&quot;&gt;    &lt;/web-app&gt;# cd åˆ°ä¸Šä¸€å±‚ç›®å½•cd ..vim index.jsp&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;    pageEncoding=&quot;UTF-8&quot;%&gt;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;title&gt;å•¦å•¦å•¦å•¦å•¦&lt;/title&gt;&lt;/head&gt;&lt;body&gt;Hello World!&lt;br/&gt;&lt;%System.out.println(&quot;---my test web log---&quot;);%&gt;&lt;/body&gt;&lt;/html&gt;# è®¿é—® ipåœ°å€:9090/test/# æŸ¥çœ‹æ—¥å¿—æ˜¯å¦æ‰“å°å‡ºæ¥äº†cd ..cat catalina.out# å¯ä»¥çœ‹åˆ°è¾“å‡ºçš„ ---my test web log---  æ—¥å¿—# é¡¹ç›®éƒ¨ç½²æˆåŠŸå¹¶ä¸”èƒ½æˆåŠŸè®¿é—®# å‘å¸ƒé•œåƒ# å‘å¸ƒåˆ°å®˜æ–¹é•œåƒåº“ä¸­1 æ³¨å†Œè‡ªå·±çš„è´¦å·ï¼šhttps://hub.docker.com/2 ç¡®å®šè´¦å·å¯ä»¥ç™»å½•3 åœ¨æœåŠ¡å™¨ä¸Šæäº¤é•œåƒdocker login --help\t# å¸¸ç”¨å‚æ•°\t\t-u æŒ‡å®šæ˜µç§°\t\t-p æŒ‡å®šå¯†ç 4 ç™»å½•å docker pushdocker tag é•œåƒid ç”¨æˆ·å(è´¦å·å)/ä»“åº“å:ç‰ˆæœ¬å·docker tag diytomcat xxx/diytomcat:version1.0docker push ç”¨æˆ·å(è´¦å·å)/ä»“åº“å:ç‰ˆæœ¬å·docker push xxx/diytomcat:version1.0# å‘å¸ƒåˆ°é˜¿é‡Œäº‘é•œåƒåº“ä¸­ç™»å½•é˜¿é‡Œäº‘ï¼Œæ‰¾åˆ°å®¹å™¨é•œåƒæœåŠ¡ï¼Œåˆ›å»ºä¸ªäººå®ä¾‹åï¼Œæ‰¾åˆ°å‘½åç©ºé—´ï¼Œåˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´ï¼›åˆ›å»ºå®¹å™¨é•œåƒï¼Œä»“åº“ä¿¡æ¯é€‰æ‹©æœ¬åœ°ä»“åº“é€€å‡ºç™»å½•åˆšåˆšç™»å½•çš„è´¦å·ï¼šdocker logoutæŒ‰ç…§é˜¿é‡Œäº‘é•œåƒä¸‹é¢çš„æ­¥éª¤æ¥ç™»å½•pushå³å¯\n\n\n\n\n\n7 redisé›†ç¾¤éƒ¨ç½²ç‰¹ç‚¹ï¼šåˆ†ç‰‡ã€é«˜å¯ç”¨ã€è´Ÿè½½å‡è¡¡\nå½“r-m3 æŒ‚äº†ï¼Œå¤‡ä»½ r-s3 ä¼šè¿›è¡Œæ›¿ä»£\n\nå‡†å¤‡ï¼šç§»é™¤æ‰€æœ‰å®¹å™¨ï¼Œé˜²æ­¢å¡é¡¿\n1docker rm -f $(docker ps -aq)\n\nè‡ªå®šä¹‰ä¸€ä¸ªç½‘ç»œ\n1docker network create redis --subnet 172.38.0.0/16\n\né€šè¿‡è„šæœ¬æ¥åˆ›å»ºå…­ä¸ªredisé…ç½®\n12345678910111213141516for port in $(seq 1 6); \\do \\mkdir -p /mydata/redis/node-$&#123;port&#125;/conftouch /mydata/redis/node-$&#123;port&#125;/conf/redis.confcat &lt;&lt; EOF &gt;/mydata/redis/node-$&#123;port&#125;/conf/redis.confport 6379 bind 0.0.0.0cluster-enabled yes cluster-config-file nodes.confcluster-node-timeout 5000cluster-announce-ip 172.38.0.1$&#123;port&#125;cluster-announce-port 6379cluster-announce-bus-port 16379appendonly yesEOFdone\n\n\n\n1cd /mydata/\n\n\n\nå¯åŠ¨å®¹å™¨\n1234docker run -p 6371:6379 -p 16371:16379 --name redis-1 \\    -v /mydata/redis/node-1/data:/data \\    -v /mydata/redis/node-1/conf/redis.conf:/etc/redis/redis.conf \\    -d --net redis --ip 172.38.0.11 redis:5.0.9-alpine3.11 redis-server /etc/redis/redis.conf","dateCreated":"2023-03-07T22:10:20+08:00","dateModified":"2023-03-07T09:37:19+08:00","datePublished":"2023-03-07T22:10:20+08:00","description":"ç®€ä»‹ï¼šç®€å•æ˜“æ‡‚çš„Dockerå…¥é—¨æ–‡ç« ï¼Œå› ä¸ºæ˜¯å­¦ä¹ ä¸­/åçš„æ€»ç»“æ€§æ–‡ç« ï¼Œä¸ºäº†ä¿æŒä¸€è´¯çš„é˜Ÿå½¢ï¼Œè¿™ç¯‡ç¬”è®°ä»ç„¶èµ·åä¸ºå­¦ä¹ ç¬”è®°ï¼ˆå…¶å®å°±æ˜¯æ‡’å¾—æƒ³äº†ï¼Œå“ªæ€•ä¸ºæ­¤å†™äº†è¿™ä¹ˆé•¿çš„ä¸€æ®µåºŸè¯ï¼Œå˜»å˜»ğŸ¤­ï¼Œç•¥ç•¥ç•¥ï¼‰\nåŒæ­¥æ›´æ–°åœ°å€ï¼š","headline":"Dockerå­¦ä¹ ç¬”è®°","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com/2023/03/07/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},"publisher":{"@type":"Organization","name":"Abilish","sameAs":["https://github.com/abilish","http://stackoverflow.com/users"],"image":"avatar.png","logo":{"@type":"ImageObject","url":"avatar.png"}},"url":"http://example.com/2023/03/07/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","keywords":"åˆ›ä½œä¸­, Docker"}</script>
    <meta name="description" content="ç®€ä»‹ï¼šç®€å•æ˜“æ‡‚çš„Dockerå…¥é—¨æ–‡ç« ï¼Œå› ä¸ºæ˜¯å­¦ä¹ ä¸­&#x2F;åçš„æ€»ç»“æ€§æ–‡ç« ï¼Œä¸ºäº†ä¿æŒä¸€è´¯çš„é˜Ÿå½¢ï¼Œè¿™ç¯‡ç¬”è®°ä»ç„¶èµ·åä¸ºå­¦ä¹ ç¬”è®°ï¼ˆå…¶å®å°±æ˜¯æ‡’å¾—æƒ³äº†ï¼Œå“ªæ€•ä¸ºæ­¤å†™äº†è¿™ä¹ˆé•¿çš„ä¸€æ®µåºŸè¯ï¼Œå˜»å˜»ğŸ¤­ï¼Œç•¥ç•¥ç•¥ï¼‰ åŒæ­¥æ›´æ–°åœ°å€ï¼š">
<meta property="og:type" content="blog">
<meta property="og:title" content="Dockerå­¦ä¹ ç¬”è®°">
<meta property="og:url" content="http://example.com/2023/03/07/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Do">
<meta property="og:description" content="ç®€ä»‹ï¼šç®€å•æ˜“æ‡‚çš„Dockerå…¥é—¨æ–‡ç« ï¼Œå› ä¸ºæ˜¯å­¦ä¹ ä¸­&#x2F;åçš„æ€»ç»“æ€§æ–‡ç« ï¼Œä¸ºäº†ä¿æŒä¸€è´¯çš„é˜Ÿå½¢ï¼Œè¿™ç¯‡ç¬”è®°ä»ç„¶èµ·åä¸ºå­¦ä¹ ç¬”è®°ï¼ˆå…¶å®å°±æ˜¯æ‡’å¾—æƒ³äº†ï¼Œå“ªæ€•ä¸ºæ­¤å†™äº†è¿™ä¹ˆé•¿çš„ä¸€æ®µåºŸè¯ï¼Œå˜»å˜»ğŸ¤­ï¼Œç•¥ç•¥ç•¥ï¼‰ åŒæ­¥æ›´æ–°åœ°å€ï¼š">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2023/02/17/QvknuBAE2l91iqb.png">
<meta property="og:image" content="http://example.com/2023/03/07/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/1676711860958.png">
<meta property="og:image" content="http://example.com/2023/03/07/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/1676712052236.png">
<meta property="og:image" content="https://ts1.cn.mm.bing.net/th/id/R-C.d955a02688023db6aca5ba2d4e03f9ae?rik=NbFbefhG8zRz/g&riu=http://itwangqing.net.cn/mweb/15808978958059.jpg&ehk=OETmGXExvQXv+Gu6xBh7gh4Xix2O7S3z1PD/NBJobO4=&risl=&pid=ImgRaw&r=0">
<meta property="og:image" content="http://example.com/2023/03/07/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/1676711593560.png">
<meta property="og:image" content="http://example.com/2023/03/07/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/1676816820100.png">
<meta property="og:image" content="http://example.com/2023/03/07/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/1677513000633.png">
<meta property="og:image" content="http://example.com/2023/03/07/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/1678017716675.png">
<meta property="og:image" content="http://example.com/2023/03/07/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/1674740418153.png">
<meta property="og:image" content="http://example.com/2023/03/07/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/1674740633100.png">
<meta property="og:image" content="http://example.com/2023/03/07/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/1678065538739.png">
<meta property="article:published_time" content="2023-03-07T14:10:20.000Z">
<meta property="article:modified_time" content="2023-03-07T01:37:19.082Z">
<meta property="article:author" content="Abilish">
<meta property="article:tag" content="åˆ›ä½œä¸­">
<meta property="article:tag" content="Docker">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2023/02/17/QvknuBAE2l91iqb.png">
    
    
        
    
    
        <meta property="og:image" content="http://example.com/assets/images/avatar.png"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-dnipa5uemzhoi9vvrnmqb2ijfofk2ioy6agrjzdgxdcme4ri2nzo71ht0dut.min.css">

    <!--STYLES END-->
    

    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Do
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="æ‰“å¼€é“¾æ¥: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/avatar.png" alt="ä½œè€…çš„å›¾ç‰‡"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="é˜…è¯»æœ‰å…³ä½œè€…çš„æ›´å¤šä¿¡æ¯"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/avatar.png" alt="ä½œè€…çš„å›¾ç‰‡"/>
                </a>
                <h4 class="sidebar-profile-name">Abilish</h4>
                
                    <h5 class="sidebar-profile-bio"><p>Less is More.</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="é¦–é¡µ"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">é¦–é¡µ</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="åˆ†ç±»"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">åˆ†ç±»</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="æ ‡ç­¾"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">æ ‡ç­¾</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="å½’æ¡£"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">å½’æ¡£</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="æœç´¢"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">æœç´¢</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="å…³äº"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">å…³äº</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/abilish"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="http://stackoverflow.com/users"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Stack Overflow"
                        >
                        <i class="sidebar-button-icon fab fa-stack-overflow" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Stack Overflow</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Dockerå­¦ä¹ ç¬”è®°
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2023-03-07T22:10:20+08:00">
	
		    3æœˆ 07, 2023
    	
    </time>
    
        <span>å‘å¸ƒåœ¨ </span>
        
    <a class="category-link" href="/categories/%E5%AD%A6%E4%B9%A0/">å­¦ä¹ </a>, <a class="category-link" href="/categories/%E5%AD%A6%E4%B9%A0/Docker/">Docker</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <!-- excerpt -->

<h1 id="table-of-contents">ç›®å½•</h1><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81Docker-%E7%AE%80%E4%BB%8B"><span class="toc-text">ä¸€ã€Docker ç®€ä»‹</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Docker-%E6%A6%82%E8%BF%B0%E5%92%8C%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-text">äºŒã€Docker æ¦‚è¿°å’Œå¸¸ç”¨å‘½ä»¤</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Docker-%E6%95%B4%E4%BD%93%E7%90%86%E8%A7%A3"><span class="toc-text">1. Docker æ•´ä½“ç†è§£</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E8%BE%85%E5%8A%A9%E5%91%BD%E4%BB%A4%E5%8F%8A%E5%AD%A6%E4%B9%A0%E7%BD%91%E7%AB%99"><span class="toc-text">2. è¾…åŠ©å‘½ä»¤åŠå­¦ä¹ ç½‘ç«™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E9%95%9C%E5%83%8F%E5%91%BD%E4%BB%A4"><span class="toc-text">3. é•œåƒå‘½ä»¤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%AE%B9%E5%99%A8%E5%91%BD%E4%BB%A4"><span class="toc-text">4. å®¹å™¨å‘½ä»¤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%B1%87%E6%80%BB"><span class="toc-text">5 å¸¸ç”¨å‘½ä»¤æ±‡æ€»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-Docker-%E9%95%9C%E5%83%8F%E7%90%86%E8%A7%A3"><span class="toc-text">6 Docker é•œåƒç†è§£</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-commit%E9%95%9C%E5%83%8F"><span class="toc-text">7 commité•œåƒ</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81Docker-%E8%BF%9B%E9%98%B6"><span class="toc-text">ä¸‰ã€Docker è¿›é˜¶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#0-%E5%8F%AF%E8%A7%86%E5%8C%96%E7%AE%A1%E7%90%86docker"><span class="toc-text">0 å¯è§†åŒ–ç®¡ç†docker</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%AE%B9%E5%99%A8%E6%95%B0%E6%8D%AE%E5%8D%B7"><span class="toc-text">1. å®¹å™¨æ•°æ®å·</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-DockerFile-%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F"><span class="toc-text">2. DockerFile æ„å»ºé•œåƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%8D%B7%E5%AE%B9%E5%99%A8"><span class="toc-text">æ•°æ®å·å®¹å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DockerFile"><span class="toc-text">DockerFile</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DockerFile-%E6%9E%84%E5%BB%BA%E8%BF%87%E7%A8%8B%E5%8F%8A%E6%8C%87%E4%BB%A4"><span class="toc-text">DockerFile æ„å»ºè¿‡ç¨‹åŠæŒ‡ä»¤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#CMD-%E5%92%8C-ENTRYPOINT-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">CMD å’Œ ENTRYPOINT çš„åŒºåˆ«</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Docker-%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86"><span class="toc-text">3.Docker ç½‘ç»œåŸç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Docker0"><span class="toc-text">Docker0</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E4%BA%92%E8%81%94"><span class="toc-text">å®¹å™¨äº’è”</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%80%93link-%EF%BC%88%E5%85%A5%E9%97%A8%E4%BA%92%E8%81%94-%E9%80%9A%E8%BF%87%E5%90%8D%E5%AD%97ping%E9%80%9A%E4%B8%A4%E4%B8%AA%E5%AE%B9%E5%99%A8%EF%BC%89"><span class="toc-text">â€“link ï¼ˆå…¥é—¨äº’è” é€šè¿‡åå­—pingé€šä¸¤ä¸ªå®¹å™¨ï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BD%91%E7%BB%9C-%E9%AB%98%E7%BA%A7%E4%BA%92%E8%81%94"><span class="toc-text">è‡ªå®šä¹‰ç½‘ç»œ(é«˜çº§äº’è”)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%BC%8F"><span class="toc-text">ç½‘ç»œæ¨¡å¼</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E7%BD%91%E7%BB%9C"><span class="toc-text">é»˜è®¤ç½‘ç»œ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BD%91%E7%BB%9C"><span class="toc-text">è‡ªå®šä¹‰ç½‘ç»œ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E8%BF%9E%E9%80%9A"><span class="toc-text">ç½‘ç»œè¿é€š</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-IDEA-%E6%95%B4%E5%90%88-Docker"><span class="toc-text">4.IDEA æ•´åˆ Docker</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-Docker-Compose-%E9%9B%86%E7%BE%A4%E7%AE%A1%E7%90%86"><span class="toc-text">5.Docker Compose  é›†ç¾¤ç®¡ç†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-Docker-Swarm-%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92"><span class="toc-text">6. Docker Swarm å®¹å™¨ç¼–æ’</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-CI-CD-jenkins"><span class="toc-text">7.CI&#x2F;CD jenkins</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Docker"><span class="toc-text">å››ã€æ·±å…¥ç†è§£Docker</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%BB%E6%96%87%E6%A1%A3"><span class="toc-text">è¯»æ–‡æ¡£</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0"><span class="toc-text">äº”ã€é¡¹ç›®ç»ƒä¹ </span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Docker-%E9%83%A8%E7%BD%B2Nginx"><span class="toc-text">1 Docker éƒ¨ç½²Nginx</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8docker%E6%9D%A5%E8%A3%85%E4%B8%80%E4%B8%AAtomcat"><span class="toc-text">2 ä½¿ç”¨dockeræ¥è£…ä¸€ä¸ªtomcat</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E9%83%A8%E7%BD%B2-es-kibana"><span class="toc-text">3 éƒ¨ç½² es + kibana</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%AE%89%E8%A3%85%E5%B9%B6%E6%8C%82%E8%BD%BDmysql"><span class="toc-text">4 å®‰è£…å¹¶æŒ‚è½½mysql</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-DockerFile-%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F"><span class="toc-text">5 DockerFile æ„å»ºé•œåƒ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-tomcat-%E9%95%9C%E5%83%8F"><span class="toc-text">6 tomcat é•œåƒ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-redis%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2"><span class="toc-text">7 redisé›†ç¾¤éƒ¨ç½²</span></a></li></ol></li></ol>



<h1 id="ä¸€ã€Docker-ç®€ä»‹"><a href="#ä¸€ã€Docker-ç®€ä»‹" class="headerlink" title="ä¸€ã€Docker ç®€ä»‹"></a>ä¸€ã€Docker ç®€ä»‹</h1><p>æ ¹æ®ç™¾åº¦ç™¾ç§‘çš„ä»‹ç»ï¼š</p>
<blockquote>
<p>Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­,ç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/Linux">Linux</a>æˆ–Windowsæ“ä½œç³»ç»Ÿçš„æœºå™¨ä¸Š,ä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–,å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶,ç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ã€‚</p>
</blockquote>
<p><strong>Dockeré‡‡ç”¨çš„æ˜¯Goè¯­è¨€ç¼–å†™çš„</strong>ï¼Œè¯¥è¯­è¨€ä¸€ç§é™æ€å¼ºç±»å‹ã€ç¼–è¯‘å‹ã€å¹¶å‘å‹ï¼Œå¹¶å…·æœ‰åƒåœ¾å›æ”¶åŠŸèƒ½çš„ç¼–ç¨‹è¯­è¨€ï¼Œå¸¸ç”¨äºWebç¨‹åºå¼€å‘ï¼Œå¹¶ä¸”å…·æœ‰æˆç†Ÿçš„Webå¼€å‘æ¡†æ¶ï¼Œå¦‚Beegoã€Ginã€Irisç­‰ç­‰ã€‚</p>
<p><strong>Goè¯­è¨€æè¿°</strong></p>
<p>Goçš„è¯­æ³•æ¥è¿‘Cè¯­è¨€ï¼Œä½†å¯¹äºå˜é‡çš„å£°æ˜æœ‰æ‰€ä¸åŒã€‚Goæ”¯æŒåƒåœ¾å›æ”¶åŠŸèƒ½ã€‚</p>
<h1 id="äºŒã€Docker-æ¦‚è¿°å’Œå¸¸ç”¨å‘½ä»¤"><a href="#äºŒã€Docker-æ¦‚è¿°å’Œå¸¸ç”¨å‘½ä»¤" class="headerlink" title="äºŒã€Docker æ¦‚è¿°å’Œå¸¸ç”¨å‘½ä»¤"></a>äºŒã€Docker æ¦‚è¿°å’Œå¸¸ç”¨å‘½ä»¤</h1><h2 id="1-Docker-æ•´ä½“ç†è§£"><a href="#1-Docker-æ•´ä½“ç†è§£" class="headerlink" title="1. Docker æ•´ä½“ç†è§£"></a>1. Docker æ•´ä½“ç†è§£</h2><p><img src="https://s2.loli.net/2023/02/17/QvknuBAE2l91iqb.png" alt="576507-docker1.png"></p>
<p><strong>dockerè§£å†³é—®é¢˜</strong>ï¼šé¡¹ç›®å¸¦ä¸Šç¯å¢ƒå®‰è£…æ‰“åŒ…ï¼Œå¯ä»¥è·¨å¹³å°ï¼ˆwindowsâ€“&gt;Linuxï¼‰</p>
<p><strong>Dockerå’ŒVMå¯¹æ¯”</strong>ï¼š</p>
<p>Vmwareï¼Œè™šæ‹Ÿç”µè„‘ï¼Œå¾ˆ<strong>ç¬¨é‡</strong>ï¼Œå±äºè™šæ‹ŸåŒ–æŠ€æœ¯</p>
<p>â€‹    dockerså®¹å™¨æŠ€æœ¯ä¹Ÿæ˜¯ä¸€ç§è™šæ‹ŸåŒ–æŠ€æœ¯</p>
<p>dockerï¼šéš”ç¦»ï¼Œé•œåƒï¼ˆæœ€æ ¸å¿ƒçš„ç¯å¢ƒï¼‰ååˆ†<strong>å°å·§</strong></p>
<ul>
<li>ä¼ ç»Ÿè™šæ‹Ÿæœºï¼Œ<strong>è™šæ‹Ÿå‡ºä¸€å¥—ç¡¬ä»¶</strong>ï¼Œè¿è¡Œä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œç„¶ååœ¨è¿™ä¸ªæ“ä½œç³»ç»Ÿä¸Šå®‰è£…å’Œè¿è¡Œè½¯ä»¶</li>
<li>å®¹å™¨å†…çš„åº”ç”¨ç›´æ¥è¿è¡Œåœ¨å®¿ä¸»æœºçš„å†…æ ¸ä¸Šï¼Œå®¹å™¨æ²¡æœ‰è‡ªå·±çš„å†…æ ¸ï¼Œä¹Ÿ<strong>æ²¡æœ‰è™šæ‹Ÿç¡¬ä»¶</strong>ï¼Œå› æ­¤æ›´ä¸ºè½»ä¾¿ã€‚æ¯ä¸ªå®¹å™¨ä¹‹é—´æ˜¯äº’ç›¸éš”ç¦»çš„ï¼Œæ¯ä¸ªå®¹å™¨å†…éƒ½æœ‰ä¸€ä¸ªå±äºè‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿï¼Œä¸”äº’ä¸å½±å“</li>
</ul>
<p>Dockeræœ‰ç€æ¯”è™šæ‹Ÿæœºæ›´å°‘çš„æŠ½è±¡å±‚ã€‚</p>
<p><img src="Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/1676711860958.png" alt="1676711860958"></p>
<p>Dockeråˆ©ç”¨çš„æ˜¯å®¿ä¸»æœºçš„å†…æ ¸ï¼ŒVMç”¨çš„æ˜¯Guest OSï¼Œå› æ­¤ï¼Œæ–°å»ºå®¹å™¨æ—¶ï¼Œdockerä¸éœ€è¦åƒè™šæ‹Ÿæœºä¸€æ ·é‡æ–°åŠ è½½ä¸€ä¸ªæ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œé¿å…å¼•å¯¼ã€‚VMæ˜¯åˆ†é’Ÿçº§çš„ï¼Œdockeræ˜¯ç§’çº§çš„</p>
<p><img src="Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/1676712052236.png" alt="1676712052236"></p>
<p>å­¦ä¹ è·¯å¾„ï¼šå…ˆå­¦ä¼šä¼ ç»Ÿè™šæ‹Ÿæœºä¸Šå¦‚ä½•éƒ¨ç½²ç¯å¢ƒï¼Œå†å­¦ä¹ Docker</p>
<p><strong>æ¦‚è¿°</strong>ï¼šåŸºäºGoè¯­è¨€å¼€å‘ï¼Œå¼€æº</p>
<p><img src="https://ts1.cn.mm.bing.net/th/id/R-C.d955a02688023db6aca5ba2d4e03f9ae?rik=NbFbefhG8zRz/g&riu=http://itwangqing.net.cn/mweb/15808978958059.jpg&ehk=OETmGXExvQXv+Gu6xBh7gh4Xix2O7S3z1PD/NBJobO4=&risl=&pid=ImgRaw&r=0" alt="dockeråŸºæœ¬ç»„æˆ"></p>
<p>é•œåƒ(Image)ï¼šé•œåƒæ˜¯ä¸€ä¸ªåŸå§‹æ¨¡æ¿ï¼Œé€šè¿‡æ¨¡æ¿æ¥åˆ›å»ºå®¹å™¨</p>
<p>å®¹å™¨(container)ï¼šå®¹å™¨æ˜¯æ¥æä¾›æœåŠ¡çš„ã€‚å¯åŠ¨ï¼Œåœæ­¢ï¼Œåˆ é™¤ç­‰ç­‰</p>
<p>ä»“åº“(repository)ï¼šä»“åº“æ˜¯ç”¨æ¥å­˜æ”¾é•œåƒçš„åœ°æ–¹ï¼Œç±»ä¼¼ä¸githubã€giteeç­‰ç­‰ï¼Œåˆ†ä¸ºå…±æœ‰ç§æœ‰ã€‚docker hub åœ¨å›½å¤–ï¼Œéœ€è¦é…ç½®å›½å†…çš„é•œåƒåŠ é€Ÿã€‚</p>
<p>**å®‰è£…åŸºæœ¬æ­¥éª¤(cnetos8)**ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">1. å¸è½½æ—§ç‰ˆæœ¬</span><br><span class="line">sudo yum remove docker \</span><br><span class="line">                  docker-client \</span><br><span class="line">                  docker-client-latest \</span><br><span class="line">                  docker-common \</span><br><span class="line">                  docker-latest \</span><br><span class="line">                  docker-latest-logrotate \</span><br><span class="line">                  docker-logrotate \</span><br><span class="line">                  docker-engine</span><br><span class="line"></span><br><span class="line">2. å®‰è£…ç›¸å…³ä¾èµ–</span><br><span class="line">sudo yum install -y yum-utils</span><br><span class="line"></span><br><span class="line">3. è®¾ç½®å›½å†…yumé•œåƒæº</span><br><span class="line">å›½å¤–æºï¼šsudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line">é˜¿é‡Œäº‘å›½å†…æºå®‰è£…dockerï¼šsudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">4. æ›´æ–°yumè½¯ä»¶åŒ…ç´¢å¼•</span><br><span class="line">centos8 æ— fastå‚æ•°ï¼šyum makecache</span><br><span class="line">yum makecache fast</span><br><span class="line"></span><br><span class="line">5. å®‰è£…docker</span><br><span class="line">æœ€æ–°ç‰ˆçš„å®‰è£…æ–¹å¼(2023/2/18)ï¼šdocker-ceç¤¾åŒºç‰ˆï¼›docker-eeä¼ä¸šç‰ˆ</span><br><span class="line">sudo yum install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span><br><span class="line"></span><br><span class="line">ä¸€è·¯æŒ‰ y</span><br><span class="line"></span><br><span class="line">6. å¯åŠ¨docker</span><br><span class="line">sudo systemctl start docker</span><br><span class="line"></span><br><span class="line">7. éªŒè¯å®‰è£…æˆåŠŸ</span><br><span class="line">docker version</span><br><span class="line"></span><br><span class="line">8. é€šè¿‡å¯åŠ¨é•œåƒéªŒè¯å®‰è£…æˆåŠŸ</span><br><span class="line">sudo docker run hello-world</span><br><span class="line"></span><br><span class="line">9. æŸ¥çœ‹é•œåƒæ˜¯å¦å·²ç»è¢«ä¸‹è½½</span><br><span class="line">docker images</span><br><span class="line"></span><br><span class="line">10. å¸è½½docker</span><br><span class="line">a. å¸è½½ä¾èµ–</span><br><span class="line">sudo yum remove docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin docker-ce-rootless-extras</span><br><span class="line">b. åˆ é™¤èµ„æº</span><br><span class="line">sudo rm -rf /var/lib/docker</span><br><span class="line">sudo rm -rf /var/lib/containerd</span><br><span class="line"></span><br><span class="line">11. è®¾ç½®é˜¿é‡Œäº‘dockeré•œåƒåŠ é€Ÿ</span><br><span class="line">ç™»å½•é˜¿é‡Œäº‘å®˜æ–¹ï¼Œæ‰¾åˆ°â€œå®¹å™¨é•œåƒæœåŠ¡â€--&gt; é•œåƒå·¥å…· --&gt; é•œåƒåŠ é€Ÿå™¨</span><br><span class="line">é€‰æ‹©æ‰€ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿï¼ŒæŒ‰ç…§æ­¥éª¤æ¥é…ç½®ï¼Œä¸‹é¢çš„å‘½ä»¤ä¾æ¬¡æ•²ï¼š</span><br><span class="line">sudo mkdir -p /etc/docker</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://è‡ªå·±çš„ä»“åº“åœ°å€ï¼Œä½ çŒœ.mirror.aliyuncs.com&quot;]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>

<p>Dockeræ˜¯ä¸€ä¸ªClient-Serverç»“æ„çš„ç³»ç»Ÿï¼ŒDockerçš„å®ˆæŠ¤è¿›ç¨‹è¿è¡Œåœ¨ä¸»æœºä¸Šé€šè¿‡Socketä»å®¢æˆ·ç«¯è®¿é—®ã€‚DockerServeræ¥æ”¶åˆ°Docker-Clientçš„æŒ‡ä»¤å°±ä¼šæ‰§è¡Œã€‚å®¹å™¨å†…çš„ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„ç«¯å£ã€‚</p>
<p><img src="Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/1676711593560.png" alt="1676711593560"></p>
<h2 id="2-è¾…åŠ©å‘½ä»¤åŠå­¦ä¹ ç½‘ç«™"><a href="#2-è¾…åŠ©å‘½ä»¤åŠå­¦ä¹ ç½‘ç«™" class="headerlink" title="2. è¾…åŠ©å‘½ä»¤åŠå­¦ä¹ ç½‘ç«™"></a>2. è¾…åŠ©å‘½ä»¤åŠå­¦ä¹ ç½‘ç«™</h2><p>dockerå®˜ç½‘</p>
<p>docker hub  ä»“åº“åœ°å€</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">æŸ¥çœ‹æ“ä½œç³»ç»Ÿçš„å‘è¡Œç‰ˆå·</span></span><br><span class="line">uname -r  </span><br><span class="line"><span class="meta"># </span><span class="language-bash">æ˜¾ç¤ºç³»ç»Ÿåã€èŠ‚ç‚¹åç§°ã€æ“ä½œç³»ç»Ÿçš„å‘è¡Œç‰ˆå·ã€å†…æ ¸ç‰ˆæœ¬ç­‰ç­‰</span></span><br><span class="line">uname -a </span><br><span class="line"><span class="meta"># </span><span class="language-bash">æŸ¥çœ‹è™šæ‹Ÿæœºç³»ç»Ÿç‰ˆæœ¬ä¿¡æ¯</span></span><br><span class="line">cat /etc/os-release</span><br></pre></td></tr></table></figure>

<p>å¸®åŠ©å‘½ä»¤ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">æ˜¾ç¤ºdockerçš„ç‰ˆæœ¬ä¿¡æ¯</span></span><br><span class="line">docker version</span><br><span class="line"><span class="meta"># </span><span class="language-bash">æ˜¾ç¤ºdockerç³»ç»Ÿä¿¡æ¯ï¼ŒåŒ…æ‹¬é•œåƒå’Œå®¹å™¨çš„æ•°é‡</span></span><br><span class="line">docker info</span><br><span class="line"><span class="meta"># </span><span class="language-bash">å¸®åŠ©ä¸‡èƒ½å‘½ä»¤</span></span><br><span class="line">docker å‘½ä»¤ --help  </span><br></pre></td></tr></table></figure>

<p>dockerå‘½ä»¤å¸®åŠ©æ–‡æ¡£åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://docs.docker.com/reference/">https://docs.docker.com/reference/</a></p>
<p>èœé¸Ÿæ•™ç¨‹ä¸­æ–‡åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://www.runoob.com/docker/docker-command-manual.html">Docker å‘½ä»¤å¤§å…¨ | èœé¸Ÿæ•™ç¨‹ (runoob.com)</a></p>
<h2 id="3-é•œåƒå‘½ä»¤"><a href="#3-é•œåƒå‘½ä»¤" class="headerlink" title="3. é•œåƒå‘½ä»¤"></a>3. é•œåƒå‘½ä»¤</h2><p><strong>docker images æŸ¥çœ‹é•œåƒ</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br><span class="line"><span class="meta"># </span><span class="language-bash">å¸¸ç”¨å‚æ•°</span></span><br><span class="line">-a, --all             Show all images (default hides intermediate images)</span><br><span class="line">-q, --quiet           Only show image IDs</span><br></pre></td></tr></table></figure>

<p>a. é€šè¿‡å®˜æ–¹æ–‡æ¡£æ¥å­¦ä¹ å‘½ä»¤ï¼š<a target="_blank" rel="noopener" href="https://docs.docker.com/engine/reference/commandline/images/">https://docs.docker.com/engine/reference/commandline/images/</a></p>
<p>b. é€šè¿‡helpæ¥å­¦ä¹ <code>docker images --help</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">ç›¸å½“äºåœ¨docker hubä¸Šæœç´¢</span></span><br><span class="line">docker search mysql </span><br><span class="line"><span class="meta"># </span><span class="language-bash">è¿‡æ»¤å‡ºæ”¶è—é‡å¤§äº3000çš„ï¼Œä¸”å±•ç¤ºè¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">docker search mysql --filter=STARS=3000 --no-trunc</span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">åˆ—å‡ºimageså®Œæ•´<span class="built_in">id</span></span></span><br><span class="line">docker images --no-trunc</span><br></pre></td></tr></table></figure>



<p><strong>docker pull ä¸‹è½½é•œåƒ</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull é•œåƒå:tag</span><br></pre></td></tr></table></figure>

<p>ä¸å†™tagé»˜è®¤ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼Œdocker images åˆ†å±‚ä¸‹è½½ï¼Œæ˜¯imageçš„æ ¸å¿ƒï¼Œè”åˆæ–‡ä»¶ç³»ç»Ÿã€‚</p>
<p>pullä¸­çš„designæ˜¯ç­¾åï¼Œæœ€åä¸€è¡Œä¸ºçœŸå®åœ°å€</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">pull mysqlç­‰ä»·äºä»çœŸå®åœ°å€å»æ‹‰å–</span></span><br><span class="line">docker pull mysql</span><br><span class="line">docker pull docker.io/library/mysql:latest</span><br></pre></td></tr></table></figure>



<p><strong>docker rmi åˆ é™¤é•œåƒ</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker rmi -f é•œåƒid</span><br><span class="line">docker rmi repository:tag</span><br><span class="line"><span class="meta"># </span><span class="language-bash">åˆ é™¤æ‰€æœ‰é•œåƒ</span></span><br><span class="line">docker rmi -f $(docker images -aq)</span><br></pre></td></tr></table></figure>





<h2 id="4-å®¹å™¨å‘½ä»¤"><a href="#4-å®¹å™¨å‘½ä»¤" class="headerlink" title="4. å®¹å™¨å‘½ä»¤"></a>4. å®¹å™¨å‘½ä»¤</h2><p>å‰æï¼Œå…ˆpullä¸€ä¸ªé•œåƒ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull centos</span><br></pre></td></tr></table></figure>



<p><strong>docker run å¯åŠ¨å®¹å™¨</strong></p>
<p><a target="_blank" rel="noopener" href="https://docs.docker.com/engine/reference/commandline/run/">docker run | Docker Documentation</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</span><br><span class="line"><span class="meta"># </span><span class="language-bash">å¦‚æœæ²¡æœ‰ä¸‹è½½å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨ä¸‹è½½ï¼Œé»˜è®¤ä¸‹è½½æœ€æ–°ç‰ˆæœ¬</span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">å¸¸ç”¨å‚æ•°</span></span><br><span class="line">--name ç»™å®¹å™¨å‘½å</span><br><span class="line">-d     åå°æ–¹å¼å¯åŠ¨(åå°è¿è¡Œæ—¶å¦‚æœæ²¡æœ‰å‰å°è¿›ç¨‹ï¼Œdockerå‘ç°æ²¡æœ‰åº”ç”¨å°±ä¼šè‡ªåŠ¨åœæ­¢)</span><br><span class="line">-i     äº¤äº’å¼æ“ä½œ</span><br><span class="line">-t     ç»ˆç«¯</span><br><span class="line">-p     æŒ‡å®šå®¹å™¨çš„ç«¯å£ï¼Œå°†å®¹å™¨ç«¯å£æ˜ å°„åˆ°ä¸»æœº  -p 8080ï¼š8080</span><br><span class="line">	-p ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£   ï¼ˆæœ€å¸¸ç”¨çš„ä¸€ç§æ–¹å¼ï¼‰</span><br><span class="line">	-p å®¹å™¨ç«¯å£</span><br><span class="line">	å®¹å™¨ç«¯å£</span><br><span class="line">	ip ip:ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£</span><br><span class="line">-P     å¤§å†™çš„Pæ˜¯éšæœºæŒ‡å®šç«¯å£</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨ä¸€ä¸ªå®¹å™¨: </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it centos /bin/bash</span><br></pre></td></tr></table></figure>

<p>éåå°å¯åŠ¨ï¼Œ<strong>é€€å‡º</strong>å‘½ä»¤ä¸ºï¼šexit</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„å®¹å™¨</span></span><br><span class="line">docker ps</span><br><span class="line"><span class="meta"># </span><span class="language-bash">å¸¸ç”¨å‚æ•°</span></span><br><span class="line">-a    åˆ—å‡ºæ‰€æœ‰ï¼ŒåŒ…æ‹¬å†å²æ›¾è¿è¡Œè¿‡çš„å®¹å™¨</span><br><span class="line">-n=1  åªæ˜¾ç¤ºæœ€è¿‘çš„ä¸€ä¸ª</span><br><span class="line">-q    åªæ˜¾ç¤ºå®¹å™¨çš„ç¼–å·</span><br></pre></td></tr></table></figure>

<p><strong>é€€å‡ºå®¹å™¨</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">ç›´æ¥åœæ­¢å¹¶é€€å‡º</span></span><br><span class="line">exit</span><br><span class="line"><span class="meta"># </span><span class="language-bash">å®¹å™¨ä¸åœæ­¢é€€å‡º</span></span><br><span class="line">Ctrl + P + Q</span><br></pre></td></tr></table></figure>

<p><strong>åˆ é™¤å®¹å™¨</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">åˆ é™¤æŒ‡å®šå®¹å™¨</span></span><br><span class="line">docker rm å®¹å™¨id</span><br><span class="line"><span class="meta"># </span><span class="language-bash">åˆ é™¤æ‰€æœ‰çš„å®¹å™¨</span></span><br><span class="line">docker rm -f $(docker ps -aq)</span><br><span class="line"><span class="meta"># </span><span class="language-bash">é€šè¿‡ç®¡é“ç¬¦è¿‡æ»¤åˆ é™¤</span></span><br><span class="line">docker ps -a -q|xargs docker rm</span><br></pre></td></tr></table></figure>

<p><strong>å¯åŠ¨å®¹å™¨</strong></p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">å¯åŠ¨å®¹å™¨</span></span><br><span class="line">docker start å®¹å™¨id</span><br><span class="line"><span class="meta"># </span><span class="language-bash">é‡å¯å®¹å™¨</span></span><br><span class="line">docker restart å®¹å™¨id</span><br><span class="line"><span class="meta"># </span><span class="language-bash">åœæ­¢å½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨</span></span><br><span class="line">docker stop å®¹å™¨id</span><br><span class="line"><span class="meta"># </span><span class="language-bash">å¼ºåˆ¶åœæ­¢å½“å‰å®¹å™¨</span></span><br><span class="line">docker kill å®¹å™¨id</span><br></pre></td></tr></table></figure>



<h2 id="5-å¸¸ç”¨å‘½ä»¤æ±‡æ€»"><a href="#5-å¸¸ç”¨å‘½ä»¤æ±‡æ€»" class="headerlink" title="5 å¸¸ç”¨å‘½ä»¤æ±‡æ€»"></a>5 å¸¸ç”¨å‘½ä»¤æ±‡æ€»</h2><p><strong>æŸ¥çœ‹æ—¥å¿—</strong>ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://docs.docker.com/engine/reference/commandline/logs/">docker logs | Docker Documentation</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker logs å®¹å™¨id</span><br><span class="line"><span class="meta"># </span><span class="language-bash">å¸¸ç”¨å‚æ•°</span></span><br><span class="line">-f : è·Ÿè¸ªæ—¥å¿—è¾“å‡ºï¼ŒæŒç»­è¾“å‡ºæ—¥å¿—å†…å®¹</span><br><span class="line">-t : æ˜¾ç¤ºæ—¶é—´æˆ³</span><br><span class="line">--tail/-n :ä»…åˆ—å‡ºæœ€æ–°Næ¡å®¹å™¨æ—¥å¿—  -n 15</span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">shell è„šæœ¬</span></span><br><span class="line">&quot;while true;do echo docker;sleep 1;done&quot;</span><br><span class="line"><span class="meta"># </span><span class="language-bash">é‡æ–°å¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼Œè¿è¡Œshellè„šæœ¬ï¼Œä½¿å…¶ä¸æ–­æ‰“å°ï¼Œäº§ç”Ÿæ—¥å¿—</span></span><br><span class="line">docker run -d centos /bin/sh -c &quot;while true;do echo docker;sleep 1;done&quot;</span><br><span class="line"><span class="meta"># </span><span class="language-bash">æŸ¥çœ‹å®¹å™¨æ—¥å¿—</span></span><br><span class="line">docker logs -t -f -n 10 71f8b56ac14e</span><br></pre></td></tr></table></figure>



<p><strong>æŸ¥çœ‹å®¹å™¨ä¸­çš„è¿›ç¨‹ä¿¡æ¯</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker top å®¹å™¨id</span><br><span class="line"><span class="meta"># </span><span class="language-bash">æ˜¾ç¤º</span></span><br><span class="line">UID  ç”¨æˆ·ID</span><br><span class="line">PID  çˆ¶ID</span><br><span class="line">PPID è¿›ç¨‹ID</span><br></pre></td></tr></table></figure>



<p><strong>æŸ¥çœ‹é•œåƒçš„å…ƒæ•°æ®</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect å®¹å™¨id</span><br></pre></td></tr></table></figure>



<p><strong>è¿›å…¥å½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">è¿›å…¥å®¹å™¨åå¼€å¯æ–°ç»ˆç«¯ï¼ˆå¸¸ç”¨ï¼‰</span></span><br><span class="line">docker exec -it å®¹å™¨id/name bashShell</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">ä¾‹ï¼š</span></span><br><span class="line">docker exec -it 71f8b56ac14e /bin/bash</span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">è¿›å…¥å®¹å™¨æ­£åœ¨æ‰§è¡Œçš„ç»ˆç«¯ï¼Œä¸ä¼šå¯åŠ¨æ–°çš„è¿›ç¨‹</span></span><br><span class="line">docker attach å®¹å™¨id</span><br><span class="line"><span class="meta"># </span><span class="language-bash">Attach <span class="built_in">local</span> standard input, output, and error streams to a running container</span></span><br></pre></td></tr></table></figure>



<p><strong>ä»å®¹å™¨å†…æ‹·è´æ–‡ä»¶åˆ°ä¸»æœº</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker cp å®¹å™¨id:å®¹å™¨å†…è·¯å¾„ ç›®çš„çš„ä¸»æœºè·¯å¾„</span><br><span class="line"></span><br><span class="line">docker cp 9d140e95797a:/home/a.txt /home</span><br></pre></td></tr></table></figure>



<p>å®˜æ–¹å›¾ï¼š</p>
<p><img src="Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/1676816820100.png" alt="1676816820100"></p>
<h2 id="6-Docker-é•œåƒç†è§£"><a href="#6-Docker-é•œåƒç†è§£" class="headerlink" title="6 Docker é•œåƒç†è§£"></a>6 Docker é•œåƒç†è§£</h2><p>é•œåƒæ˜¯ç‹¬ç«‹çš„è½¯ä»¶åŒ…</p>
<p>Dockeré•œåƒåŠ è½½åŸç†ä¸º**UnionFS (è”åˆæ–‡ä»¶ç³»ç»Ÿ)**ï¼Œé•œåƒå¯ä»¥é€šè¿‡åˆ†å±‚æ¥è¿›è¡Œç»§æ‰¿ï¼ŒåŸºäºåŸºç¡€é•œåƒï¼Œåˆ¶ä½œå¤åˆ¶å…·ä½“çš„åº”ç”¨é•œåƒã€‚</p>
<p>dockerçš„é•œåƒå®é™…ä¸Šæœ‰ä¸€å±‚ä¸€å±‚çš„æ–‡ä»¶ç³»ç»Ÿç»„æˆï¼Œè¿™ç§å±‚çº§çš„æ–‡ä»¶ç³»ç»Ÿå°±æ˜¯UnionFSã€‚</p>
<p><strong>bootfs</strong>(boot file system) linuxåˆšå¯åŠ¨æ—¶ä¼šåŠ è½½bootfsæ–‡ä»¶ç³»ç»Ÿï¼ŒDckerä¹Ÿæ˜¯ä¸€æ ·çš„ï¼ŒåŠ è½½å®Œæˆåæ•´ä¸ªå†…æ ¸å°±åœ¨å†…å­˜ä¸­äº†ï¼Œæ­¤æ—¶å†…å­˜çš„ä½¿ç”¨æƒå·²ç”±bootfsè½¬äº¤ç»™å†…æ ¸ï¼Œæ­¤æ—¶ç³»ç»Ÿä¹Ÿä¼šå¸è½½bootfs</p>
<p><strong>rootfs</strong>(root file system) ï¼Œåœ¨bootfsä¹‹ä¸Šã€‚åŒ…å«çš„å°±æ˜¯å…¸å‹Linuxç³»ç»Ÿä¸­çš„ /dev, /proc, /bin, /etc ç­‰æ ‡å‡†ç›®å½•å’Œæ–‡ä»¶ï¼Œrootfså°±æ˜¯å„ç§ä¸åŒçš„æ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆï¼Œæ¯”å¦‚Ubuntuï¼ŒCentosç­‰ç­‰</p>
<p><strong>ä¸ºä»€ä¹ˆDockerä¸­çš„centoså¾ˆå°ï¼Ÿ</strong></p>
<p>å› ä¸ºrootfsä¸­åªåŒ…å«äº†æœ€åŸºæœ¬çš„å‘½ä»¤ã€å·¥å…·å’Œç¨‹åºåº“ï¼Œç›´æ¥ç”¨çš„æ˜¯ä¸»æœºçš„kernelï¼Œè‡ªå·±åªéœ€è¦æä¾›rootfså°±å¯ä»¥äº†ã€‚ç”±æ­¤å¯è§å¯¹äºä¸åŒçš„linuxå‘è¡Œç‰ˆï¼ŒbootfsåŸºæœ¬æ˜¯ä¸€è‡´çš„ï¼Œrootfsä¼šæœ‰å·®åˆ«ï¼Œå› æ­¤ä¸åŒçš„å‘è¡Œç‰ˆå¯ä»¥å…¬ç”¨bootfsã€‚</p>
<p><strong>åˆ†å±‚</strong></p>
<p>åˆ†å±‚è¿›è¡Œå¤ç”¨ã€‚</p>
<p>Dockerçš„é•œåƒéƒ½æ˜¯åªè¯»çš„ï¼Œå½“å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¸€ä¸ªæ–°çš„å¯å†™å±‚è¢«åŠ è½½åˆ°é•œåƒçš„é¡¶éƒ¨ã€‚è¿™ä¸€å±‚å°±æ˜¯æˆ‘ä»¬è¯´çš„å®¹å™¨å±‚ï¼Œå®¹å™¨ä¹‹ä¸‹åªè¯»ï¼Œæ— æ³•æ”¹å˜çš„éƒ¨åˆ†éƒ½å«åšé•œåƒå±‚ã€‚</p>
<h2 id="7-commité•œåƒ"><a href="#7-commité•œåƒ" class="headerlink" title="7 commité•œåƒ"></a>7 commité•œåƒ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker commit æäº¤å®¹å™¨æˆä¸ºä¸€ä¸ªæ–°çš„å‰¯æœ¬</span><br><span class="line"></span><br><span class="line">docker commit -m=&quot;æäº¤çš„æè¿°ä¿¡æ¯&quot; -a=&quot;ä½œè€…&quot; å®¹å™¨id ç›®æ ‡é•œåƒå:[TAG]</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">é¡¹ç›®ç»ƒä¹ 2 æ‹·è´tomcatåŸºæœ¬é•œåƒ</span><br><span class="line"></span><br><span class="line">docker commit -a=&quot;Abilish&quot; -m=&quot;add webapps app&quot; 236dffd55cf1 tomcat02:1.0</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">æŸ¥çœ‹è‡ªå·±æäº¤çš„é•œåƒ</span></span><br><span class="line">docker images </span><br></pre></td></tr></table></figure>







<h1 id="ä¸‰ã€Docker-è¿›é˜¶"><a href="#ä¸‰ã€Docker-è¿›é˜¶" class="headerlink" title="ä¸‰ã€Docker è¿›é˜¶"></a>ä¸‰ã€Docker è¿›é˜¶</h1><h2 id="0-å¯è§†åŒ–ç®¡ç†docker"><a href="#0-å¯è§†åŒ–ç®¡ç†docker" class="headerlink" title="0 å¯è§†åŒ–ç®¡ç†docker"></a>0 å¯è§†åŒ–ç®¡ç†docker</h2><p>portainer</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8088:9000 --restart=always -v /var/run/docker.sock:/var/run/docker.sock --privileged=true portainer/portainer</span><br></pre></td></tr></table></figure>

<p>è®¾ç½®ç™»å½•å¯†ç ï¼Œé€‰æ‹©æœ¬åœ°(local)</p>
<p>Rancher(CI/CD)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å¾…è¡¥å……</span><br></pre></td></tr></table></figure>





<p><strong>æŒ‚è½½åˆ†ä¸ºä½¿ç”¨å‘½ä»¤æŒ‚è½½ï¼Œä»¥åŠç”¨DockerFileæŒ‚è½½ä¸¤ç§æ–¹å¼ã€‚</strong></p>
<h2 id="1-å®¹å™¨æ•°æ®å·"><a href="#1-å®¹å™¨æ•°æ®å·" class="headerlink" title="1. å®¹å™¨æ•°æ®å·"></a>1. å®¹å™¨æ•°æ®å·</h2><p>äº§ç”ŸåŸå› ï¼šæ•°æ®å’Œå®¹å™¨åˆ†ç¦»ï¼Œæ•°æ®å•ç‹¬ç‹¬ç«‹ï¼ŒæŒä¹…åŒ–ä¿å­˜ã€‚</p>
<p>MySQLæ•°æ®å¯ä»¥å­˜å‚¨åœ¨æœ¬åœ°ã€‚å®¹å™¨ä¹‹é—´å¯ä»¥æœ‰ä¸€ä¸ªæ•°æ®å…±äº«çš„æŠ€æœ¯ã€‚Docker å®¹å™¨ä¸­äº§ç”Ÿçš„æ•°æ®å‰‹åŒæ­¥åˆ°æœ¬åœ°ï¼Œå› æ­¤äº§ç”Ÿäº†<strong>ç›®å½•æŒ‚è½½</strong>ã€‚<strong>ç›®å½•æŒ‚è½½å°±æ˜¯å®¹å™¨å†…å’Œå®¹å™¨å¤–è¿æ¥çš„ç›®å½•æ˜¯åŒæ­¥æ›´æ–°çš„ã€‚</strong></p>
<p><strong>æ–¹å¼ä¸€</strong>ï¼šä½¿ç”¨å‘½ä»¤æŒ‚è½½</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">docker run -it -v ä¸»æœºç›®å½•:å®¹å™¨ç›®å½•</span><br><span class="line"></span><br><span class="line">docker run -it -v /home/test:/home centos /bin/bash</span><br><span class="line"><span class="meta"># </span><span class="language-bash">å¯ä»¥æŸ¥çœ‹åˆ°å®¹å™¨çš„æŒ‚è½½ä¿¡æ¯</span></span><br><span class="line">docker inspect å®¹å™¨id</span><br><span class="line">......</span><br><span class="line">        &quot;Mounts&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;Type&quot;: &quot;bind&quot;,</span><br><span class="line">                &quot;Source&quot;: &quot;/home/test&quot;,</span><br><span class="line">                &quot;Destination&quot;: &quot;/home&quot;,</span><br><span class="line">                &quot;Mode&quot;: &quot;&quot;,</span><br><span class="line">                &quot;RW&quot;: true,</span><br><span class="line">                &quot;Propagation&quot;: &quot;rprivate&quot;</span><br><span class="line">            &#125;</span><br><span class="line">......</span><br><span class="line"><span class="meta"># </span><span class="language-bash">å®¹å™¨åˆ é™¤ï¼Œæœ¬æœºä¸ŠæŒ‚è½½çš„æ•°æ®ä¾æ—§å­˜åœ¨</span></span><br></pre></td></tr></table></figure>



<p><strong>å…·åæŒ‚è½½å’ŒåŒ¿åæŒ‚è½½</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">åŒ¿åæŒ‚è½½ï¼šåªå†™å®¹å™¨å†…åå­—ä¸å†™å®¹å™¨å¤–åå­—</span></span><br><span class="line">-v å®¹å™¨å†…è·¯å¾„</span><br><span class="line">docker run -d -P --name nginx01 -v /etc/nginx nginx</span><br><span class="line"><span class="meta"># </span><span class="language-bash">æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰çš„å·çš„æƒ…å†µï¼Œæ˜¾ç¤ºçš„æ˜¯æ²¡æœ‰åå­—çš„è¿™å°±æ˜¯åŒ¿åæŒ‚è½½</span></span><br><span class="line">docker volume ls</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">å…·åæŒ‚è½½</span></span><br><span class="line">docker run -d -P --name nginx02 -v juming-nginx:/etc/nginx nginx</span><br><span class="line">docker volume ls</span><br><span class="line"><span class="meta"># </span><span class="language-bash">å¯ä»¥çœ‹åˆ°æŒ‚è½½çš„åå­—ä¸º juming-nginx</span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">æŸ¥çœ‹è¿™ä¸ªå·çš„ä½ç½®</span></span><br><span class="line">docker volume inspect juming-nginx</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">        &quot;CreatedAt&quot;: &quot;2023-02-22T22:48:38+08:00&quot;,</span><br><span class="line">        &quot;Driver&quot;: &quot;local&quot;,</span><br><span class="line">        &quot;Labels&quot;: null,</span><br><span class="line">        &quot;Mountpoint&quot;: &quot;/var/lib/docker/volumes/juming-nginx/_data&quot;,  # æ­¤å‚æ•°ä¸ºæŒ‚è½½çš„ç›®å½•ä½ç½®</span><br><span class="line">        &quot;Name&quot;: &quot;juming-nginx&quot;,</span><br><span class="line">        &quot;Options&quot;: null,</span><br><span class="line">        &quot;Scope&quot;: &quot;local&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="meta"># </span><span class="language-bash">åœ¨æ²¡æœ‰æŒ‡å®šç›®å½•çš„æƒ…å†µä¸‹ï¼ŒåŸºæœ¬æ‰€æœ‰çš„å·éƒ½åœ¨è¿™ä¸ªä½ç½® /var/lib/docker/volumes/å·å/_data</span></span><br></pre></td></tr></table></figure>

<p>docker volume â€“help</p>
<p><strong>æ€»ç»“ï¼šæŒ‚è½½çš„æ–¹å¼æ€»å…±åˆ†ä¸ºä¸‰ç§ï¼ŒæŒ‡å®šè·¯å¾„æŒ‚è½½ã€åŒ¿åæŒ‚è½½ã€å…·åæŒ‚è½½</strong></p>
<p>å…¶ä»–ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">æŒ‚è½½ç›®å½•åé¢åŠ ä¸Š ro æˆ–è€… rw</span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">ro è¡¨ç¤º <span class="built_in">read</span> only åªè¯»</span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">rw è¡¨ç¤º <span class="built_in">read</span> write å¯è¯»å¯å†™</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">é»˜è®¤ä¸º rw</span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">è®¾ç½®çš„å®¹å™¨æƒé™ã€‚å¦‚æœæ˜¯ ro ï¼Œé‚£ä¹ˆåœ¨å®¹å™¨å†…éƒ¨æ˜¯åªè¯»çš„ï¼Œæ— æ³•æ”¹å˜ï¼Œåªèƒ½é€šè¿‡å®¿ä¸»æœºæ”¹å˜</span></span><br><span class="line">docker run -d -P --name nginx02 -v juming-nginx:/etc/nginx:ro nginx</span><br><span class="line">docker run -d -P --name nginx02 -v juming-nginx:/etc/nginx:rw nginx</span><br></pre></td></tr></table></figure>





<h2 id="2-DockerFile-æ„å»ºé•œåƒ"><a href="#2-DockerFile-æ„å»ºé•œåƒ" class="headerlink" title="2. DockerFile æ„å»ºé•œåƒ"></a>2. DockerFile æ„å»ºé•œåƒ</h2><p><strong>æŒ‚è½½æ–¹å¼äºŒ</strong>ï¼š</p>
<p>Dockerfile å°±æ˜¯ç”¨æ¥æ„å»º docker é•œåƒçš„æ„å»ºæ–‡ä»¶ï¼Œæ˜¯å‘½ä»¤è„šæœ¬ï¼Œé€šè¿‡è¿™ä¸ªè„šæœ¬å¯ä»¥ç”Ÿæˆé•œåƒï¼Œé•œåƒæ˜¯ä¸€å±‚ä¸€å±‚çš„ï¼Œè„šæœ¬æ˜¯ä¸€ä¸ªä¸€ä¸ªå‘½ä»¤ï¼Œæ¯ä¸ªå‘½ä»¤éƒ½æ˜¯ä¸€å±‚ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">1 æ–°å»ºä¸€ä¸ªdockerfile01æ–‡ä»¶ï¼Œç¼–è¾‘ï¼Œå†™å…¥å¦‚ä¸‹çš„å‘½ä»¤ï¼š</span></span><br><span class="line"></span><br><span class="line">FROM centos</span><br><span class="line"></span><br><span class="line">VOLUME [&quot;volume01&quot;,&quot;volume02&quot;]</span><br><span class="line"></span><br><span class="line">CMD echo &quot;----end----&quot;</span><br><span class="line">CMD /bin/bash</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">æ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œæˆ–è€…æŒ‡ä»¤éƒ½æ˜¯å¤§å†™çš„</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">2 docker build å‘½ä»¤æ„å»ºé•œåƒ</span></span><br><span class="line">docker build -f dockerfile01 -t abilish/centos:1.0 .</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">å¸¸ç”¨å‚æ•°</span></span><br><span class="line">-f   fileæ–‡ä»¶å</span><br><span class="line">-t   ç”Ÿæˆçš„é•œåƒåŠæ ‡ç­¾å Name and optionally a tag in the name:tag format</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">3 æ‰§è¡Œåå¯ä»¥çœ‹åˆ°æˆåŠŸç”Ÿæˆçš„é•œåƒ</span></span><br><span class="line">docker images</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">4 å¯åŠ¨é•œåƒ</span></span><br><span class="line">docker run -it afa669b6bce7 /bin/bash</span><br><span class="line">ls</span><br><span class="line"><span class="meta"># </span><span class="language-bash">å¯ä»¥çœ‹åˆ°å…¶ä¸­çš„ä¸¤ä¸ªç›®å½•ï¼švolume01ã€volume02ï¼Œè¿™ä¸¤ä¸ªç›®å½•å°±æ˜¯åˆšåˆšæŒ‚è½½çš„ç›®å½•</span></span><br><span class="line">docker inspect å®¹å™¨id</span><br><span class="line"><span class="meta"># </span><span class="language-bash">å¯ä»¥æŸ¥åˆ°ä¸»æœºä¸­æŒ‚è½½çš„ä½ç½®</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœåœ¨æ„å»ºé•œåƒæ—¶æ²¡æœ‰è®¾ç½®æŒ‚è½½ï¼Œé‚£ä¹ˆéœ€è¦åœ¨å¯åŠ¨é•œåƒæ—¶è®¾ç½® -v æŒ‚è½½å‚æ•°</p>
<h3 id="æ•°æ®å·å®¹å™¨"><a href="#æ•°æ®å·å®¹å™¨" class="headerlink" title="æ•°æ®å·å®¹å™¨"></a>æ•°æ®å·å®¹å™¨</h3><p>å¤šä¸ªå®¹å™¨ä¹‹é—´å®ç°æ•°æ®åŒæ­¥</p>
<p>è¢«æŒ‚è½½çš„å«åšçˆ¶å®¹å™¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">--volumes-from </span><br><span class="line"></span><br><span class="line">docker run -it --name docker01 abilish/centos:1.0</span><br><span class="line"><span class="meta"># </span><span class="language-bash">å¯åŠ¨ç¬¬äºŒä¸ªé•œåƒå¹¶è¿›è¡ŒæŒ‚è½½</span></span><br><span class="line">docker run -it --name docker02 --volumes-from docker01  abilish/centos:1.0</span><br><span class="line"><span class="meta"># </span><span class="language-bash">volume01ã€volume02 é•œåƒä¹‹é—´ä¼šåŒæ­¥æ›´æ–°</span></span><br><span class="line">docker run -it --name docker03 --volumes-from docker01  abilish/centos:1.0</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">åœæ­¢çˆ¶å®¹å™¨ï¼Œåœ¨å…¶ä»–å®¹å™¨ä¸­ï¼ˆdocker02ã€docker03ï¼‰æŒ‚è½½ç›®å½•ä¾æ—§åŒæ­¥ï¼Œ</span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">å…¶ä»–çš„å®¹å™¨ä¸­ä¹‹å‰åˆ›å»ºçš„æ–‡ä»¶ä¸ä¼šæ¶ˆå¤±</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">åˆ é™¤çˆ¶å®¹å™¨ï¼Œdocker02ã€docker03 ä¹‹é—´æŒ‚è½½ç›®å½•çš„æ•°æ®ä¾æ—§æ—¶åŒæ­¥çš„</span></span><br><span class="line">docker rm -f docker01</span><br></pre></td></tr></table></figure>



<p>é—®é¢˜(å¾…è§£å†³)ï¼šå¦‚æœä¸¤ä¸ªå®¹å™¨æœ‰ä¸åŒæ•°é‡çš„æŒ‚è½½ç›®å½•å‘¢ï¼Ÿå¦‚æœæŒ‚è½½ä¹‹å‰æ¯ä¸ªå®¹å™¨ä¸­æœ‰ä¸åŒçš„æ•°æ®ï¼Œèƒ½åˆå¹¶å—ï¼Ÿ</p>
<p>åŒç†ï¼Œmysqlä¸­ä¹Ÿå°±å¯ä»¥å®ç°æ•°æ®åŒæ­¥äº†</p>
<p>å®¹å™¨ä¹‹é—´é…ç½®ä¿¡æ¯çš„ä¼ é€’ï¼Œæ•°æ®å·å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸä¸€ç›´æŒç»­åˆ°æ²¡æœ‰å®¹å™¨ä½¿ç”¨ä¸ºæ­¢</p>
<p>ä½†æ˜¯ä¸€ä½†æŒä¹…åŒ–åˆ°äº†æœ¬åœ°ï¼Œå°±å¯ä»¥æŒä¹…åŒ–ä¿å­˜äº†</p>
<h3 id="DockerFile"><a href="#DockerFile" class="headerlink" title="DockerFile"></a>DockerFile</h3><p><strong>æ¦‚å¿µ</strong>ï¼šdockerfile æ˜¯ç”¨æ¥æ„å»ºdockeré•œåƒçš„æ–‡ä»¶ï¼Œå‘½ä»¤å‚æ•°è„šæœ¬</p>
<p>æ„å»ºæ­¥éª¤ï¼š</p>
<p>1ã€ç¼–å†™ä¸€ä¸ª dockerfile æ–‡ä»¶</p>
<p>2ã€docker build æ„å»ºæˆä¸ºä¸€ä¸ªé•œåƒ</p>
<p>3ã€docker run è¿è¡Œé•œåƒ</p>
<p>4ã€docker push å‘å¸ƒé•œåƒï¼ˆDockerHubæˆ–è€…é˜¿é‡Œäº‘é•œåƒåº“ï¼‰</p>
<p>centosä¸ºä¾‹ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://github.com/CentOS/sig-cloud-instance-images/blob/b2d195220e1c5b181427c3172829c23ab9cd27eb/docker/Dockerfile">sig-cloud-instance-images/Dockerfile at b2d195220e1c5b181427c3172829c23ab9cd27eb Â· CentOS/sig-cloud-instance-images (github.com)</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">FROM scratch</span><br><span class="line">ADD centos-7-x86_64-docker.tar.xz /</span><br><span class="line"></span><br><span class="line">LABEL \</span><br><span class="line">    org.label-schema.schema-version=&quot;1.0&quot; \</span><br><span class="line">    org.label-schema.name=&quot;CentOS Base Image&quot; \</span><br><span class="line">    org.label-schema.vendor=&quot;CentOS&quot; \</span><br><span class="line">    org.label-schema.license=&quot;GPLv2&quot; \</span><br><span class="line">    org.label-schema.build-date=&quot;20201113&quot; \</span><br><span class="line">    org.opencontainers.image.title=&quot;CentOS Base Image&quot; \</span><br><span class="line">    org.opencontainers.image.vendor=&quot;CentOS&quot; \</span><br><span class="line">    org.opencontainers.image.licenses=&quot;GPL-2.0-only&quot; \</span><br><span class="line">    org.opencontainers.image.created=&quot;2020-11-13 00:00:00+00:00&quot;</span><br><span class="line"></span><br><span class="line">CMD [&quot;/bin/bash&quot;]</span><br></pre></td></tr></table></figure>

<p>å¤§å¤šæ•°å®˜æ–¹çš„é•œåƒéƒ½æ˜¯åŸºç¡€åŒ…ï¼Œç”¨æˆ·éœ€è¦è‡ªå®šä¹‰æ­å»ºé•œåƒ</p>
<h3 id="DockerFile-æ„å»ºè¿‡ç¨‹åŠæŒ‡ä»¤"><a href="#DockerFile-æ„å»ºè¿‡ç¨‹åŠæŒ‡ä»¤" class="headerlink" title="DockerFile æ„å»ºè¿‡ç¨‹åŠæŒ‡ä»¤"></a>DockerFile æ„å»ºè¿‡ç¨‹åŠæŒ‡ä»¤</h3><p>åŸºç¡€çŸ¥è¯†ï¼š</p>
<p>1ã€æ¯ä¸ªä¿ç•™å…³é”®å­—(æŒ‡ä»¤)éƒ½å¿…é¡»æ˜¯å¤§å†™å­—æ¯</p>
<p>2ã€æ‰§è¡Œä»ä¸Šåˆ°ä¸‹é¡ºåºæ‰§è¡Œ</p>
<p>3ã€# è¡¨ç¤ºæ³¨é‡Š</p>
<p>4ã€æ¯ä¸€ä¸ªæŒ‡ä»¤éƒ½ä¼šåˆ›å»ºæäº¤ä¸€ä¸ªæ–°çš„é•œåƒå±‚</p>
<p>DockerFile æ˜¯é¢å‘å¼€å‘çš„ï¼Œç”¨æ¥å‘å¸ƒé¡¹ç›®ï¼Œåšé•œåƒ</p>
<p><strong>æŒ‡ä»¤</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">FROM        # åŸºç¡€é•œåƒ</span><br><span class="line">MAINTAINER  # é•œåƒæ˜¯è°å†™çš„ï¼Œç»´æŠ¤è€…ä¿¡æ¯ï¼Œå§“å+é‚®ç®±</span><br><span class="line">RUN         # é•œåƒæ„å»ºçš„æ—¶å€™éœ€è¦è¿è¡Œçš„å‘½ä»¤</span><br><span class="line">ADD         # æ­¥éª¤ï¼Œtomcaté•œåƒï¼Œä¸Šä¼ å‹ç¼©åŒ…ï¼Œä¼šè‡ªåŠ¨è§£å‹</span><br><span class="line">WORKDIR     # é•œåƒçš„å·¥ä½œç›®å½•</span><br><span class="line">VOLUME      # æŒ‚è½½çš„ç›®å½•</span><br><span class="line">EXPOSE      # æŒ‡å®šç«¯å£ï¼Œè¿™é‡Œå†™äº†å°±ä¸ç”¨æŒ‡å®š -p äº†</span><br><span class="line">CMD         # æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œæ˜¯æ›¿æ¢å‘½ä»¤è¡Œä¸­çš„å‘½ä»¤</span><br><span class="line">ENTRYPOINT  # æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œæ˜¯åœ¨å‘½ä»¤è¡Œå‘½ä»¤åè¿½åŠ å‘½ä»¤</span><br><span class="line">ONBUILD     # å½“æ„å»ºä¸€ä¸ªè¢«ç»§æ‰¿ DockerFile è¿™ä¸ªæ—¶å€™å°±ä¼šè¿è¡Œ ONBUILD çš„æŒ‡ä»¤ï¼Œè§¦å‘æŒ‡ä»¤ã€‚</span><br><span class="line">COPY        # ç±»ä¼¼ ADD ï¼Œå°†æˆ‘ä»¬æ–‡ä»¶æ‹·è´åˆ°é•œåƒä¸­</span><br><span class="line">ENV         # æ„å»ºçš„æ—¶å€™è®¾ç½®ç¯å¢ƒå˜é‡</span><br></pre></td></tr></table></figure>





<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">æŸ¥çœ‹æ„å»ºå†å²</span></span><br><span class="line">docker history é•œåƒid</span><br></pre></td></tr></table></figure>



<h4 id="CMD-å’Œ-ENTRYPOINT-çš„åŒºåˆ«"><a href="#CMD-å’Œ-ENTRYPOINT-çš„åŒºåˆ«" class="headerlink" title="CMD å’Œ ENTRYPOINT çš„åŒºåˆ«"></a>CMD å’Œ ENTRYPOINT çš„åŒºåˆ«</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">CMD         # æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œæ˜¯æ›¿æ¢å‘½ä»¤è¡Œä¸­çš„å‘½ä»¤</span><br><span class="line">ENTRYPOINT  # æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œæ˜¯åœ¨å‘½ä»¤è¡Œå‘½ä»¤åè¿½åŠ å‘½ä»¤</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">vim dockerfile-cmd-test</span><br><span class="line"></span><br><span class="line">FROM centos</span><br><span class="line">CMD [&quot;ls&quot;, &quot;-a&quot;]</span><br><span class="line"></span><br><span class="line">docker build -f dockerfile-cmd-test -t cmdtest .</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">run è¿™ä¸ªå®¹å™¨åä¼šè¾“å‡ºå½“å‰ç›®å½•ï¼Œè¿™æ˜¯å› ä¸ºDockerFileä¸­å¢åŠ äº†CMDå‘½ä»¤</span></span><br><span class="line">docker run cmdtest</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">å¦‚æœåœ¨runæ—¶å¢åŠ -lå‚æ•°ï¼Œ-lä¼šæ›¿æ¢ CMD [<span class="string">&quot;ls&quot;</span>, <span class="string">&quot;-a&quot;</span>] å‘½ä»¤ï¼Œ-lä¸æ˜¯å‘½ä»¤æ‰€ä»¥ä¼šæŠ¥é”™</span></span><br><span class="line">docker run cmdtest -l</span><br><span class="line"><span class="meta"># </span><span class="language-bash">æ­£ç¡®çš„æ–¹å¼ä¸ºï¼š</span></span><br><span class="line">docker run cmdtest ls -al</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">vim dockerfile-cmd-entrypoint</span><br><span class="line"></span><br><span class="line">FROM centos</span><br><span class="line">ENTRYPOINT [&quot;ls&quot;, &quot;-a&quot;]</span><br><span class="line"></span><br><span class="line">docker build -f dockerfile-cmd-entrypoint -t entorypoint-test .</span><br><span class="line"><span class="meta"># </span><span class="language-bash">å¯ä»¥æ‰§è¡ŒæˆåŠŸï¼Œå¹¶ä¸”è¾“å‡º <span class="built_in">ls</span> -al çš„ç»“æœ</span></span><br><span class="line">docker run b40785390900 -l</span><br></pre></td></tr></table></figure>







<p><strong>DockerFile</strong> ï¼šæ„å»ºæ–‡ä»¶ï¼Œå®šä¹‰äº†ä¸€åˆ‡çš„æ­¥éª¤ï¼Œæºä»£ç </p>
<p><strong>DockerImages</strong> ï¼šé€šè¿‡ DockerFile æ„å»ºç”Ÿæˆçš„é•œåƒï¼Œæœ€ç»ˆå‘å¸ƒå’Œè¿è¡Œçš„äº§å“</p>
<p><strong>Dockerå®¹å™¨</strong> ï¼šå®¹å™¨æ˜¯é•œåƒè¿è¡Œèµ·æ¥æä¾›æœåŠ¡çš„</p>
<h2 id="3-Docker-ç½‘ç»œåŸç†"><a href="#3-Docker-ç½‘ç»œåŸç†" class="headerlink" title="3.Docker ç½‘ç»œåŸç†"></a>3.Docker ç½‘ç»œåŸç†</h2><h3 id="Docker0"><a href="#Docker0" class="headerlink" title="Docker0"></a>Docker0</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">æŸ¥çœ‹ç½‘å¡</span></span><br><span class="line">ip addr</span><br><span class="line">ç»“æœï¼š</span><br><span class="line">lo æœ¬æœºå›ç¯åœ°å€</span><br><span class="line">eth0 å†…ç½‘åœ°å€</span><br><span class="line">docker0 dockerç½‘å¡åœ°å€ï¼Œæ¡¥æ¥æ¨¡å¼ï¼Œä½¿ç”¨çš„æŠ€æœ¯æ˜¯ veth-pair æŠ€æœ¯</span><br></pre></td></tr></table></figure>

<p>Docker ä¸­çš„ç½‘ç»œè®¿é—®</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it tomcat_net ip addr</span><br><span class="line"></span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">76: eth0@if77: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default </span><br><span class="line">    link/ether 02:42:ac:11:00:02 brd ff:ff:ff:ff:ff:ff link-netnsid 0</span><br><span class="line">    inet 172.17.0.2/16 brd 172.17.255.255 scope global eth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">       </span><br><span class="line"><span class="meta"># </span><span class="language-bash">å¯ä»¥çœ‹åˆ°å®¹å™¨å¯åŠ¨çš„æ—¶å€™ä¼šå¾—åˆ°ä¸€ä¸ª eth0@  çš„ipåœ°å€ï¼Œè¿™æ˜¯dockersåˆ†é…çš„ipåœ°å€ã€‚</span></span><br><span class="line">ping 172.17.0.2</span><br><span class="line"><span class="meta"># </span><span class="language-bash">Linuxæ˜¯å¯ä»¥pingé€šdockerå®¹å™¨å†…éƒ¨çš„</span></span><br><span class="line">å®¹å™¨å¸¦æ¥çš„ç½‘å¡éƒ½æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œveth-pair æŠ€æœ¯ï¼Œæ˜¯ä¸€å¯¹çš„è™šæ‹Ÿè®¾å¤‡æ¥å£ï¼Œä¸€ç«¯è¿ç€åè®®ï¼Œä¸€ç«¯å½¼æ­¤ç›¸è¿ã€‚veth-pair å……å½“ä¸€ä¸ªæ¡¥æ¢ï¼Œè¿æ¥å„ç§è™šæ‹Ÿç½‘ç»œè®¾å¤‡çš„ã€‚</span><br><span class="line"><span class="meta"># </span><span class="language-bash">ä¸åŒå®¹å™¨ä¹‹å‰æ˜¯å¯ä»¥äº’ç›¸pingé€šçš„</span></span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">docker0 ç›¸å½“äºæ˜¯è·¯ç”±å™¨ï¼Œè½¬å‘æ¶ˆæ¯ï¼Œä¸åŒå®¹å™¨å…±ç”¨ä¸€ä¸ªè·¯ç”±å™¨</span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">æ‰€æœ‰çš„å®¹å™¨ä¸æŒ‡å®šç½‘ç»œçš„æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯ docker0 è·¯ç”±çš„ï¼Œdockerä¼šç»™æˆ‘ä»¬çš„å®¹å™¨åˆ†é…ä¸€ä¸ªé»˜è®¤çš„å¯ç”¨ IP</span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">åªè¦å®¹å™¨åˆ é™¤ï¼Œå¯¹åº”çš„ç½‘æ¡¥å°±æ²¡äº†</span></span><br><span class="line"></span><br><span class="line">255.255.0.1/16</span><br><span class="line"></span><br><span class="line">æ­£å¸¸çš„åœ°å€ï¼š00000000.00000000.00000000.00000000</span><br><span class="line">åè¿›åˆ¶ï¼š255.255.255.255</span><br><span class="line">ä¸€ä¸ªè·¯ç”±ä¸‹ï¼š255.255.0.0  255*255-0.0.0.0(å›ç¯åœ°å€)-255.255.255.255(æœ€ç»ˆåœ°å€)=65535</span><br><span class="line"></span><br><span class="line">255.255.0.1/24  åŸŸ å±€åŸŸç½‘ï¼Œä¸€èˆ¬å°æ•™å®¤æ˜¯24ï¼Œå…¬å¸æ˜¯16</span><br></pre></td></tr></table></figure>



<p><img src="Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/1677513000633.png" alt="1677513000633"></p>
<h3 id="å®¹å™¨äº’è”"><a href="#å®¹å™¨äº’è”" class="headerlink" title="å®¹å™¨äº’è”"></a>å®¹å™¨äº’è”</h3><h4 id="â€“link-ï¼ˆå…¥é—¨äº’è”-é€šè¿‡åå­—pingé€šä¸¤ä¸ªå®¹å™¨ï¼‰"><a href="#â€“link-ï¼ˆå…¥é—¨äº’è”-é€šè¿‡åå­—pingé€šä¸¤ä¸ªå®¹å™¨ï¼‰" class="headerlink" title="â€“link ï¼ˆå…¥é—¨äº’è” é€šè¿‡åå­—pingé€šä¸¤ä¸ªå®¹å™¨ï¼‰"></a>â€“link ï¼ˆå…¥é—¨äº’è” é€šè¿‡åå­—pingé€šä¸¤ä¸ªå®¹å™¨ï¼‰</h4><p>å¯åŠ¨ä¸¤ä¸ªtomcatï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -P --name tomcat01 tomcat</span><br><span class="line">docker run -d -P --name tomcat02 tomcat</span><br></pre></td></tr></table></figure>

<p>ç›´æ¥é€šè¿‡åå­—pingæ˜¯æ— æ³•pingé€šçš„</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it tomcat02 ping tomcat01</span><br><span class="line">OCI runtime exec failed: exec failed: unable to start container process: exec: &quot;ping&quot;: executable file not found in $PATH: unknown</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºå®¹å™¨æ—¶é€šè¿‡ â€“link å‚æ•°æ¥ link å¦ä¸€ä¸ªå®¹å™¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -P --name tomcat03 --link tomcat02 tomcat</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ <code>--link</code> å‚æ•°å»ºç«‹è¿æ¥åï¼Œåªèƒ½ä»03çš„æ–¹å‘ping 02ï¼Œ<strong>åè¿‡æ¥æ˜¯pingä¸é€šçš„</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it tomcat03 ping tomcat02</span><br></pre></td></tr></table></figure>

<p>å¦‚æœåœ¨å®¹å™¨å¯åŠ¨æ—¶è¿›è¡Œäº†linkï¼Œä½†è¢«linkçš„å®¹å™¨åˆ é™¤æ‰ï¼Œå³ä½¿å†åˆ›å»ºä¸€ä¸ªåŒåçš„å®¹å™¨ä¹Ÿæ˜¯æ— æ³•pingé€šçš„</p>
<p>docker network å‘½ä»¤</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">docker network -help</span><br><span class="line">docker network ls</span><br><span class="line">NETWORK ID     NAME      DRIVER    SCOPE</span><br><span class="line">d50b0dcbbc57   bridge    bridge    local</span><br><span class="line">eeea9a40175b   host      host      local</span><br><span class="line">8460731336c8   none      null      local</span><br><span class="line"><span class="meta"># </span><span class="language-bash">æŸ¥çœ‹ç½‘ç»œä¿¡æ¯</span></span><br><span class="line">docker network inspect d50b0dcbbc57</span><br><span class="line"><span class="meta"># </span><span class="language-bash">ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å¯ä»¥æ‰¾åˆ° <span class="string">&quot;Links&quot;</span> å‚æ•°ï¼Œå­˜æ”¾äº†<span class="built_in">link</span>çš„ä¿¡æ¯</span></span><br><span class="line">docker inspect å®¹å™¨id</span><br><span class="line"><span class="meta"># </span><span class="language-bash">æˆ–è€…é€šè¿‡ç¬¬äºŒç§æ–¹å¼æŸ¥çœ‹ï¼Œåœ¨hostsæ–‡ä»¶ä¸­å¢åŠ äº†ä¸€ä¸ªæ˜ å°„</span></span><br><span class="line">docker exec -it tomcat03 cat /etc/hosts</span><br><span class="line">...</span><br><span class="line">172.17.0.5	tomcat02 606ae16ac1bd</span><br><span class="line">...</span><br></pre></td></tr></table></figure>



<h4 id="è‡ªå®šä¹‰ç½‘ç»œ-é«˜çº§äº’è”"><a href="#è‡ªå®šä¹‰ç½‘ç»œ-é«˜çº§äº’è”" class="headerlink" title="è‡ªå®šä¹‰ç½‘ç»œ(é«˜çº§äº’è”)"></a>è‡ªå®šä¹‰ç½‘ç»œ(é«˜çº§äº’è”)</h4><p>æŸ¥çœ‹æ‰€æœ‰çš„ç½‘ç»œ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network ls</span><br></pre></td></tr></table></figure>



<h5 id="ç½‘ç»œæ¨¡å¼"><a href="#ç½‘ç»œæ¨¡å¼" class="headerlink" title="ç½‘ç»œæ¨¡å¼"></a><strong>ç½‘ç»œæ¨¡å¼</strong></h5><p><img src="Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/1678017716675.png" alt="1678017716675"></p>
<p>**bridge(æ¡¥æ¥æ¨¡å¼)**ï¼šæ­æ¡¥ï¼Œé€šè¿‡ 0.1 å¯ä»¥è®¿é—® 0.2 å’Œ 0.3 ï¼Œ0.1èµ·åˆ°è½¬å‘çš„ä½œç”¨ã€‚dockeré»˜è®¤ä½¿ç”¨æ¡¥æ¥æ¨¡å¼ï¼Œè‡ªå·±åˆ›å»ºçš„ç½‘ç»œä¹Ÿä½¿ç”¨æ¡¥æ¥æ¨¡å¼</p>
<p><strong>none(ä¸é…ç½®ç½‘ç»œ)</strong></p>
<p>**host(ä¸»æœºæ¨¡å¼)**ï¼šå’Œå®¿ä¸»æœºå…±äº«ç½‘ç»œ</p>
<p>container(å®¹å™¨å†…ç½‘ç»œè¿é€š)ï¼šç”¨çš„è¾ƒå°‘ï¼Œå±€é™å¾ˆå¤§</p>
<h5 id="é»˜è®¤ç½‘ç»œ"><a href="#é»˜è®¤ç½‘ç»œ" class="headerlink" title="é»˜è®¤ç½‘ç»œ"></a>é»˜è®¤ç½‘ç»œ</h5><p>ç›´æ¥å¯åŠ¨æ—¶æ—¶å¯ä»¥æŒ‡å®šå‚æ•°ï¼Œbridge å°±æ˜¯docker0çš„ç½‘ç»œ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -P --name tomcat01 --net bridge diytomcat</span><br></pre></td></tr></table></figure>

<p>docker0çš„ç‰¹ç‚¹ï¼š</p>
<ol>
<li>â€“net é»˜è®¤èµ°docker0</li>
<li>åŸŸåä¸èƒ½è®¿é—®ï¼Œâ€“linkå¯ä»¥æ‰“é€šè¿æ¥</li>
</ol>
<h5 id="è‡ªå®šä¹‰ç½‘ç»œ"><a href="#è‡ªå®šä¹‰ç½‘ç»œ" class="headerlink" title="è‡ªå®šä¹‰ç½‘ç»œ"></a>è‡ªå®šä¹‰ç½‘ç»œ</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">docker network create --driver bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 mynet</span><br><span class="line"><span class="meta"># </span><span class="language-bash">å¸¸ç”¨å‚æ•°</span></span><br><span class="line">--driver: æŒ‡å®šç½‘ç»œæ¨¡å¼ï¼Œbridge æ¡¥æ¥æ¨¡å¼</span><br><span class="line">--subnetï¼šå­ç½‘ï¼Œ192.168.0.0/16ï¼Œ16æ—¶65535ä¸ªå­ç½‘ï¼Œå¦‚æœä¸º24ï¼Œé‚£ä¹ˆåªèƒ½åˆ›å»º255ä¸ª</span><br><span class="line">--gatewayï¼šæŒ‡å®šç½‘å…³ï¼Œä»å“ªé‡Œå‡ºå»</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash"><span class="built_in">ls</span>æŸ¥çœ‹ä¸€ä¸‹ï¼Œå³å¯çœ‹åˆ°åˆ›å»ºçš„ç½‘ç»œ mynet</span></span><br><span class="line">docker network ls</span><br><span class="line">2e4276da5434   mynet     bridge    local</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">å¯åŠ¨ä¸€ä¸ªä½¿ç”¨è‡ªå®šä¹‰ç½‘ç»œçš„å®¹å™¨</span></span><br><span class="line">docker run -d -P --name tomcat-net-01 --net mynet diytomcat</span><br><span class="line">docker run -d -P --name tomcat-net-02 --net mynet diytomcat</span><br><span class="line"><span class="meta"># </span><span class="language-bash">æŸ¥çœ‹ç½‘ç»œçŠ¶æ€</span></span><br><span class="line">docker network inspect mynet</span><br><span class="line"><span class="meta"># </span><span class="language-bash">ä½¿ç”¨è‡ªå®šä¹‰çš„ç½‘ç»œæ˜¯å¯ä»¥ ping é€šçš„</span> </span><br><span class="line">docker exec -it tomcat-net-01 ping tomcat-net-02</span><br><span class="line">docker exec -it tomcat-net-02 ping tomcat-net-01</span><br></pre></td></tr></table></figure>

<p>è‡ªå®šä¹‰çš„ç½‘ç»œdocker0å·²ç»ç»´æŠ¤å¥½äº†å¯¹åº”çš„å…³ç³»ï¼ŒåŠŸèƒ½æ›´åŠ å®Œå–„ï¼Œæ— éœ€æŒ‡å®šâ€“linkå‚æ•°ã€‚</p>
<p>ä¸åŒçš„é›†ç¾¤ä½¿ç”¨ä¸åŒçš„ç½‘ç»œï¼Œä¿è¯é›†ç¾¤æ˜¯å®‰å…¨å’Œå¥åº·çš„</p>
<h4 id="ç½‘ç»œè¿é€š"><a href="#ç½‘ç»œè¿é€š" class="headerlink" title="ç½‘ç»œè¿é€š"></a>ç½‘ç»œè¿é€š</h4><p>åœ¨<code>docker0</code>ç½‘ç»œä¸­å¯åŠ¨ä¸¤ä¸ªå®¹å™¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -P --name tomcat1 diytomcat</span><br><span class="line">docker run -d -P --name tomcat2 diytomcat</span><br></pre></td></tr></table></figure>

<p>è¿æ¥å®¹å™¨<code>tomcat1</code>åˆ°ç½‘ç»œ<code>mynet</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network connect mynet tomcat1</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶ï¼Œä¸¤ä¸ªæ–¹å‘æ¥pingæ˜¯å¯ä»¥pingé€šçš„äº†</p>
<p>å®é™…ä¸Šï¼Œtomcat1æ˜¯è¢«åŠ å…¥åˆ°äº†mynetç½‘ç»œä¸­ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªå®¹å™¨ä¸¤ä¸ªipåœ°å€</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network inspect mynet</span><br></pre></td></tr></table></figure>





<h2 id="4-IDEA-æ•´åˆ-Docker"><a href="#4-IDEA-æ•´åˆ-Docker" class="headerlink" title="4.IDEA æ•´åˆ Docker"></a>4.IDEA æ•´åˆ Docker</h2><h2 id="5-Docker-Compose-é›†ç¾¤ç®¡ç†"><a href="#5-Docker-Compose-é›†ç¾¤ç®¡ç†" class="headerlink" title="5.Docker Compose  é›†ç¾¤ç®¡ç†"></a>5.Docker Compose  é›†ç¾¤ç®¡ç†</h2><h2 id="6-Docker-Swarm-å®¹å™¨ç¼–æ’"><a href="#6-Docker-Swarm-å®¹å™¨ç¼–æ’" class="headerlink" title="6. Docker Swarm å®¹å™¨ç¼–æ’"></a>6. Docker Swarm å®¹å™¨ç¼–æ’</h2><h2 id="7-CI-CD-jenkins"><a href="#7-CI-CD-jenkins" class="headerlink" title="7.CI/CD jenkins"></a>7.CI/CD jenkins</h2><h1 id="å››ã€æ·±å…¥ç†è§£Docker"><a href="#å››ã€æ·±å…¥ç†è§£Docker" class="headerlink" title="å››ã€æ·±å…¥ç†è§£Docker"></a>å››ã€æ·±å…¥ç†è§£Docker</h1><h3 id="è¯»æ–‡æ¡£"><a href="#è¯»æ–‡æ¡£" class="headerlink" title="è¯»æ–‡æ¡£"></a>è¯»æ–‡æ¡£</h3><p>1ã€</p>
<p><img src="Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/1674740418153.png" alt="1674740418153"></p>
<p><strong>docker layer æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p><a target="_blank" rel="noopener" href="https://naiveskill.com/docker-layer/#:~:text=The%20layer%20in%20a%20dockerfile%20is%20the%20intermediate,layer%20represents%20an%20instruction%20in%20the%20Dockerfile%20image.">What is docker layer? importance of docker layer while creating Dockerfile (naiveskill.com)</a></p>
<p>çœ‹å®Œè¿™ç¯‡æ–‡ç« åæˆ‘çš„ç®€å•ç†è§£ï¼šdocker layer æ˜¯ dockerfiles åˆ›å»ºæ—¶çš„æ¯ä¸€å±‚ï¼Œæ¯ä¸€å±‚å¯¹åº”å®Œæˆfockerfilesçš„ä¸€ä¸ªåŠ¨ä½œï¼Œdockerfilesæ€»çš„æ¥çœ‹åˆ†æˆäº†ä¸¤ä¸ªåŠ¨ä½œï¼š<strong>base image</strong>ï¼›<strong>åŸºäºbase imageçš„layers</strong></p>
<p><img src="Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/1674740633100.png" alt="1674740633100"></p>
<p>å±‚æ•°è¶Šå¤šï¼Œæ‰€å ç”¨çš„ç©ºé—´å°±è¶Šå¤šï¼Œå› æ­¤å¯ä»¥é€šè¿‡å‡å°‘å±‚æ•°æ¥é™ä½æ‰€å ç”¨çš„ç©ºé—´</p>
<h1 id="äº”ã€é¡¹ç›®ç»ƒä¹ "><a href="#äº”ã€é¡¹ç›®ç»ƒä¹ " class="headerlink" title="äº”ã€é¡¹ç›®ç»ƒä¹ "></a>äº”ã€é¡¹ç›®ç»ƒä¹ </h1><h2 id="1-Docker-éƒ¨ç½²Nginx"><a href="#1-Docker-éƒ¨ç½²Nginx" class="headerlink" title="1 Docker éƒ¨ç½²Nginx"></a><strong>1 Docker éƒ¨ç½²Nginx</strong></h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">1 æœç´¢nginxï¼š a.docker search   b.åˆ° docker hub ä¸Šæœç´¢</span></span><br><span class="line">https://hub.docker.com/_/nginx</span><br><span class="line">docker pull nginx</span><br><span class="line"><span class="meta"># </span><span class="language-bash">æœåŠ¡å™¨å¼€æ”¾3344ç«¯å£ï¼Œå®¹å™¨å†…åœ¨80ç«¯å£ï¼Œé€šè¿‡å…¬ç½‘3344å¯ä»¥è®¿é—®åˆ°å®¹å™¨å†…éƒ¨</span></span><br><span class="line">docker run -d --name nginx01 -p 3344:80 nginx</span><br><span class="line"><span class="meta"># </span><span class="language-bash">è¿è¡Œæµ‹è¯•</span></span><br><span class="line">curl localhost:3344</span><br><span class="line"><span class="meta"># </span><span class="language-bash">è¿›å…¥å®¹å™¨</span></span><br><span class="line">docker exec -it nginx01 /bin/bash</span><br><span class="line"><span class="meta"># </span><span class="language-bash">æ‰¾nginxçš„é…ç½®æ–‡ä»¶ä½ç½®(æœ‰å¾ˆå¤šï¼Œéƒ½æ˜¯åšä»€ä¹ˆçš„å‘¢ï¼Ÿ)</span></span><br><span class="line">whereis nginx</span><br><span class="line">cd /etc/nginx</span><br><span class="line"><span class="meta"># </span><span class="language-bash">å…¶ä¸­ nginx.conf ä½¿nginxçš„é…ç½®æ–‡ä»¶</span></span><br></pre></td></tr></table></figure>



<p>é—®é¢˜ï¼šæ¯æ¬¡æ”¹åŠ¨nginxé…ç½®æ–‡ä»¶éƒ½ä¸€å®šéœ€è¦è¿›å…¥å®¹å™¨å—ï¼Ÿâ€”&gt;æ•°æ®å·</p>
<h2 id="2-ä½¿ç”¨dockeræ¥è£…ä¸€ä¸ªtomcat"><a href="#2-ä½¿ç”¨dockeræ¥è£…ä¸€ä¸ªtomcat" class="headerlink" title="2 ä½¿ç”¨dockeræ¥è£…ä¸€ä¸ªtomcat"></a><strong>2 ä½¿ç”¨dockeræ¥è£…ä¸€ä¸ªtomcat</strong></h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --rm tomcat:9.0</span><br><span class="line"><span class="meta"># </span><span class="language-bash">--<span class="built_in">rm</span>å‚æ•°ï¼Œç”¨å®Œå³åˆ </span></span><br><span class="line"></span><br><span class="line">docker pull tomcat</span><br><span class="line">docker run -d -p 8080:8080 tomcat:latest</span><br><span class="line"><span class="meta"># </span><span class="language-bash">æŒ‡å®šå¼€æ”¾çš„ç«¯å£åï¼Œå¤–ç½‘å¯ä»¥è®¿é—®åˆ°ï¼Œä½†æç¤º404ï¼Œå› ä¸ºå®˜æ–¹æ‰€ç»™çš„tomcatä¸æ˜¯å®Œæ•´ç‰ˆ</span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">è¿›å…¥å®¹å™¨</span></span><br><span class="line">docker exec -it b9b74f7a705d /bin/bash</span><br><span class="line"><span class="meta"># </span><span class="language-bash">å‘ç°é—®é¢˜ï¼š1 Linuxå‘½ä»¤å°‘äº†  2 æ²¡æœ‰webapps</span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">é˜¿é‡Œäº‘é•œåƒåŸå› ï¼Œé»˜è®¤ä¸ºæœ€å°é•œåƒï¼Œæ‰€æœ‰ä¸å¿…è¦çš„éƒ½å‰”é™¤æ‰</span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">å°†webapps.dist å¤åˆ¶è¿‡å»å°±å¯ä»¥è®¿é—®äº†</span></span><br><span class="line">cp -r webapps.dist/* webapps</span><br></pre></td></tr></table></figure>



<h2 id="3-éƒ¨ç½²-es-kibana"><a href="#3-éƒ¨ç½²-es-kibana" class="headerlink" title="3 éƒ¨ç½² es + kibana"></a><strong>3 éƒ¨ç½² es + kibana</strong></h2><p><a target="_blank" rel="noopener" href="https://hub.docker.com/_/elasticsearch">elasticsearch - Official Image | Docker Hub</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">es æš´éœ²çš„ç«¯å£å¾ˆå¤š</span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">es ååˆ†è€—å†…å­˜</span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">es çš„æ•°æ®ä¸€èˆ¬è¦æ”¾åœ¨å®‰å…¨ç›®å½•ï¼ŒæŒ‚è½½</span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">--net somenetwork ç½‘ç»œé…ç½®</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">å¯åŠ¨</span></span><br><span class="line">å®Œæ•´ç‰ˆå‘½ä»¤ï¼šdocker run -d --name elasticsearch --net somenetwork -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; elasticsearch:tag</span><br><span class="line"></span><br><span class="line">docker run -d --name elasticsearch -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; elasticsearch:8.6.1</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">éªŒè¯å®‰è£…æˆåŠŸ</span></span><br><span class="line">curl localhost:9200</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">æŸ¥çœ‹cpuçŠ¶æ€</span></span><br><span class="line">docker stats</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">è¿‡äºå ç”¨å†…å­˜ï¼Œç›´æ¥å¡æ­»äº†ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œ-eä¿®æ”¹ç¯å¢ƒ</span></span><br><span class="line">docker run -d --name elasticsearch02 -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; -e ES_JAVA_OPTS=&quot;-Xms64m -Xmx512m&quot; elasticsearch:8.6.1</span><br></pre></td></tr></table></figure>



<h2 id="4-å®‰è£…å¹¶æŒ‚è½½mysql"><a href="#4-å®‰è£…å¹¶æŒ‚è½½mysql" class="headerlink" title="4 å®‰è£…å¹¶æŒ‚è½½mysql"></a><strong>4 å®‰è£…å¹¶æŒ‚è½½mysql</strong></h2><p><a target="_blank" rel="noopener" href="https://hub.docker.com/_/mysql">mysql - Official Image | Docker Hub</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">1 æ‹‰å–é•œåƒ</span></span><br><span class="line">docker pull mysql:5.7</span><br><span class="line"><span class="meta"># </span><span class="language-bash">2 æŒ‚è½½é•œåƒï¼Œæ³¨æ„mysqléœ€è¦è®¾ç½®å¯†ç </span></span><br><span class="line">docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag</span><br><span class="line"><span class="meta"># </span><span class="language-bash">å¢åŠ å¤šä¸ªæŒ‚è½½ç‰ˆæœ¬çš„å‘½ä»¤</span></span><br><span class="line">docker run -d -p 3310:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 --name mysql01 mysql:5.7</span><br><span class="line"><span class="meta"># </span><span class="language-bash">å¯åŠ¨æˆåŠŸåå³å¯è®¿é—®</span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">å®¹å™¨åˆ é™¤ï¼Œæœ¬æœºä¸ŠæŒ‚è½½çš„æ•°æ®ä¾æ—§å­˜åœ¨</span></span><br></pre></td></tr></table></figure>



<h2 id="5-DockerFile-æ„å»ºé•œåƒ"><a href="#5-DockerFile-æ„å»ºé•œåƒ" class="headerlink" title="5 DockerFile æ„å»ºé•œåƒ"></a><strong>5 DockerFile æ„å»ºé•œåƒ</strong></h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹</span></span><br><span class="line">mkdir dockerfile</span><br><span class="line">cd dockerfile</span><br><span class="line">vim mydockerfile-centos</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">å¡«å†™æ„å»ºé•œåƒå†…å®¹</span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">åŸºç¡€é•œåƒcentosï¼Œè®¾ç½®ç¯å¢ƒå˜é‡å’Œå·¥ä½œè·¯å¾„ï¼Œå¼€æ”¾80ç«¯å£ï¼Œå®‰è£…vimã€‚netå·¥å…·</span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">å› ä¸ºcentoså·²ç»åœæ­¢ç»´æŠ¤äº†ï¼Œæ‰€ä»¥è¿è¡Œåˆ° yum install è¿™é‡Œä¼šå¡ä½ï¼Œéœ€è¦åŠ ä¸Šä¿®æ”¹é•œåƒæºçš„å‘½ä»¤ï¼Œyum makecacheè¿™ä¸€æ­¥ä¼šå¾ˆæ…¢ï¼Œæˆ‘æ›´äº†å¤§æ¦‚æœ‰4åˆ†é’Ÿå¤šï¼Œéœ€è¦è€å¿ƒç­‰å¾…ã€‚</span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">ä½†æ˜¯ä¼šè‡ªåŠ¨æ›´æ–°ç‰ˆæœ¬ï¼æœ€åæ„å»ºå‡ºæ¥çš„é•œåƒç‰¹åˆ«å¤§ï¼Œæ­£åœ¨æ‰¾è§£å†³æ–¹æ³•(å¾…è§£å†³)</span></span><br><span class="line"></span><br><span class="line">FROM centos</span><br><span class="line">MAINTAINER abilish&lt;sfy_mx@163.com&gt;</span><br><span class="line"></span><br><span class="line">ENV MYPATH /usr/local</span><br><span class="line">WORKDIR $MYPATH</span><br><span class="line"></span><br><span class="line">RUN cd /etc/yum.repos.d/</span><br><span class="line">RUN sed -i &#x27;s/mirrorlist/#mirrorlist/g&#x27; /etc/yum.repos.d/CentOS-*</span><br><span class="line">RUN sed -i &#x27;s|#baseurl=http://mirror.centos.org|baseurl=http://vault.centos.org|g&#x27; /etc/yum.repos.d/CentOS-*</span><br><span class="line">RUN yum makecache</span><br><span class="line">RUN yum update -y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">RUN yum -y install vim</span><br><span class="line">RUN yum -y install net-tools</span><br><span class="line"></span><br><span class="line">EXPOSE 80</span><br><span class="line"></span><br><span class="line">CMD echo $MYPATH</span><br><span class="line">CMD echo &quot;----end----&quot;</span><br><span class="line">CMD /bin/bash</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">build æ„å»º</span></span><br><span class="line">docker build -f mydockerfile-centos -t mycentos:1.0 .</span><br><span class="line"><span class="meta"># </span><span class="language-bash">æŸ¥çœ‹æ„å»ºå¥½çš„é•œåƒ</span></span><br><span class="line">docker images</span><br><span class="line"><span class="meta"># </span><span class="language-bash">è¿è¡Œ</span></span><br><span class="line">docker -it mycentos:1.0</span><br><span class="line"><span class="meta"># </span><span class="language-bash">æŸ¥çœ‹æ„å»ºå˜æ›´å†å²</span></span><br><span class="line">docker history</span><br></pre></td></tr></table></figure>

<p><strong>é—®é¢˜å¾…è§£å†³ï¼Œé•œåƒæ¢æºåå¦‚ä½•ä¸è‡ªåŠ¨æ›´æ–°</strong></p>
<h2 id="6-tomcat-é•œåƒ"><a href="#6-tomcat-é•œåƒ" class="headerlink" title="6 tomcat é•œåƒ"></a>6 tomcat é•œåƒ</h2><p>1ã€å‡†å¤‡é•œåƒæ–‡ä»¶ tomcatå‹ç¼©åŒ…ï¼Œjdkçš„å‹ç¼©åŒ…</p>
<p><code>jdk-8u151-linux-x64.tar.gz</code></p>
<p><code>apache-tomcat-9.0.72.tar.gz</code></p>
<p>é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1Zbe2JcOVYX-b1YPQhL3cgw?pwd=8888">https://pan.baidu.com/s/1Zbe2JcOVYX-b1YPQhL3cgw?pwd=8888</a><br>æå–ç ï¼š8888 </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch readme.txt</span><br></pre></td></tr></table></figure>



<p>2ã€ç¼–å†™dockerfileæ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># </span><span class="language-bash">Dockerfile æ˜¯å®˜æ–¹å‘½åï¼Œbuildæ—¶ä¼šè‡ªåŠ¨æ‰¾è¿™ä¸ªåå­—çš„æ–‡ä»¶ï¼Œä¸ç”¨æŒ‡å®š-få‚æ•°äº†</span></span><br><span class="line">vim Dockerfile</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">Dockerfile æ–‡ä»¶ä¸­çš„å†…å®¹ï¼ŒADDåä¼šè‡ªåŠ¨è§£å‹æ–‡ä»¶</span></span><br><span class="line">FROM centos</span><br><span class="line">MAINTAINER abilish&lt;sfy_mx@163.com&gt;</span><br><span class="line"></span><br><span class="line">COPY readme.txt /usr/local/readme.txt</span><br><span class="line"></span><br><span class="line">ADD jdk-8u151-linux-x64.tar.gz /usr/local/</span><br><span class="line">ADD apache-tomcat-9.0.72.tar.gz /usr/local/</span><br><span class="line"></span><br><span class="line">RUN cd /etc/yum.repos.d/</span><br><span class="line">RUN sed -i &#x27;s/mirrorlist/#mirrorlist/g&#x27; /etc/yum.repos.d/CentOS-*</span><br><span class="line">RUN sed -i &#x27;s|#baseurl=http://mirror.centos.org|baseurl=http://vault.centos.org|g&#x27; /etc/yum.repos.d/CentOS-*</span><br><span class="line">RUN yum makecache</span><br><span class="line">RUN yum update -y</span><br><span class="line"></span><br><span class="line">RUN yum -y install vim</span><br><span class="line"></span><br><span class="line">ENV MYPATH /usr/local</span><br><span class="line">WORKDIR $MYPATH</span><br><span class="line"></span><br><span class="line">ENV JAVA_HOME /usr/local/jdk1.8.0_151</span><br><span class="line">ENV CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span><br><span class="line">ENV CATALINA_HOME /usr/local/apache-tomcat-9.0.72</span><br><span class="line">ENV CATALINE_BASE /usr/local/apache-tomcat-9.0.72</span><br><span class="line">ENV PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/lib:$CATALINA_HOME/bin</span><br><span class="line"></span><br><span class="line">EXPOSE 8080</span><br><span class="line"></span><br><span class="line">CMD /usr/local/apache-tomcat-9.0.72/bin/startup.sh &amp;&amp; tail -F /url/local/apache-tomcat-9.0.72/bin/logs/catal</span><br><span class="line">ina.out</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">æ„å»ºé•œåƒ</span></span><br><span class="line">docker build -t diytomcat .</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">è¿è¡Œé•œåƒ</span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">æŒ‚è½½ç›®å½•æ˜¯ä¸Šé¢å­˜æ”¾jdkã€apacheç­‰æ–‡ä»¶ç›®å½•ä¸‹çš„ç›®å½•</span></span><br><span class="line">docker run -d -p 9090:8080 --name abilishtomcat -v /home/tomcat-jdk/test:/usr/local/apache-tomcat-9.0.72/webapps/test -v /home/tomcat-jdk/tomcatlogs/:/usr/local/apache-tomcat-9.0.72/logs diytomcat</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">è¿›å…¥å®¹å™¨</span></span><br><span class="line">docker exec -it é•œåƒid /bin/bash</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">è®¿é—® ip:9090</span> </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">å‘å¸ƒé¡¹ç›®(ç”±äºåšäº†å·æŒ‚è½½ï¼Œç›´æ¥åœ¨æœ¬åœ°ç¼–å†™é¡¹ç›®å°±å¯ä»¥å‘å¸ƒäº†)</span></span><br><span class="line">cd /home/tomcat-jdk/test</span><br><span class="line">mkdir WEB-INF</span><br><span class="line">cd WEB-INF</span><br><span class="line">vim web.xml</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">å†™å…¥</span></span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;</span><br><span class="line">    xmlns:web=&quot;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;</span><br><span class="line">    xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;</span><br><span class="line">    id=&quot;WebApp_ID&quot; version=&quot;2.5&quot;&gt;</span><br><span class="line">    </span><br><span class="line">&lt;/web-app&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash"><span class="built_in">cd</span> åˆ°ä¸Šä¸€å±‚ç›®å½•</span></span><br><span class="line">cd ..</span><br><span class="line"></span><br><span class="line">vim index.jsp</span><br><span class="line"></span><br><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">    pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;title&gt;å•¦å•¦å•¦å•¦å•¦&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">Hello World!&lt;br/&gt;</span><br><span class="line">&lt;%</span><br><span class="line">System.out.println(&quot;---my test web log---&quot;);</span><br><span class="line"><span class="meta">%</span><span class="language-bash">&gt;</span></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">è®¿é—® ipåœ°å€:9090/test/</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">æŸ¥çœ‹æ—¥å¿—æ˜¯å¦æ‰“å°å‡ºæ¥äº†</span></span><br><span class="line">cd ..</span><br><span class="line">cat catalina.out</span><br><span class="line"><span class="meta"># </span><span class="language-bash">å¯ä»¥çœ‹åˆ°è¾“å‡ºçš„ ---my <span class="built_in">test</span> web <span class="built_in">log</span>---  æ—¥å¿—</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">é¡¹ç›®éƒ¨ç½²æˆåŠŸå¹¶ä¸”èƒ½æˆåŠŸè®¿é—®</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">å‘å¸ƒé•œåƒ</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">å‘å¸ƒåˆ°å®˜æ–¹é•œåƒåº“ä¸­</span></span><br><span class="line">1 æ³¨å†Œè‡ªå·±çš„è´¦å·ï¼šhttps://hub.docker.com/</span><br><span class="line">2 ç¡®å®šè´¦å·å¯ä»¥ç™»å½•</span><br><span class="line">3 åœ¨æœåŠ¡å™¨ä¸Šæäº¤é•œåƒ</span><br><span class="line">docker login --help</span><br><span class="line"><span class="meta">	# </span><span class="language-bash">å¸¸ç”¨å‚æ•°</span></span><br><span class="line">		-u æŒ‡å®šæ˜µç§°</span><br><span class="line">		-p æŒ‡å®šå¯†ç </span><br><span class="line"></span><br><span class="line">4 ç™»å½•å docker push</span><br><span class="line">docker tag é•œåƒid ç”¨æˆ·å(è´¦å·å)/ä»“åº“å:ç‰ˆæœ¬å·</span><br><span class="line">docker tag diytomcat xxx/diytomcat:version1.0</span><br><span class="line"></span><br><span class="line">docker push ç”¨æˆ·å(è´¦å·å)/ä»“åº“å:ç‰ˆæœ¬å·</span><br><span class="line">docker push xxx/diytomcat:version1.0</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"># </span><span class="language-bash">å‘å¸ƒåˆ°é˜¿é‡Œäº‘é•œåƒåº“ä¸­</span></span><br><span class="line">ç™»å½•é˜¿é‡Œäº‘ï¼Œæ‰¾åˆ°å®¹å™¨é•œåƒæœåŠ¡ï¼Œåˆ›å»ºä¸ªäººå®ä¾‹åï¼Œæ‰¾åˆ°å‘½åç©ºé—´ï¼Œåˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´ï¼›åˆ›å»ºå®¹å™¨é•œåƒï¼Œä»“åº“ä¿¡æ¯é€‰æ‹©æœ¬åœ°ä»“åº“</span><br><span class="line"></span><br><span class="line">é€€å‡ºç™»å½•åˆšåˆšç™»å½•çš„è´¦å·ï¼šdocker logout</span><br><span class="line">æŒ‰ç…§é˜¿é‡Œäº‘é•œåƒä¸‹é¢çš„æ­¥éª¤æ¥ç™»å½•pushå³å¯</span><br></pre></td></tr></table></figure>





<h2 id="7-redisé›†ç¾¤éƒ¨ç½²"><a href="#7-redisé›†ç¾¤éƒ¨ç½²" class="headerlink" title="7 redisé›†ç¾¤éƒ¨ç½²"></a>7 redisé›†ç¾¤éƒ¨ç½²</h2><p><strong>ç‰¹ç‚¹</strong>ï¼šåˆ†ç‰‡ã€é«˜å¯ç”¨ã€è´Ÿè½½å‡è¡¡</p>
<p>å½“r-m3 æŒ‚äº†ï¼Œå¤‡ä»½ r-s3 ä¼šè¿›è¡Œæ›¿ä»£</p>
<p><img src="Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.assets/1678065538739.png" alt="1678065538739"></p>
<p>å‡†å¤‡ï¼šç§»é™¤æ‰€æœ‰å®¹å™¨ï¼Œé˜²æ­¢å¡é¡¿</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm -f $(docker ps -aq)</span><br></pre></td></tr></table></figure>

<p>è‡ªå®šä¹‰ä¸€ä¸ªç½‘ç»œ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network create redis --subnet 172.38.0.0/16</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡è„šæœ¬æ¥åˆ›å»ºå…­ä¸ªredisé…ç½®</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">for port in $(seq 1 6); \</span><br><span class="line">do \</span><br><span class="line">mkdir -p /mydata/redis/node-$&#123;port&#125;/conf</span><br><span class="line">touch /mydata/redis/node-$&#123;port&#125;/conf/redis.conf</span><br><span class="line">cat &lt;&lt; EOF &gt;/mydata/redis/node-$&#123;port&#125;/conf/redis.conf</span><br><span class="line">port 6379 </span><br><span class="line">bind 0.0.0.0</span><br><span class="line">cluster-enabled yes </span><br><span class="line">cluster-config-file nodes.conf</span><br><span class="line">cluster-node-timeout 5000</span><br><span class="line">cluster-announce-ip 172.38.0.1$&#123;port&#125;</span><br><span class="line">cluster-announce-port 6379</span><br><span class="line">cluster-announce-bus-port 16379</span><br><span class="line">appendonly yes</span><br><span class="line">EOF</span><br><span class="line">done</span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /mydata/</span><br></pre></td></tr></table></figure>



<p>å¯åŠ¨å®¹å™¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 6371:6379 -p 16371:16379 --name redis-1 \</span><br><span class="line">    -v /mydata/redis/node-1/data:/data \</span><br><span class="line">    -v /mydata/redis/node-1/conf/redis.conf:/etc/redis/redis.conf \</span><br><span class="line">    -d --net redis --ip 172.38.0.11 redis:5.0.9-alpine3.11 redis-server /etc/redis/redis.conf</span><br></pre></td></tr></table></figure>
            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">æ ‡ç­¾</span><br/>
                
    <a class="tag tag--primary tag--small t-none-link" href="/tags/Docker/" rel="tag">Docker</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/%E5%88%9B%E4%BD%9C%E4%B8%AD/" rel="tag">åˆ›ä½œä¸­</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2023/03/10/%E5%88%9D%E8%AF%86Nginx/"
                    data-tooltip="åˆè¯†Nginx"
                    aria-label="ä¸Šä¸€ç¯‡: åˆè¯†Nginx"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">ä¸Šä¸€ç¯‡</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2023/01/31/resolve-%E6%96%B9%E6%B3%95/"
                    data-tooltip=".resolve()æ–¹æ³•"
                    aria-label="ä¸‹ä¸€ç¯‡: .resolve()æ–¹æ³•"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">ä¸‹ä¸€ç¯‡</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://example.com/2023/03/07/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"
                    title="åˆ†äº«åˆ° Facebook"
                    aria-label="åˆ†äº«åˆ° Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=http://example.com/2023/03/07/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"
                    title="åˆ†äº«åˆ° Twitter"
                    aria-label="åˆ†äº«åˆ° Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=http://example.com/2023/03/07/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"
                    title="åˆ†äº«åˆ° Google+"
                    aria-label="åˆ†äº«åˆ° Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="ç›®å½•">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2023 Abilish. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2023/03/10/%E5%88%9D%E8%AF%86Nginx/"
                    data-tooltip="åˆè¯†Nginx"
                    aria-label="ä¸Šä¸€ç¯‡: åˆè¯†Nginx"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">ä¸Šä¸€ç¯‡</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2023/01/31/resolve-%E6%96%B9%E6%B3%95/"
                    data-tooltip=".resolve()æ–¹æ³•"
                    aria-label="ä¸‹ä¸€ç¯‡: .resolve()æ–¹æ³•"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">ä¸‹ä¸€ç¯‡</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://example.com/2023/03/07/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"
                    title="åˆ†äº«åˆ° Facebook"
                    aria-label="åˆ†äº«åˆ° Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=http://example.com/2023/03/07/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"
                    title="åˆ†äº«åˆ° Twitter"
                    aria-label="åˆ†äº«åˆ° Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=http://example.com/2023/03/07/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"
                    title="åˆ†äº«åˆ° Google+"
                    aria-label="åˆ†äº«åˆ° Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="ç›®å½•">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="4">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=http://example.com/2023/03/07/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"
                        aria-label="åˆ†äº«åˆ° Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>åˆ†äº«åˆ° Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=http://example.com/2023/03/07/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"
                        aria-label="åˆ†äº«åˆ° Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>åˆ†äº«åˆ° Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://plus.google.com/share?url=http://example.com/2023/03/07/Docker%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"
                        aria-label="åˆ†äº«åˆ° Google+"
                    >
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>åˆ†äº«åˆ° Google+</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/avatar.png" alt="ä½œè€…çš„å›¾ç‰‡"/>
        
            <h4 id="about-card-name">Abilish</h4>
        
            <div id="about-card-bio"><p>Less is More.</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p><a href="mailto:&#x73;&#x66;&#x79;&#95;&#x6d;&#120;&#64;&#49;&#x36;&#x33;&#x2e;&#x63;&#111;&#109;">&#x73;&#x66;&#x79;&#95;&#x6d;&#120;&#64;&#49;&#x36;&#x33;&#x2e;&#x63;&#111;&#109;</a></p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                China, Heilongjiang
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/bg.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-u4gocod02ukvjjitb63sjkl6iu1qjp8lpnsrzttfhzhhifp6ao9kpwvy9cik.min.js"></script>

<!--SCRIPTS END-->


    




    </body>
</html>
